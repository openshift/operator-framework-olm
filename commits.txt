09fd124d6 fix apidif
a83913da2 fix: bundle size validator: ammount compressed scenarios should be lower than < ~1MB and add improvement to show uncompressed ammount
83f54fb91 fix: ensure that all load bundle methods will check the size (#227)
f3020cb05 add bundle size validator check (#210)
447bc9dfd add some extra clarifications (#222)
c0df2142e .github/workflows: Update the pull_request trigger for the Go workflow (#224)
f26d95a78 feat: add warning for olm.properties being defined when validating csv (#217)
0f4bb3351 .github/workflows: Add workflow_dispatch event trigger (#214)
18b8a45d3 Purge the root vendor directory (#213)
3f7eaca28 deprecate-api validator: add checks for removed APIs on 1.25 and 1.26 (#208)
e02b0c82d Add perdasilva to approvers
3f727364a (catsrc) add custom unmarshaller for registry poll interval (#169)
ae0da0ed5 Add awgreene to list of approvers in OWNERS file (#218)
8f57b5bfb Update OWNERS (#216)
f7893af5e Added field for optional manifests (#209)
cf9801f23 fix: alm-example parse check should not fail when the annotation if empty (#215)
95132180d chore: Bump k8s dependencies to 1.23 (#212)
ce0eb3266 csv_validator: add check to ensure that the example is a valid JSON (#207)
4a8d766f5 validator/good practices: Improve message (#206)
1f091bee4 Add perdasilva to list of reviewers (#201)
19432e845 chore(modules): vendor dependencies
3725e1e0d Remove operator-registry from vendor folder
d7e151aa4 chore(modules): update vendor directory
08e78fa2e chore(modules): update vendor directory
353c9f9f1 with vendor directory
76d1f5a30 Remove unused cache.AtLeast function. (#2681)
be44ec354 Remove cache.OperatorCacheProvider interface. (#2680)
e5c8de4b1 fix(operatorconditions): don't retry on 404 (#2679)
03729c3f9 Remove ConstraintProvider from the exported solver package API. (#2675)
3bab7c39e decrease logging level to debug for noisy catalog and olm operator logs
0dc886807 Update Catalog e2e tests to use rawInterval
845b4ec11 Bump k8s dependencies to 1.23 to align with o-f/api - logr updated from v0.4.0 to v1.2.0 (cascading implications) - Bumped to go 1.17 in Dockerfile - Amended the github action for unit tests:   - the envtest binaries were very very old (K8 1.16)   - the distribution of kubebuilder binaries and envtest changed in the meantime   - kubebuilder is not really needed for the tests and not part of the envtest installation ->  check disabled in Makefile - Used `kubectl create` instead of `kubectl apply` to avoid too long annotations for CRDs
18a2b947b Mitigate flaky install plan e2e test (#2668)
181b6b886 Remove import of operators.coreos.com lister package from resolver. (#2661)
ae0ca1e51 .github: Avoid disabling the go mod pkg cache for the golangci-lint action (#2660)
440c7f8ad Remove unused ttl field from cache.Cache. (#2658)
b478c7708 Remove vestigal cache.OperatorSet type. (#2656)
6dbccd82c cmd/catalog: Migrate to using cobra for CLI flag management (#2362)
33572e6ca Give Sources control of invalidation for Snapshots they produce.
b73845712 Replace hardcoded resolver cache mutation with CSV cache.Source. (#2632)
031b21336 Remove unused GHA workflows (#2650)
5c6bf8a8e Remove generated and unused resolver/fakes subpackage.
ac516dad5 Remove CatalogSourceLister usage from resolver/cache. (#2648)
004e1ae22 (Partially) mitigate flaky tests (#2625)
6f4a176db Clarify solver package responsibility. (#2647)
98eb1cb86 Fix cpb traverses unneeded paths (#2239)
0a915a5e8 docs: add logo for github dark mode (#2622)
3aecccf97 README: Remove reference to subscribing to packages through the tectonic UI (#2301)
8471feded .github: Remove the automatic rebase action (#2620)
804512ca4 cmd/catalog: Default to the $KUBECONFIG environment variable (#2303)
710c96e8d [BZ #2048441] Fix a bug in deletion of webhook service for replacement (#2606)
897a53add change Lister to DynamicClient for subscription clean up (#2616)
ac9236f7c Remove the out-of-date CHANGELOG.md (#2608)
5d7eff1ae Add workflow for automatically rebasing open PRs (#2612)
b12032a75 fix: remove hardcoded minikube version from build_local.sh to support minikube users locally (#2607)
59fdf61c4 wait for operatorhubio-catalog ready before test starts (#2605)
f9ca416da Stop corrupting resolver cache. (#2604)
7238d11ba Makefile: Remove unused targets/variables (#2567)
e348996d8 count only active ns and wait for namespace clean up (#2585)
de32e593a OWNERS: Add akihikokuroda as a reviewer (#2602)
c55f7783f wait for catalogsource ready (#2601)
f1bd02858 Remove unused ipLister field from OperatorStepResolver. (#2587)
6fb02d292 put mutex around installplan creation (#2545)
50799623e ci: Support configuring the logging level for the splitter package (#2579)
864d921d3 Introduce Experimental Metrics (#2435)
5b014484e use unique name for each test (#2541)
1631f3e49 chore(e2e): naively parallelize CI jobs by chunking alphabetically (#2520)
37a7ac7d9 recover nil GRPCConnectionState by update failure (#2561)
5752fa97d wait for catalogsource pod deletion (#2444)
107e14ff0 wait for condition update (#2510)
ba3d06fd9 fix e2e config map update triggers registry pod rollout failure (#2532)
918e393b7 add possible error message patterns (#2565)
2f70f164d add wait for config injection in e2e test (#2547)
ee469ae84 CSV e2e - wait for 2 pods ready before delete one pod (#2554)
74d8e2575 Bump olmConfig controller logging message to debug (#2568)
5faf373a1 Update goreleaser go version to 1.17 (#2557)
ca99f270c Bump repository to Go 1.17 (#2556)
3135ea9a8 Remove the unused 'lint' Makefile target (#2555)
a8df88582 fix disable copied csv e2e test failure (#2543)
55452a94f doc/design: Update the release documentation (#2549)
7d6a04c95 Update OWNERS file (#2551)
1b1b094b6 Fix goreleaser image repository configuration (#2548)
2f8b4be05 Remove NamespaceSourceQuerier API that is no longer in use (#2380)
e1ade2169 fix registry grpc unit test intermittent failure (#2521)
fde47792d Add MagicCatalog for creating arbitrary file-based catalogs (#2527)
44654f283 Integrate golangci-lint to run aggregate linting checks for CI (#2536)
483bbe0b5 Remove bill-of-materials.json (#2535)
24985a7aa chore(github): run e2e workflow against master periodically (#2528)
2bfc3795e chore(api): Vendor the new version of api repo (#2525)
9d3db1d1a .github/workflows: Enable workflow_dispatch event triggers (#2464)
9c47cd6c0 .github/workflows: Update the checkouts action to use the v1 version (#2463)
06d5c0d30 Fix github alias links in MAINTAINERS.md (#2533)
6ea929d31 Add system constraint provider logic to resolver and add step resolver init hooks (#2523)
c6f885f2d Introduce GRPC Proxy unit tests (#2428)
6fa712d60 (vendor) bump go-sqlite to 1.14.10 (#896)
f445d567b Update extract.go (#876)
fe41e9b13 feat(constraint): Add constraint type validation to bundle validation (#888)
d045f587f (.gitignore): Do not ignore debug/ (#890)
8112836b1 (vendor) bump api to v0.11.0 (#887)
5fb335a9e bump grpc dependency to latest (#810)
5f7fb114e Bump operator-framework API to 0.10.5 (#737)
ca5bcd0e8 remove darwin builds, disable goreleaser github releasers, re-add .github/workflows/release.yaml
198d00f16 Merge pull request #258 from perdasilva/fix_kubebuilder_install
59947b919 Fix install_kubebuilder.sh script
99d2f8c64 Merge pull request #257 from timflannagan/ci/bump-base-dockerfile-go-version
62ddd2079 Update the build root Dockerfile base image
1b60477a5 Merge pull request #250 from openshift-bot/art-consistency-openshift-4.11-operator-lifecycle-manager
f96daca5a Merge pull request #249 from openshift-bot/art-consistency-openshift-4.11-operator-registry
6858269bd Merge pull request #228 from eggfoobar/leader_election_config
6182cf61f Merge pull request #227 from ankitathomas/cleanup-scripts
928cd2246 Updating operator-lifecycle-manager images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/0059e470a61eba28225165168b22d9e77c33c926/images/operator-lifecycle-manager.yml
fbc18d65c Updating operator-registry images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/0059e470a61eba28225165168b22d9e77c33c926/images/operator-registry.yml
5863540f4 Merge pull request #248 from tylerslaton/sync-constraint-changes
fbfd54eeb feat: update api version to be 0.12.0 in order to use new Not constraint (#2603)
a2896729a chore: update o-f/api version to v0.12.0 (#911)
6a95e25a7 refactor(constraint): update none compound constraint to be not (#221)
0d3db5544 fix(render/diff): Support olm.constraint in opm render/diff cmd (#901)
6dce29c1b chore(constraint): Correct message to failureMessage in olm.constraint schema (#2572)
46ea48565 fix(constraint): Correct the message field to be failureMessage (#211)
b2d3ba890 test: added unit tests for leader election
da97b0d3f upkeep: ran make verify
9e56f4f53 feat: added leader election conventons
d795a1d8e Merge pull request #240 from awgreene/grpc-address-bug-fix
e8f3aa69a Merge pull request #247 from benluddy/patch-1
06306d85d Remove benluddy from approvers.
3820d16f4 Merge pull request #241 from perdasilva/add_per_to_owners
9379df58f Merge pull request #242 from awgreene/bz-2003164
2cd20d241 Do not modify object from the lister cache (#2562)
79c782526 Merge pull request #239 from timflannagan/bz-1952576
78d2b0af3 Merge pull request #238 from kevinrizza/master
4c4835a0c Add perdasilva to OWNERS
12e83f9b9 Address Invalid Address in GRPC Catalogs (#2499)
7baca835c fix e2e CSV metric is preserved failure (#2530)
91b949ae2 Emit CSV metric on startup (#2216)
0bb2c07f6 Bug 2037168: Remove incorrect cvo annotations
13f7723ba Merge pull request #237 from awgreene/olmconfig-create-only-annotation
423c68713 Add the create-only annotation to the olmconfig/cluster manifest
6efdf7acb Merge pull request #236 from timflannagan/sync-olm-copied-csv
9c548f2fd manifests: Add the OLMConfig CRD
e3ea532e5 Introduce olmConfig controller (#2466)
cf218f7fe Merge pull request #232 from dinhxuanvu/synx-12-14-test
325983e6d feat: catalog source pod scheduling config overrides (#2512)
4efba59f3 feat(resolver): support generic constraint using CEL (#2506)
b59e7342c feat(resolver): resolve compound dep constraints from bundle properties (#2418)
9e65a9a5b chore(deps): bump o-f/api for new constraint types (#2515)
d87c0de02 go.*,pkg,vendor: Bump controller-runtime to v0.10.1 (#2368)
a494ce140 doc: further information and example of usage (#205)
f73f86c7c feat(constraints): add compound constraints and olm.constraint value parser (#203)
7ff5e4a1f test: skip image polling test if running in a kind cluster (#2445)
0c319f5c7 test/e2e: Fix unset  when gathering CI testing artifacts (#2450)
5bb028dbf Introduce a mechanism for gathering test artifacts during individual test failures (#2442)
6b141273d Merge pull request #231 from anik120/sync-registry-12-15
7e3871875 fix(diff): prune empty channel when old model is empty (#884)
30b39543f chore(deps): upgrade of/api for new constraint type (#880)
e58ffe0dd Merge pull request #225 from anik120/sync-api-10-12-2021
aafc7b5fe clean up unused scripts
5485c64e2 bugfix: make spec.grpcPodConfig.priorityClassName a *string
54b083fd5 feat(cel): Add CEL custom library for semver comparison (#202)
ddc7ca9ce add new good-practices validator (#197)
2ae9059da Introduce OLMConfig CRD (#198)
ff03d62c6 Merge pull request #223 from anik120/sync-olm-12-10-21
33fa1102c Add grpcPodConfig attribute to spec (#173)
d065c9745 Add format as a prerequisite to verify target (#200)
6d609e9bd deprecate: CommunityValidator (#199)
d073e45eb doc: fix layout of the doc (#171)
923c6c035 Merge pull request #224 from anik120/op-registry-sync-10-09-2021
dbd7e9a77 Introduce Maintainers File (#2456)
635f3c78f Add instructions for setting up envtest and checking go version (#2504)
0c485c8a0 .github/workflows: Avoid specifying the paths-ignore keyword (#2511)
184f0ae86 cmd: Silence warning about logrus.Fatal usage when directive has been supplied (#2462)
93fc88a07 fix unexpected deployment hash value change (#2508)
7bd61f0fa test/e2e: Collect CatalogSource testing artifacts and delete empty files (#2460)
5f9ca66da pkg,test: Remove duplicate package imports (#2501)
f84457507 Rename CI github workflows (#2446)
09a43ac78 alpha/declcfg: re-encode olm.bundle.object data to JSON when loading (#874)
dc5f6de60 Merge pull request #218 from timflannagan/sync/11-30-and-registry-no-grpc-bump
5ba7d1af0 drop trailing slash for catalog directory on opm alpha generate dockerfile (#831)
8957e5ebc pkg/sqlite: use consistent starting depth when building channel_entry table (#868)
02663b502 (fix) database is locked during removal (#828)
b95ad9bfc Block cross-package skips/replaces on add (#826)
32b7b0653 Adding equivalent opm index flags to opm registry (#827)
3099308f3 opm validate: fail on duplicate packages, channels, and bundles (#824)
6b96c00a3 feat(diff): change default behavior to prune by omission (#819)
ada17ab6e goreleaser: use netgo and osusergo to ensure completely static binary builds (#821)
64ce5b90e render: include olm.bundle.object properties in rendered bundle images (#807)
76dfb74c2 .github/workflows/goreleaser.yaml: fix cross-compiler install step (#818)
fb9d689ba Log a warning when loading bundle manifests with multiple documents (#708)
442bcb774 retain single bundle default channel for overwrite (#812)
26c0883d1 e2e local test for mac (#785)
8f7c15376 alpha/declcfg: Include bundle name in version parsing failure message (#811)
67d84fdde Makefile: Add a .PHONY target for the opm build target (#813)
6b326f926 fix(opm): ignore empty include file args (#808)
ea627a90a build(deps): bump github.com/containerd/containerd from 1.4.8 to 1.4.11 (#806)
3ac596922 (opm) Introduce deprecatetruncate for `opm registry` (#804)
bbdb874c7 registry: vacuum db on commands that remove data (#803)
f85f31221 ensure use of bash as Makefile shell (#802)
e1229be42 Makefile: fix major and major-minor docker release tags (#801)
ed6edb359 Check only for new bundles on add (#798)
6f0b8ebe1 Use the proper grpc_health_probe command per architectures. (#796)
254dfdd84 render: populate related images even when CSV has none explicitly defined (#797)
a7fdfdf9f Enable cgo in multiarch builds (#793)
b8e5cc27d migrate: add subcommand to migrate sqlite catalogs to file-based catalogs (#770)
52e90015a handle deprecating branch points (#767)
4947f3406 fix: update opm commands to specify if they don't take args (#786)
47cee9b7a fix(alpha): update long description indentation (#789)
80e4a9241 feat(diff): optionally include bundle names (#787)
8dca80f68 fix: Unable to deprecate bundles that are head of a NOT default channel with opm deprecatetruncate (#780)
121ef6b7c Update CASE to match resource. (#694)
a4fe1851e opm serve: pre-compute and store api.Bundles to disk; requests read from disk  (#783)
41c7be418 feat(opm): include arbitrary packages, channels, and versions in diffs (#716)
ccc08edd1 use static distroless image instead of base (#778)
a28216b0b fix: clarifies message error regards service account (#174)
798dfd6af fix: Scorecard configuration ServiceAccount tag (#166)
8a250a513 fix: add missing allowed category (#164)
704d0ad3e doc operatorhub validator (#159)
ad3f39546 chore(docs): emphasize release versioning requirements (#162)
509e6725d fix(validators): check object GVK in bundle service account validator (#161)
840c9134c Validate SA names do not match csv deployment spec (#144)
6af63ed22 Add Service Account Config to Scorecard (#153)
84f7ca58f feat: add new validator to only check the usage of deprecate apis (#156)
d1d38138a Merge pull request #213 from njhale/sync/10-18
a4147d89f fix(sub): Only update subscriptions that have changes in status (#2399)
a6861acaf remove panic (#2448)
4a0f091dc test/e2e: Fix 'resource name may not be empty' failure in catalog templating test case (#2457)
a2f4723f1 test/e2e: Reduce subscription e2e test pollution (#2438)
b57566008 .github,test: Upload container logs during e2e runs as artifacts (#2432)
f7fdf89cf Makefile: Explicitly override the default OLM install and test namespaces
47d8f3cd8 Fix typo and add clarity to replacing transition (#2426)
a42e9b430 Expose pprof endpoint if tls is not configured (#2422)
55508edd9 Makefile: Update the e2e-local target and add CI-friendly ginkgo options (#2414)
bd293096d Improve reliability of e2e tests that include GRPC CatalogSources (#2419)
e37952b2f fix: use v1 pdb object under e2e bundle test (#2398)
2248662df fix: wrap csv e2e test create in Eventually statements in the BeforeEach block (#2387)
5d2375154 test/e2e: Wrap flake-prone garbage collection tests in eventually assertions (#2403)
baea59c5b chore(make): add e2e test options (#2393)
2f2caa4d1 Rename resolver/cache.Operator to Entry. (#2359)
fb8b0f463 fix(e2e): Remove the PreExistingCRDOwnerIsReplaced e2e test case (#2388)
26182b4f5 fix(e2e): Using Eventually to check subscription state (#2396)
5cfd98e82 fix: wrap subscription e2e test logic in Eventually statement (#2392)
09bc47556 test(e2e): use server-side apply to update fixture (#2385)
9941e120b Makefile: Update the e2e target to use ginkgo (#2367)
295c1dcb7 Integrate goreleaser to produce draft releases when new tags are pushed (#2365)
e37e7d67c Update default catalog namespace (#2371)
064c435dd pkg/controller: Fix panic when creating cluster-scoped RBAC in OG controller (#2349)
1023034ab Add olm-managed label to configmap-based catalogsource for e2e test (#2370)
fb8b5724a test/e2e: Remove the unused e2e.sh and tap.jq files (#2366)
336f02eb7 Add summary and description for prometheus alerts (#2361)
25fb2651e Makefile,test: Remove the test/rh-operators directory (#2354)
cb3b165d1 .github/workflows: Don't run the sanity jobs for markdown-only updates (#2356)
9674465bd fail gracefully when client-ca file is not set or doesn't exist (#2358)
eb55029e4 .github/workflows: Bump the docker/build-push-action to the v2 version
afa6ef4dc Update the CONTRIBUTING.md guidelines (#2344)
5c838276a pkg,test: Fix linting violations in relevant packages
b33b6b58d .github/workflows: Introduce a sanity check that runs static linting/style checks
011db68b5 Makefile: Add a linting target that runs gofmt/goimports
e02906a77 fix(og): Fix missing MultiOperatorGroups condition in some cases (#2305)
8970fc081 Merge pull request #211 from dinhxuanvu/upgrade-delay
807c857a6 pkg/controller: Migrate to using a read lock instead of a readwrite lock when checking for any namespace caching errors (#2382)
f70bd92b8 Remove oudated subscription update logic to improve resolution delay (#2369)
6d684d4d9 Merge pull request #208 from awgreene/update-collect-profile-namespace
0c261a1fa Use arguments to configure pprof-secret
dde7292f1 Merge pull request #206 from njhale/sync/grpc-no-proxy
76afb08a4 Merge pull request #205 from njhale/sync/quarter-2
c4e244763 Introduce GRPC_PROXY EnvVar Support (#2364)
6a39a9a46 feat(opm): fine-grained dependency selection in diffs (#756)
8fa95ac5c .github/workflows: Don't run CI checks for markdown-only updates (#2347)
b1e86958c fix(release): upgrade goreleaser so script requests correct checksum file (#773)
e3dc18c5c chore: update manifests
b3bc3eba3 Bump OLM_VERSION to 0.19.0 (#2348)
d7faee734 doc(readme): add chat badge (#2345)
f1f6a3343 .github/workflows: Separate out the e2e jobs into workflows (#2158)
f610b0985 chore: update manifests
dcbe7701f modified the controller-runtime and controller-tools versions (#154)
4314d89a7 Remove hardcoded references to the registry gRPC API from the resolver packages. (#2340)
63b841586 Add validation for Kind and APIVersion (#152)
5ee92ca8d Add Timestamp to Scorecard Test Results (#137)
a46d4c876 Remove unneeded replace pin for sigs.k8s.io/structured-merge-diff (#2338)
9f1a51d79 Reduce resolver dependencies on operator-registry and operator-lifecycle-manager. (#2337)
af5c4c2ed fix: ensure operator images are included in rendered bundles related images (#771)
301587ba0 Merge pull request #200 from njhale/sync/half
c98b23dee update default scaffolded opm base image (#762)
44b39b1ae Fix 2327: Detecting OLM existence before start to install (#2334)
1b1751a31 (fix) : Fix check to verify OCP label versions when it is =v4.x (#148)
54a82e931 bump gini (#2336)
2eda531c1 fix broken URL in unit.yaml GH action (#2335)
baf84fad5 move internal to alpha to make subpackages available for importing from other projects (#759)
b5953c971 feat(opm): configure diff to not include dependency bundles with --skip-deps (#753)
0b7711578 Fix upstream-opm-builder (#758)
1fca926f8 Use of/gini instead of inifrance/gini (#2331)
42dc86b42 Add vu dinh to OLM approvers (#2332)
da994b77a Prune API of the resolver package. (#2330)
a8ad0d24f Add joelanford as an approver in OWNERS (#751)
f8cb8dbb5 cli doc: opm serve does not detect DC changes after startup (#750)
13f3cc8be add further console customization types (#2319)
4e8f0d541 feat(release): X.Y, X, and latest opm image tags (#738)
7cff3298b feat: support removing the default channel head in deprecatetrunace (#734)
761b51f93 .github/workflows: Replace the e2e-kind job name with e2e in the test workflow (#730)
ef6614148 add further console customization types
efbfe0477 Move operator caching from resolver into a new package. (#2316)
84c660776 setup multi-arch builds with goreleaser
c553dde9a internal/declcfg: Avoid processing the .indexignore file when walking the root fs (#733)
f405a8ecb let net.Listen pick a port for grpc servers generated in tests (#2310)
9e3125208 don't return an error if the singleton rbac doesn't exist (#2309)
999506f9a .github/workflows: Avoid running the e2e-tests workflow on doc-only pull requests (#2299)
327f6b774 doc/design: Update the changelog release documentation (#2298)
e9be950d8 Update containerd dependency to fix vulnerabilities (#719)
a2c7df0e6 v0.18.3 OLM release
2b6872781 Expose errors generated while retrieving catalog content.
282bb6e1f .github/workflows: Fix the release quickstart.yaml GH action
001135e9b Merge pull request #199 from kevinrizza/add-readme
bf964279f Add a readme
a768ef8e8 Merge pull request #189 from openshift-bot/art-consistency-openshift-4.10-operator-lifecycle-manager
3cef91bfe Merge pull request #188 from openshift-bot/art-consistency-openshift-4.10-operator-registry
a5303ed3d Updating operator-lifecycle-manager images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/79fa14aac4fe70e2d6b85876bf225f546a8e73a7/images/operator-lifecycle-manager.yml
206d2a09c Updating operator-registry images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/79fa14aac4fe70e2d6b85876bf225f546a8e73a7/images/operator-registry.yml
f2feb108c Merge pull request #185 from timflannagan/remove-scripts-readme
4a8195458 scripts: Update the README.md to point to the downstream gdoc
e80f0524b Merge pull request #183 from timflannagan/update-build-root-config
7a7c6b453 Introduce the .ci-operator.yaml file
32eb25914 Merge pull request #179 from benluddy/bz-2000144
247887f1f Merge pull request #181 from joelanford/bz-2000146
bbd687b8e Introduce olm.channel schema, remove channel metadata-related bundle properties
98b8c0fbc Mark GetBundleForChannel as deprecated and trim its response.
01e1cf8ca Merge pull request #178 from awgreene/owners-update
ca5d761a8 Merge pull request #137 from timflannagan/packageserver-ha-expectations
9647632b7 pkg,scripts: Ensure the PackageServer CSV contains a hard pod anti-affinity configuration
f4e67294b manifests,scripts: Add a PodDisruptionBudget resources for the PackageServer component
5f4c7ea2a Update OWNERS file
859291e1c Merge pull request #176 from joelanford/bz-1994648
d4a3aa1c3 Merge pull request #177 from joelanford/bz-1996878
c3c64d40c Add deprecation warnings for CLIs that use or depend on sqlite
7a6282c8b manifests,scripts: Update the PSM deployment filename to be consistent with the rest of the YAML manifests
0178564d0 Merge pull request #175 from joelanford/bz-1995300
52aa59c71 fix(sub): Reset ResolutionFailed cond when error is resolved (#2296)
6ee2f331d Merge pull request #157 from timflannagan/fix-multi-arch-opm-version
1841f3076 opm validate: check for cycles and stranded bundles in channel validation (#755)
d1dea1028 Merge pull request #170 from timflannagan/k8s-bump
0ba8af9f5 Merge pull request #172 from timflannagan/fix-build-root-dockerfile
f55f561cd Update kubebuilder installation in the build root dockerfile
0934d42a4 Merge pull request #150 from timflannagan/fix-opm-index-prune-panic
b82547dc5 scripts: Ignore upstream commits touching the root go.[sum,mod] files
b5bc8b5fb fix: update make generate directive to be crossplatform
97e684566 feat: bump k8s dependencies to v0.22.0 (#2323)
e65faeb8c feat: bump k8s dependencies to v0.22.0 (#747)
6a09badd6 feat: bump k8s to v0.22.0 (#145)
b5600cf63 Merge pull request #171 from njhale/fix/verify-commits
40493e689 Merge pull request #169 from ankitathomas/maxocperror
69171128d chore(verify-commits): initialize variable
5bd4cad68 Merge pull request #138 from njhale/verify-commits
43b502193 chore: add verify-commits make target
a5bcfe06a add maxOpenShiftVersion test for parsing full version string (#147)
9caf73f4e warn on maxOpenShiftVersion specifying more than major.minor (#146)
cc481dfd4 clarify maxOpenShiftVersion upgrade error message (#2326)
fc5e9b57f Merge pull request #164 from estroz/bz/1989431
4f3624c69 Merge pull request #166 from njhale/fix/drop-z
9f21b6b0d fix(opm): clarify that bundle declcfgs are not valid refs alone (#741)
f9bff9e54 fix(openshift): drop z from next calculated y-stream (#2324)
edcddea0f Merge pull request #163 from estroz/bz/1989796
859431bd1 Merge pull request #161 from estroz/bz/1989460
f62aaf31c Merge pull request #162 from njhale/fix/rmpkg-deprecate
a856ed067 Merge pull request #160 from ankitathomas/bz1983673
4895c84a9 docs(diff): add point about versions that differ (#735)
b3c146f57 chore(opm): note that whole dependency packages are added to the diff for now (#740)
c41b52357 fix(deprecate): explicit pkg rm drops latest deprecated
fb92eba59 Merge pull request #144 from kevinrizza/catalog-switcher
a766f625d check for pruned bundles on add in replaces mode (#732)
e6840f9ce Merge pull request #159 from benluddy/bz-1990850
512dde7b5 Handle property and dependency values of type BLOB in ListBundles.
3a21821b7 Merge pull request #136 from timflannagan/update-leader-election-psm-config
e47245b42 Merge pull request #154 from njhale/fix/invalid-max
e4e78e51f Makefile: Ensure cross-compiled opm binaries produce non-empty version information
9889a1ad7 Merge pull request #151 from dinhxuanvu/catsrc-priorityclass
a47e7c1b4 Merge pull request #149 from benluddy/bz-1989710
f848f27a1 Use GitVersion to parse version from discovery (#2312)
552292e08 Merge pull request #147 from benluddy/bz-1989600
90140470a fix(openshift): block upgrades on invalid max properties (#2302)
06abc61a5 Merge pull request #148 from dinhxuanvu/catsrc-priority
42f4b533e Add PriorityClass setting to registry pods for default CatalogSource (#2304)
bb05a865e Fix nil function in buildContext return values (#610)
4f39a6fb6 Prune unused ClusterServiceVersion fields from catalog's informer.
64cf2683c fix(og): Fix missing MultiOperatorGroups condition in some cases (#2305)
d4bc691a2 Set soft_heap_limit for SQLite-based registry servers. (#728)
36a8575d9 Omit manifests from ListBundles result if bundle image is available. (#725)
d6d2b6d14 Update Registry to stream bundles (#723)
1b907c7ed Set legacy API fields in ListBundles using available properties. (#724)
ba7041aac Aggregate properties/dependencies in-query for ListBundles. (#720)
82328e004 Wrap catalog update test with retry logic (#2311)
85f5cf292 Catalog switcher (#2281)
cf7140bf3 Merge pull request #143 from joelanford/bz-1923111
298bdf6da Merge pull request #142 from joelanford/bz-1987160
b6361dd3f installplans: retry crd updates on conflicts (#2293)
295bf0213 fix(diff): heads-only mode should not attempt to parse old refs (#727)
5c57b2841 Merge pull request #139 from timflannagan/opm-alpha-diff-fix
4e6b4bad7 cmd/opm: Fix panic in opm alpha diff when accessing the --skip-tls flag (#721)
088bd07ea Merge pull request #135 from joelanford/bz-1969902
50b71a7ec cmd/psm: Update the leader election configurations
e736f4e14 resolver: remove legacy support for fallback parsing of CSVs
3475b1d5d Merge pull request #130 from awgreene/remove-cluster-monitoring-label
4a5ad031b Merge pull request #133 from kevinrizza/staging-temp-sync
633919c08 Add managed label to configmap to reduce cache size
6c855c7d1 Drop inline manifests from resolver cache.
d20b7197f Hash and prune copied ClusterServiceVersions in olm-operator.
eb186f880 Add openapi markers for csv (#141)
e64a02403 opm alpha diff: generate a diff between two sets of catalog/bundle refs
759381e2d Bump to k8s.io 1.22-rc.0.
8b7f5fffe add declcfg.WalkFS function
5fb2bda3a Add conditions to catalog source
a37952102 feat(resolver): Indicate dependency class in resolution constraint text
48a386dad Merge pull request #131 from kevinrizza/sync
e5ee15397 Merge pull request #112 from awgreene/continuous-profiling
887534217 feat(resolver): Move all predicates to its own file
8e85501b5 add short description for generate subcommand
6f67054dc add note explaining duplicate label keys
25485737a add generate_dockerfile_test.go, fix format string
352cceb3b add command to generate DC dockerfile
a21216621 fix psm deployment
0c3dd77e3 Introduce continuous profiling
74ed30d7f feat(sub): Indicate resolution conflicts on Subscription statuses
814dfec7c vendor of/api v0.10.2
d3eb9c841 Add filter labels to catalog pod cache
5e7648af0 Remove monitoring label from openshift-operators namespace
ae9214651 Merge pull request #129 from kevinrizza/upstream-sync-branch
ec51a3dd2 Update getMetricsFromPort to infer port number
b77c2c064 Add optional opm image argument to chart template
b04906462 Update OLM Deployment template
a85c6423c feat: add GVK existence check for OLM supported resources by querying discovery in case of 404 not found errors when applying installplan steps.
6eb4891e5 type(sub): Add ResolutionFailed condition type for subscription (#138)
aa687ed16 Update olm and catalog deployment templates
327d2471a Temporarily use controller-runtime fork with data race patch.
a18a15545 remove unused scripts
56a5579e3 fix(openshift): handle unquoted short max versions
cf30b9f75 Use metadata-only watches when possible for Operator component APIs.
62bd80fe3 Update extractMessage func
0a118aa92 improve tests
0a07b4624 Add list subcommands for packages, channels, and bundles
c23e5ec56 add a resolver test for completely disjoint graphs within a channel
92abe27ba feat(sub): Include IP failure condition message in sub status condition
d8e537ed3 Don't cache copied CSVs in the controller-runtime-based controllers.
9951b9553 Fix ClusterOperator selector for excluding copied CSVs.
aad1cb2f0 Correctly omit skipped channel entries during resolution.
7d0d57246 Explain unique replaces chain requirement in channel sort errors.
e95915d80 Update test-scripts check to use go1.16
ba29f0fa0 Regenerate mocks
3626e03b2 Bump operator-registry to v1.17.5
83eb1ce14 Enable gzip compression when unpacking bundles to ConfigMap
cb9cb9fc7 Add a catalog-operator flag to set opmImage
0d1d1f22a Remove unused trace log from LegacySyncHandler.
0745028cb Use one HTTP server for healthz, metrics, and profiling.
1529be474 Translate legacy "bundle dependencies" to properties.
1e5aef296 move DC opm commands out of alpha
246e0ce81 Remove pin of etcd and grpc (resolved in etcd v3.5.0).
a0c78850a declcfg: improve and fix model tests to eliminate possibility of false negatives
1dc76f08e Merge pull request #99 from timflannagan/packageserver-csv
f465cc354 cmd,pkg: Filter out non-PackageServer CSV resources at the cache level
1389cc834 pkg,scripts: Fix quoting around the release annotations key value
d7ef83204 manifests,scripts: Fix environment variable not being evaluated
40c7a64c7 pkg,scripts: Re-add the release annotations and default values in the PackageServer CSV resource
41cdf6323 manifests: Update manifests after modifying manifest generation script
9708bdda7 scripts: Update the manifest generation script
a95a2d226 Makefile,Dockerfile: Add the package-server-manager binary to OLM container image
91496b668 cmd,pkg: Introduce a secondary-level controller that manages the PackageServer CSV
490b91128 manifests: Remove the PackageServer CSV YAML manifest
f105c2f5d go.*,vendor: Update the o/api, k8s, and controller-runtime dependencies
8740cee32 Merge pull request #116 from timflannagan/rebase-master-bluddy-main
6c75da9ca OWNERS: Add additional reviewers
94234302f Create OWNERS
23c71d219 Fix release manifest generation and regenerate manifests.
1f8f81035 Bump root module to Go 1.16, tidy, and vendor.
dae62e798 Add grpc-health-probe to cmds (part of registry image build).
8c2e98ae1 Build cpb directly from staging.
2797a1bc0 Fixes to CRD v1 compatibility in tests.
145c9df74 Fix endless loop
4559b89fd fix: update e2e test CRDs to use v1 structural schemas
625fd6f8c bump VPA crd to v1; use new embed directive in vpa e2e test
1d3f32990 fix: remove v1beta1 CRDs from all e2e tests; add deprecation e2e tests
0c5cc08cf don't watch unlabelled secrets in the operator controller
21973f1d8 Fix error check for list operatorgroup call
43299f840 Vendor api v0.10.1 and regen code and manifests
0bdf52d9a feat(og): Project OperatorGroup errors to status conditions
3461fb97a feat(render): render sqlite database files
dc800e161 model: fix test for ReplacesNotInChannel
e4d6a3101 Add a label to secrets managed by OLM, and don't watch secrets that omit the label.
fcdd8831f declcfg: validation should allow non-existent replaces value
bc1b56e50 feat: bump k8s.io/* components to v0.22.0-beta.0
4bb90c822 doc/design: Fix broken milestone link in the release.md
b67943920 remove cleanup from startup
a49736922 doc/design: Add a version prefix to the release tag in release.md
6d4870098 Cleanup residual appregistry-server image references
b05e7f74a Bump OLM to v0.18.3
4de6a5b95 (fix)InstallPlan: Do not tranisition IP to failed on OG/SA failure
056e101b9 add storage spec to scorecard config (#135)
06dff04e8 Add conditions array to OperatorGroup v1 status (#133)
65673206b Add validation to CSV name length (#134)
4d9061009 Add UID Optional field to scorecard config types (#110)
6dd3f7078 feat: update the channel nammming conv (#129)
03b6e7e51 chore: bump k8s to 1.21 (#130)
7dc6cb5ce Fixed CSV deployments label field doc
929df256b Add an option to store Gzip-encoded bundle data in ConfigMaps
2f8ddb603 remove testdata index.db (generate it instead)
3871c6ab0 add defer statements to close rows and db
05aca3841 Query related_image table when rendering DC from sqlite
d03380e06 bump kind to 0.11.1, print bundle unpack pod logs in e2e test
a44654cc5 (fix)registry: fix configmap registry server liveness probe timeouts
5bbc8b894 ignore recursive self referential suberrors
777620be8 fix formatting issue for empty leaf suberrors
8d98b256f use filesystem instead of directory path string, other minor improvements
da01c7232 declcfg validation: output errors as tree
6ea414b45 declcfg: validation should allow non-existent replaces value
79ea08c06 remove path checks from deprecate
8952c05ef Resolve InstallPlanStepAppliedWithWarnings alert after some time.
ab4b3509d install.sh should not abort if openshift olm is not installed
a2dd2b9c2 check presence of all bundles before deprecate
e982c882d improve code coverage
0e4024e38 change LoadFS argument name back to root
21c772dfd declcfg: change LoadDir to LoadFS
817d4ede7 Registry ensure methods error out if resource is not found
ef9b01826 Resurrect deleted metrics Service templates.
c42124c1b Remove travis build badge from README.md
8235f338c improve code coverage
681e5d07f Add support for .indexignore files in DC dirs
e8cfebf3d feat(bundle): consume explicit properties
4d814222f Address various issues with OperatorCondition codebase
167137831 Update OperatorCondition Role and e2e test case
44ded2699 Add OperatorCondition status sync and update operator upgradeable check
b67b3e161 Fix Template Annotations on Webhooks/API Service CSVs
559e733f6 Bump OLM version to 0.18.2
bcfba8b4a Check for conflicting install
bc194d2c1 fix example bundle dockerfile
9552d455c improve code coverage
cb60b277e Remove `opm alpha add`, `declcfg.WriteDir`, and related now-unused code/tests
cc1be30fe Surface API server warnings when applying plan steps.
4d6169ce4 Bump kind dependency to v0.11.1.
442fcd003 Fix verify target
aba268ae5 Fix nil pointer dereference while reporting bundle unpack status.
793ffb31a Introduce verify github action (#127)
5229f0fde Update generated deepcopy (#128)
17423d53c address review comments
83e793a9f Regen go-bindata for crd changes for OperatorCondition (#125)
b56cd6d61 Add `opm alpha init/render` commands.
4a4b236ab Add draft release info to opm release doc
728fe6a14 fix(sqlite): upsert deprecation table entries
fb14c70e9 Update 0000_50_olm_17-upstream-operators.catalogsource.yaml
46dab665e community-validator: improve msgs raised (#124)
2758fc261 Add polling interval for default catalogsource
b4feafd90 Add ConditionType to v2 api (#123)
34c4e15b9 Add conditions array to OperatorCondition's spec (#119)
96d494863 Update OWNERS (#121)
2c7ca5c58 additionals and improvements to dealing with deprecated API(s) (#120)
ac555acce fix(containerd): drop xattrs during unpack
18ca6d0a9 Remove component adoption labels before initial CSV copy.
260261946 Explicitly set `readOnlyRootFilesystem: false` on created registry pods.
9d79329a1 Filter secret names for registry pod's sa
a18d45953 test(sqlite): ensure tolerant bundle removal
2f16427ea fix: elide channels with deprecated bundle heads
be89f91ff Make ClusterOperator Available condition sticky.
76dfca71a fix race in test with mockRepo/mockBlobStore
c495b766c use snake case for catalogsource_ready metric
e278d003c Call cleanup sync.Once.Do
fc416f754 consistently use latest go1.16 in all workflows
3162de6ba feat(metrics): Emit metrics for CatalogSource state
a877d40f7 deploy/charts: Any monitoring configuration for the PrometheusRule/ServiceMonitor resources
9a7103a72 deploy/chart: Remove any OCP-related helm chart conditionals
063cace09 Remove the deploy/ocp directory
e2a220b11 Makefile: Remove references to the internal ART team
0c8e70b91 Makefile,scripts: Remove references to handling OCP helm charts/manifests
0812d1567 Add eventually to e2e test crud operations
bed4e3617 Add unit test for varying job timeout
e401c7691 Add unit tests for UnpackBundle
843a0c70c Parse timeout annotation before UnpackBundle()
e13938b97 installplan e2e test fixes
070268778 Add annotation to override default timeout
f41a3d389 Check for bundle unpack failure via status conditions
4c132b124 Cleanup e2e tests and add case for invalid bundle image
a454c1be1 Fail InstallPlan on bundle unpack timeout
864ad064c update readme to link to olm docs
28883598f Fix for resolution error on channels with deprecated inner entries.
4c43a0db1 Simplify deployment status check to reduce flapping.
ac935726e doc/design,Makefile: Remove references to root manifest directory
c5a18bacf Remove the root list of YAML manifests stored in manifests/
22686cfb0 pinning apiserver for delegated authentication watch request bug fix
23aeccc97 fix(packageserver): add tolerant delegating auth config
93b0f7b1e add SetEscapeHTML method to declcfg yamlEncoder
0ca2008a7 always write yaml start separator
5140b438b improve test coverage in internal/declcfg
51c2bee14 revert WriteDir to use JSON, but keep WriteYAML support
8edc6b1d2 Set yaml.NewYAMLOrJSONDecoder buffer size to 4096
cdb386159 Support and default to YAML formatting for declarative config
1b4115e48 fix(deprecated): don't verify deprecated replaces
bf53a57fa pkg/validation: set v1 and v1beta1 CRD defaults using the correct function
c9ccd5317 Annotate CRDs that are installed alongside CSVs.
2eb5deb4c fix(deprecated): add sqlite table and migration
cb99b9e2a Improve load func error handling to expose more information
b600ecfd5 Revert "Test for bundlepaths before deprecate"
e3de97a06 Remove OpenShift-specific Dockerfiles.
92d8ada89 Set reason/message for Available condition in packageserver co
b61df977a .github/workflows: Add the unit and verify workflows
266d9e291 Add -kind.verbosity provisioner option and reduce default verbosity.
f5881c0df v0.18.1 release
cbf398c9e Fix mishandling of log format strings in Kind test provisioner.
c67cf05c8 .github/workflows: Enable GH action that retests failed workflows
a0e7b1f45 bump kube-openapi to get validation fix
a1a7940e0 add unit test showing cr validation bug
1320da45f v0.18.1 version bump
6613a5042 fix(bundles): symlink cp at expected path
5b1c56525 revert api signatures
0d8f2542e check presence of all bundles before deprecate
61e76c4cd .github/workflows: Remove the e2e-minikube action job
f62f1b4f3 .github/workflows: Add action that emulates tide commands
507752940 Use DeploymentAvailable instead of custom test for CSV status.
5dbc27b04 Bump ginkgo to v1.16.1 and gomega to v1.11.0.
1f48edc02 Move config serve and validate to opm alpha
8105826d1 Add optional go-apidiff test to CI
8bb7f1b31 Force latest install of podman to fix currently broken e2e tests
58439d47e changelog for v0.18.0 release
67b3f1412 v0.18.0 OLM release
b23f0cf57 Delete operator-lifecycle-manager.Dockerfile
43cb5c042 Bug 1952238: Report catalog pod termination logs to catalog operator on exit
cfcb62ad0 replace dockerhub images on the upstream dockerfile
ebdc14c13 (bug) add after deprecation
fc7d1d8b4 bump OLM version to 0.18.0
c0c4ecef7 Add unit test to verify resolver error handling for sync namespace
88e89fb64 fix(catalog): Reduce namespace resync in resolution failure
f684b8e2f Add retries when pulling images
138139926 Fix panic due to empty version in the ClusterOperator controller.
01549abe5 Fix resolution error if inner entry doesn't provide a required API.
19ef710b0 fix(openshift): prevent race condition in the clusteroperator controller
ff84b85e2 refactor(openshift): use a label selector to filter copied csvs
25b301670 refactor(openshift): use mutator interface directly
3723de2ba refactor(openshift): build skew message more efficiently
dedfd87dc refactor(openshift): don't rely on reflection as version predicate
a62b5294b test(openshift): use local timezone for timestamps
9714f2dc4 chore(modules): bump controller-runtime
b215ec29a feat: block openshift upgrades for incompatible operators
7fe6b78cb Replace codecov-action with vendored upload script.
c35e58db3 go.*,vendor: Bump the k8s dependencies to v1.20.6
035012090 go.*,vendor: Bump the k8s dependencies to v1.20.6
e4aea633e Update api version, vendor & enhance testing
f2cac5762 Add resource requests for bundle unpacker
d8acff403 .github/workflows: Fix error when installing podman
60f84a7d9 .github/workflows: Remove unneeded docker-env command
e40329f6a go.*: Update Go module version to 1.16
69e7b9126 rename k8s optional key for k8s-version (#111)
ec8fd6b0b fix merging envvars from subscription.config
f21660dae add failing test for merging envvars from subscription.config
8af1635cd test(sqlite): ensure annotation property validations
3b409194a deduplicate properties from different sources
fa5e33209 feat(sqlite): accept any property type
d9622bd82 Revert "set packageserver replicas to 1 for single node"
8638cc766 adding --enable-alpha feature flag
6eb4fec2f (feat) substitutes-for logic
fbc23fb5d Always validate CR upgrade compatibility.
0adcd5413 Add time-limited retries to InstallPlan execution.
ebd301563 (opm) move add from root to alpha
d816f2c62 Add tests and fix bugs for declcfg server
73db35eac Improve the declcfg and model validation
dc1759e14 feat(validate): Add opm validate cmd to validate config files
85dbd598e Delete the symbolically linked operator-registry.Dockerfile
c9a4ae5ce add/modify e2e and unit tests
ca3b54c01 enable tests on internal package
0fc84d8e7 introduce space between blocks of code # Please enter the commit message for your changes. Lines starting
7f08e8d02 rename getNoOfBundles to countBundles in model_test
52dab5ec6 unpack and remove bundle direcotires after creating registry bundle
da16481a9 use OnError to retry bundle pulling job
c9a5f8da4 feat(declarative-config): opm add creates declarative configs
9a009c1fd Bump github.com/operator-framework/api to v0.8.0.
45f46a1ec Copy all CatalogSource annotations to its Pod
2218d9e64 Remove more testify assertions
346ea7b00 Fix e2e test with incorrect gomega matcher and remove testify usage
6639326c3 Add .status.message and .status.startTime to InstallPlan. (#108)
3ac7baf1b Consider InstallPlan phase=Complete as terminal
6d0c894b4 Clarify status condition error message, and update architecture docs
f1fb6d5de Add e2e tests for installplan failed on invalid operatorgroups
51722db91 Indicate invalid OperatorGroup on InstallPlan status
97e9c8842 Give more precise reasons for Subscriptions with no candidates.
062a42928 go.*,vendor: Bump to k8s v0.20.4
829737ef9 add checks for operatorhub validator (#103)
e49b35527 add server for model.Model
13867a1a9 disown copied csvs
ec0560110 remove component labels when copying CSVs
aad84fdbe test that the operator api never adopts copied CSVs
d0b1a18d1 Preserve existing ServiceAccount owner references during installs.
24bb8bf1a update of api dependency to 0.7.1
468b7a4b6 bump api version to v0.7.1
c87cb8d48 use equalsDeclarativeConfig function in load_test.go
d574c2bb9 move newly introduced packages to internal
996ba15e9 declcfg_to_model.go: ensure package field and property align
4c5da9f6d pkg/(declcfg|property): PR review feedback
24e76ecf8 Avoid stuttering "mkdir <dir>" errors
6bae6a5ba feat(declarative config): add base packages
ff11b3635 .github: Separate the jobs in the test workflow into their own workflows
b9766f13b Update OWNERS (#107)
da28dd255 go.sum: Re-sync vendor dependencies
dd98dfc4f Update 0000_90_olm_01-prometheus-rule.yaml
779bc586c add CsvAbnornalReplacing alerts
dc9a25092 Bump test dependency on kind to v0.10.0.
e731b2c18 set packageserver replicas to 1 for single node
e5f917cd9 Dockerfile: Avoid hardcoding the kubebuilder version in the build root image
74cdc267e Fix inconsistent dependency candidate order.
7aa1ed5dc Allow to override download url in install.sh
d1b737042 remove appregistry-related tooling
e8d2a8e71 opm registry add: add --ca-file to add a PEM to the cert pool used by the command
0c6c0e6a9 Dockerfile: Add a symbolically linked release Dockerfile
b04bb16d8 pkg,test: Avoid setting metadata.GracePeriodSeconds to zero seconds
c85802a6f Update the template of PRs
c2c72f01d go.*,vendor: Bump module Go version to 1.16
7b7bbe65a Dockerfile: Use Go 1.16 image tags
68089a824 Dockerfile: Add a symbolically linked release Dockerfile
fddf59338 test/e2e: Disable the bundle unpack opm e2e tests
bc1ae68c4 .github,Makefile: Add linting check against Golang packages
11e465220 *.go: Commit changes after running 'make lint' locally
f81b5ef6c test: patch existing CSV for a hotfix
db3d584af Update editverbs and Make the instruction clearer
a6b214075 Set labels for the operator Deployment created via the ClusterServiceVersion
cd1c5f8bf Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/e3b61ff1dde2bfc2bc7f2b5efdd155d1d3299cd7/images/operator-lifecycle-manager.yml
154810eea test/e2e: Remove duplicate package imports
7ae79f13d bump to Go 1.16
45683368a test/e2e: Capture stderr output when checking for docker and podman
55eb49d81 test/e2e: Fix output log message when Podman is not found
c82343867 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/e3b61ff1dde2bfc2bc7f2b5efdd155d1d3299cd7/images/operator-registry.yml
15a28d424 go.sum: Run 'make vendor' locally
40d8800ef tools.go,vendor: Remove trailing slash in github.com/go-bindata/go-bindata module
88274df70 Add optional go-apidiff test to CI
ca77a30e7 Add skips & relatedImages to CSV Spec
b541208ae doc: moving channel naming doc to website
641e7a672 Bump github.com/operator-framework/api dependency to v0.7.0.
f01584a99 fix: add lifecycle/frozen tag to exempt list to stalebot closing certain issues
916683b54 Remove package msodbcsql17 during e2e tests
6b082c7c5 Bump all Go binary builds to 1.15
7be30c83c Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/5a1293dd0f380abf50c12d65c36655486d7745d0/images/operator-lifecycle-manager.yml
a0805419f Support jittering relatively small resync intervals.
3d8c55bd4 feat: add cleanup phase; fixup cleanup api
44fd10578 don't change CSV phase on service unavailable error
f099052d1 Gracefully handle service unavailable errors from kube-apiserver
616ff1a37 Allow non-CSV-owned ServiceAccounts to satisfy CSV requirements.
4585a8d4b Use reflect IsZero() method for checking zero values
b5e404062 Add API for cleanup spec and status
11e774d2c Expand validation to annotations
862e31227 only override deployment resources when explicitly defined in subscription.spec.config
a00af2d07 README: Address markdown violations
55b8f4cf0 go.*,vendor: Update vendorered dependencies
7e5579949 Makefile: Add the tidy and verify subcommands to the vendor target
d02da0afe cmd,pkg: Deflate unnecessary conditionals
8f1266cf1 OWNERS: Update the owner file
1173b459a Infer package name property for unannotated CSVs, if possible.
ef8def4ca pkg/operators/v1alpha1/subscription_types.go: make config and resources structs optional via pointer
139232eff test/e2e: Revert disable Podman-related e2e tests
44d597863 .github: Fix Podman installation steps
fcfbe36ba Additional changes based on feedback
366dbe22c Changes based on PR feedback:
033c9ebc6 update makefile, workflow, and docs
c5f114658 pkg/controller/operators/operator_controller_test.go: fix flaky test
3943cfb40 test(e2e): add bundle unpack test cases
8c8d1d4f2 chore(lib): reduce log noise from image registry test facet
aaec691ce refactor(opm): export root cmd
3b1b713ca style(logs): reduce info log noise
3132dc1f2 feat(opm): add alpha bundle unpack command
29777953b upgrade to use go 1.15
26f354450 Add details for starting a local server to README
13c7ffb24 doc: clarifies opm usage and what tool can help with bundles
76e40142b Deprecate initializer and registry-server
83d19536a fix: add apt-get-upgrade to ci script, skip podman-based tests until fix is identified
932b6e3aa Specify cluster name when there is only one cluster in kind
a25dcd2e8 Enable debug messgaes via klog
263f485fd Annotate manifests for single-node-developer cluster profile
48ec5419f Don't create default ServiceAccounts
82c261b55 bump to go 1.15
7095864ed Update release.md with milestone step
8ef6f5f04 update development document to add more informations for the e2e environments
30b2627fe chore(adoption): use debug level to log missing components
9f853662c add missing closes
d4accff88 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/a74468426e8d0524b2fca64bbbcda77afef25b80/images/operator-registry.yml
eaf24068d docs/design: Remove all references to the bundle alpha opm commands
2da4d80f4 docs/design: Minor documentation fixes
e655c312f Fix typo in deprecate+truncate command help
811d94bc5 .github: Use the pre-installed Podman dependency
61838426f fix(resolver): Allow skipped versions to be installed initially
e143c928e Fix typo in docs
73af1b0d5 support multiple subscriptions resolving the same bundles
481ace0e5 add package property to unit test cases
04baa720a collapse resolver tests
bcba38ca5 Add meaningful string representations for resolution invariants.
7b1d7c443 Correct timflannagan GH ID on ownerfile
48c4d5f76 Update OWNERS file
2baf7110b Fix upstream example dockerfile
b14f6445c Various from PR comments
ccf62da0e fix(index): add build id ordering to channel head selection
53f9e5d60 test(e2e): make index add regression test pluggable
d7a06e9b1 (e2e) regression check with existing catalogs
17be23411 Fix OperatorGroup Documentation Example
82208735b bump k8s.io/apiserver for webhook auth panic fix
12d8f6087 Clarify subscription constraint strings in resolution failures.
7f96a43d0 fix: use none driver without sudo in upstream minikube e2e tests
fa7e4ae16 fix e2e test order
27fda6b2d Address comments from PR review: added e2e, improve unit
7e6df5b5f operator_controller_test.go: use JustBeforeEach to ensure correct test setup order
494108d49 Only re-create operator resource if it has existing components
d23ea4600 Add unit tests for Operator controller deletion handling.
6c6fb2899 Fix time comparison in CSV reconcile loop
edc880a4c Fix zero-delay resyncs for certain registry update policies.
a70ff7077 Use docker driver for minikube installation test.
e29631dea add shorName for operatorcondition
707d3f3cc fix error on missing icon
afc259b0c fix: improve stalebot configuration for github issue tracking
0e2b21d73 feat: use secure local registry for e2e tests
ff436d69e Fix infinite loop when a CSV replacement chain contains a cycle.
07f0ac6fa remove stranded bundles when packages are pruned
735ee792f ensure foreign keys are always enabled
06e1e2a4d RELEASE.md: add release guide
5aee47837 chore: bump c-r to 0.8.0
5285b1a00 Update shields
632899a01 Bug 1909992: Allow private bundle images within private indexes
5efeced30 Update OperatorCondition controller to watch deps
5b1df68a3 fix: create installplan directly in e2e test
f77b94158 fix: use OLM client when installing CRDs
ce1b12b52 fix: load required docker images for kind cluster in ci e2e test
ba696f755 Add joelanford to OWNERS as reviewer
8a8c81973 Create CSV Deployments with OpCond EnvVar
bd07f8ee4 Fix operatorcondition role verbs
c5b60fc76 Updating Dockerfile baseimages to match ocp-build-data config
6e2197ef6 fix: update moby/term dependency due to undefined: unix.SYS_IOCTL on macOS error when running locally
5b3b80ee2 Use correct caBundle for 'olmcahash' annotation
fb76eec77 Update /manifests with default cluster profile annotation
7a8ee9480 Add the release annotation to all documents in all files
2e03006a4 Change the "OperatorUpgradeable" condition to "Upgradeable"
5d5c64d73 Multiple operatorconditions should not update the same deployment
94359f6e3 CSV Annotations override pod annotations
c161839b3 Reduce e2e test failure rate
4de7d447f Fix windows build with golang 1.15
d58361049 Update manifests
d59dedc94 Fix manager start commands
0053fea4e fix zap logger
da304188e Fix controllers and run codegen
764b474dd Update semver import and update SSA
9a1c2a17e bump k8s deps
11056a829 Rename OperatorUpgradeable condition
669446027 Bump k8s to 1.20
c8515dfc7 Remove operatorCondition lastTransitionTime
0285acc3a Bump yq dependency to v3
f0194d13c deps: bump k8s deps to v1.20
f99f433ed Bump controller-runtime to 0.7.0
324003da5 feat: move upstream tests from travisCI
6838951ab cleanup formatting
5aa8734f1 initial channel naming doc and related images
f94e87c08 fix(olm): Verify ServiceAccount ownership before installing deployment
93be770da Don't create OperatorConditions for copied CSVs
b03509597 Reduce log noise from OLM
7a20b814e Update go version to 1.15
059877eb8 Preserve original .status.lastUpdateTime in copied CSVs.
13753d676 fix(e2e): Fix subscription manual approval flaky test
fcc5fd1c8 Add OLM support for the Upgradeable OperatorCondition
af0f41914 Avoid duplicate registry binaries across downstream image layers.
8dcf48819 Disable broken ppc64le and s390x release builds.
89c288ed9 Change OperatorUpgradeable type to string and add utils func
325f42b01 revert the change for e2e test
488b082c8 format the import order
d0820446a Only check the owner of the service account if the service account has owner
9da07b24f update e2e test
768fd9e65 check the service account owner in the requirement  check
2c267134a Introduce OperatorConditions
c3fee72a0 update manifests
a1ddc4487 Add authentication for private index images
87107d326 Support InstallPlan steps upgrading existing ClusterIP Services.
6d779af35 fix: remove extra test output
42670177d fix(index): account for default channel in index add order
3c33a9606 Include the bundle image itself as a related image.
d3f6dd79b Add OperatorUpgradeable condition type to OperatorCondition api
cc2b7c1a5 Update OperatorConditionSpec
546ab4200 Add release annotation
6d6e033ae Bump yq from v2 to v3
fac7d135e fix(catalog): be defensive about directly indexing catalog pods
7f4070d4b feat: bump api dep to v0.3.22; add support for operatorhub and bundle object validation
e17260bb7 (fix) make operatorhub validation consistent with courier
d6f5336d1 Add OperatorCondition to the client schema
ef2af7725 Update github action setup-go to version 1.1.3
c9f5f4458 add default label to issues. add config file with upstream OLM contact information.
151dc90b4 Using subscription reconciliation to clean installplan status instead
b3a1a0419 fix(indexing): respect strict mode
84dac3d16 fix(ip): Recreate pending installplan if deleted before approval
51c28582e copy .git directory for build tag info
dc0d980c1 fix(indexing): pick channel heads by semver
b41ee2c64 fix(indexing): order bulk add by version field
979806dd6 Introduce the OperatorCondition CRD
d1aac6955 fix the description of validation "RegistryV1" format
1d96b8e4e Add ConsoleYamlSamples to the supported resources
decf662ab Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/f82a216a6a3707b80a635bace9367f1a8288b7a7/images/operator-registry.yml
81cff1941 Generate code
8720918a1 Bump k8s dependencies to v0.19.3
25e0cbb07 Reconstruct replaces and skips for ListBundles from channel_entry.
b6684c289 add skippatch unit test
90975862d Bump k8s dependencies to v0.19.3
d55da101e Bump k8s dependencies to v0.19.3
19a41f8e0 Allow ConsoleYAMLSample resources from bundle manifests
20fc6ffe6 test(certs): add a test the ensures services do not get the same ownerref added twice
060718c64 test: scaffold a basic unit test for certresources
f6a331a49 chore: generate fakes with inline go:generate directives
0f182b191 Fix Go version used by release job to 1.14.z.
6f9738842 (fix) close connection to db
88c437768 fix the comment in package-server
f0812c733 Generate changelog for v0.17.0.
fd6cee1aa Replace assertions with Gomega's matcher library
ec6a7f61b Add unit test case to grpc and configmap reconciler test
a8d2e90b9 Add spec hash to service's label to ensure service is correct
769dc4188 Generate manifests for v0.17.0.
39d593c0b Bump version to 0.17.0.
a119a3fa4 Build upstream releases with Go 1.14 instead of 1.15.
54ce01380 Produce opm linux release binaries for ppc64le and s390x.
9c82927c3 Convert scoped_client_test to ginkgo
21b32d630 Add Github Actions release workflow.
77dc76369 Replace assertions to use Gomega's Matcher library
551710c0c Set default, min, and max values on Webhook ports
cb6b1d2af Completely populate test database before executing tests.
179e088f6 Remove unused file.
f8255e1ce Add coverage report job.
33f55c76a Set replaces in ListBundles query result using channel entries.
f356b0e8f Default containerPort to 443
57e9578e9 Set min and max values on Webhook Container Port
7dfdd7be7 Start listening on test server port before running tests.
4997cfb82 check prerelease version for semver-skippatch mode
0897133be feat: support custom categories via environmental variable
244aaf8ff fix(opm): properly deprecate export flag '-o'
c732109dd fix race in Operator reconciliation
7596881d7 Fix path separator in generated bundle Dockerfiles on Windows.
fe312f353 prevent no-op hotlooping on Operators
6f40c1a40 Add writable workdir to configmap registry image.
8a5966ec3 Fix test flake based on random aggregate error order.
60d2d4fe5 fix typo
7fd3d1c50 Update pkg/controller/registry/resolver/resolver.go
00513f578 update error logs for channel head querying
0dcdb4393 OLM mounts CA Certs where Kubebuilder expects
6c24a1f32 Make the inability to create /etc/nsswitch.conf non-fatal.
d25fe21a1 Improve transitionCSVState error logs
27ba9bdc9 fix typo in the error message
2c61ceb05 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/ac81dd4ff0bd57c4e75058d25b40615b92948259/images/operator-lifecycle-manager.yml
3d2cf4608 Retrieve CA from conversion webhooks for CA Hash
da043a289 fix: remove extraenous manifest assignment and update CRD stepper. Add e2e test to verify configmap-based manifests.
bef8c443c (fix) concurrent writes during image pulls
7677c9bc1 fix(dockerfile): clean out tmp directory after binaries are placed
ef2491b3a update the help info of the export subcommand
0c8f594f2 Add USER for non-root image usage
6c0a0d50d fix the comments of LabelDependency in the type definition
c57ff1627 OWNERS: add operator-sdk reviewers estroz, joelanford, jmrodri
645a16bfe LICENSE: add apache 2.0 license
7cbbcc6a0 fix: pass in bundle objects
c29c22ddd Apply suggestions from code review
4214b5b76 doc: add reporting bugs doc and small nit improvements in the README
168a521c7 Regenerate downstream InstallPlan CRD manifest.
b9007041b Annotate CSVs with the properties used during dependency resolution.
29b8930fc Bump operator-framework/api dependency to v0.3.16.
a35b39491 Enable default channel inference for the first bundle of the package
122b2bc9f Update upstream-builder.Dockerfile
72a18659f set group permissions on /tmp
5e0108fdb Bundle validation will not fail if default channel is not provided
e5f271bd3 feat: bundle object validation
0be88d2c3 (fix) bundle inference should not use skiprange
a44127257 Update index add func to handle optional default channel
8b61e24a8 The default channel info/annotation is optional & not required
a11896d41 (fix) erroring when replacement not found
b81f31383 fix(mockgen): use "go run" in all go:generate comments
086ae52a5 chore(modules): bump k8s deps to v0.18.9
fa2556e4e (fix) index add --overwrite-latest
95314797c Add a "properties" field to bundle lookups.
468c3c76d fix: update check from previous polling implementation
4dcec936a Make a subscription without at least one candidate fail resolution.
b21763379 Allow ConversionWebhooks to define targetPort
2e631d704 Bump operator-framework/api dependency
61df859c0 Add ConversionWebhook const
37ca92f33 Update CSV WebhookDescription struct
3a6af663a Add test to verify empty bundles in addition does not break
81af525f8 Updating Dockerfile baseimages to mach ocp-build-data config
04824ccbe Updating Dockerfile baseimages to mach ocp-build-data config
efd42bc92 (fix) csv name should not be constrained
686d3a407 should not compare if no imageID
a42167a9d doc: default polling
ff98a69a1 OLM should use valid CA certs if available
e4269e01a Parallelize opm index export
5eedba91b Use vanilla Alpine instead of Alpine+go for the registry image base.
1d2129a4b Use multi-stage build for registry image.
5c661c151 add cross build back
4b5509802 disable cross compilation while build issues are resolved
cc8755292 fix: update catalog pull policy to Always in case the image is not digest-based.
157b0484c fix(build): copy bins to a tmp directory first
2eb1f3d2d add workdir permissions back
f5ad42fb8 fix(operator): map top-level csv phase to component conditions
dc804f685 add correct polling interval based on modulus
a7d23bf42 fix: resync catalogs with jitter if polling enabled
d12d8fac6 test(install): expect revision history = 1
e34afec44 fix(bin): don't overwrite /bin
6eb8bdb36 Set RevisionHistoryLimit per Deployment
b21979282 fix: remove catalog update pod if it's in a failed state to prevent cycles in the catalog reconciler.
6dc415fa4 fix: requeue catalog source sync if update pod has not reported ready; remove duplicate pod immediately after imageID check; turn down polling logging
0e349b031 Handle mutliple skips and add unit test
92702cdb3 Add skips information to Operator representation
bff757fad Genereate 0.16.1 changelog
360e63d99 Release: Generate Manifests
78887a8e8 Bump OLM Version to 0.16.1
470b5332f add mac and windows binaries to the amd64 build
34cb22d2a [typo] fixing typo in deprecatetruncate command
21f4a58df Update OWNERS
019bb4f17 Update OWNERS
ac0912068 Update OWNERS
4ae40219b Updating Dockerfile baseimages to mach ocp-build-data config
d1d830210 Updating Dockerfile baseimages to mach ocp-build-data config
946761b44 Move server side apply patch code to library, use ssa to update catalog source pods
ec857b743 Update Owners file
51d3a32ee Fix install plan creation for subscriptions that omit channel.
32ca0cdf7 Bug 1861605: Update manifests to include the bug fix
9e0f1375e Bug: Fix nodeSelector subscription config override
eef955cbc set default for flag --skip-tls=false
911539782 extend skipTLS option to podman
7f7dbdfa2 skip TLS option for pulling indexes
ae7d9120a fix: add dashes to semver range example
0c5049015 Fix typos
8bde9e6b7 Remove label dependency from bundle docs.
a816903e9 Return empty properties and dependencies in ListBundles responses.
3774ef812 rebased
ccd715c54 Fix stale content in configmap due to stale bundle image in the node
90752efa1 fix(operator): re-adopt manually disowned crds
4fbd74dec Add Total Test Number to report
de74109b1 Bug: Fix SubscriptionConfig NodeSelector field
6a0274b09 Bug Clean up stranded bundles
f5e963450 Bug 1861605: Reduce length of explanation of status of Operator resource
851e6372c Bug 1861605: Reduce length of explanation of status of Operator resource
0bb7fbb26 Approval: Clarify possible values
dc85a9fca [docs] Update out of date compile step
1e0277f22 Add Catalog Source priority for dependency resolution
1881123f0 Vendor registry 1.13.6 and fix unit test
42aebb4f1 feat(resolver): filtering deprecated bundles in resolver
d75bf5b5a Add unit test to resolver for label dependency
5acd71446 Vendor the registry changes for label dependency constraint
f9beec09c feat(resolver): Add label dependency type to new resolver
72242c1e7 test(e2e): pass ip test w/ created or present steps
6888cfaf6 feat(operator): adopt referenced installplans
e979fe72d remove legacy resolver
0a16d8810 Remove spurious check for duplicate operators in resolver.
9058508ba Addressed review comments
bb0a0f6cf WIP: Add Conversion Webhook support for OLM
b5fb6addb feat(registry): add graceful shutdown to grpc server
64105c14e fix(query): return bundles in all channels
e9c56be94 Remove unneeded toleration from catalog source pod
8a4e5c0cc change default catalog to index image
d07eb3000 chore(vendor): include v1 operator api version bump
ccd092a6f feat(operators): reconcile v1 operator resources
5a84ea9f1 chore(manifests): add v1 operator crd spec
1a787a400 chore(codegen): drop v2alpha1 clients/listers/informers, add v1
17681e567 chore(scripts): drop v2alpha1 from codegen
a9fb39fa3 chore(modules): bump api dep to include the v1 operator spec
ad0f19536 Add OWNERS to the repo
c5a823429 remove scheme-related variables and scorecard output coloring
91288de53 pkg/apis: add scorecard v1alpha3 API
ac6994ec7 fix(codegen): add doc.go in operators/v1 to support informer-gen
5e62dafb8 Remove unnecessary ENV directives from base.Dockerfile.
e99d787a8 Remove sanity check from `make all`
783aefd1f Add sanity test for opm registry serve
1ed1a96c0 Add timeout to opm serve
136c18a16 Update label property extraction from CSV
bff982857 feat(registry): Add label dependency constraint and property
d003cf1d0 Adding deprecated property type to bundles
cb6f21038 fix(validation): Remove default channel validation from bundle lib
63cce5ae6 Add installMode validation check for Singleton Operator conversion webhook support
8d7b00722 feat(operators): move type to v1 from v2alpha1
d2f0ea29a configure metrics for new resolver
c28661f79 check for cache consistency issues when querying for a dependency
192d912ff look in all catalogs when no catalog specified
49e86eb54 emit events when resolution fails
bdd657c08 fallback to standard path for kubebuilder assets
46336752b fix catalog grpc connection state updates
1d166e551 don't include docker image in the docker build test for kind test runs
3d694b8ad fix crd upgrade e2e test
7b09cff19 retry for flakes
83df7b503 make catalog delete tests less flakey
8c7ba08e4 add a parity test for transferring api ownership between operators
e40737846 make catalog updates in tests less flakey
e3818f4eb update package anti-affinity test
230e372a0 properly handle solver invariants
78c6e5598 track existing CSVs without subscriptions as mandatory
c9d43d87b handle csvs that are already installed but don't have subscriptions
f7f1c8324 extract properties/dependencies from existing operators in the cluster
6dd346244 Fix check for whether or not a sub was added during resolution.
1957d2295 Prefer bundles from the default channel in resolution.
15b28d240 Try to detect kubebuilder installation path if not explicitly set.
d266a043b Regenerate registry client test fake.
84be8a7db Bump operator-registry dependency to v1.13.3.
eb1a04e90 deduplicate input installables
7645e4dac expire cache when grpc connection is READY
831775936 fix sorting of inputs for dependencies
1860af04c enable new resolver by default
7a8fe42ca prefer the same catalog for dependencies
57393d6b5 fix resolver bugs, fix cache race, and re-enable tests
25ea8f9d7 fix nested dependency resolution
994a99dbf fix verify
67d71af7c feat: add parity tests to resolver
337404579 ensure cache is filled with content before marking it as not a miss
3c06499df renaming / refactoring
39ffac870 rename solve package
d9997fdca treat dependencies generically
2ed0cfd1f refactor dependency walking to avoid recursing
44d01f714 support skip list in bundles
182df8da0 support startingCSV
55b96e301 pin etcd and grpc
db629d470 split old/new resolver and tests
bcad82a53 test updating to a package with skiprange that is not head
6eada4168 search for operators in catalog order
d7babec9f move csvname filter to a predicate when finding bundles in the cache
884c46a9a use cardinality-based AtMost constraint
4bb534d06 resolver can resolve updates
6773de588 chore(deps): bump operator-registry
96affef98 don't mark virtual package nodes visited
fe4783f25 Decouple filter predicates from the operator cache itself.
f3990cc8f memoize bundle walking
330eb5cf3 support semver ranges
33d513011 use new solver interface in satresolver
615acdeb3 Adapt resolver unit tests to run with both implementations.
86de75273 Fix unit tests and add GVK dependencies extraction
f530effb4 Strip plural from APISets in resolver cache
9387be67a Extract dependencies info from bundle and add to Operator object
a1a1a06bc (feat): Add sat resolver for version dependencies
ba343e0bd fix(install): account for installplans when calculating generation
9af80c094 [metrics] Dependency resolution metrics
4d366b0f2 Added .spec.priority field on catalog source
31bd7cf90 fix(query): list bundles would elide all but one property
a1a738e85 Add busybox-dependencies-index image manifests
c135637d3 Add conversionCrds field to WebhookDescriptions
c9373188c Add additional logs to syncCatalogSources
0eae770a7 fix(e2e): pass build tags to e2e
7752f02ed fix(dockerfile): remove unneeded static dependencies
4f1e14251 Bug: Fix incorrect deployment annotations
78eec1b59 fix(installplans): GC older installplans
cb19971fc Remove nonexistent group from Dockerfile
9547d6da7 Embed version at link time based on git tags instead of a file.
3fc237a52 Require csv spec.Version to be set for operatorhub
097257259 Add flake analyzer
068c5c6b6 fix: explicitly delete collection of catalog source pods in grpc e2e test
a058b02ff Add GetPackage to the client interface.
31aa9d2b7 Update OPM_VERSION
530d21cef Update the e2e test case
54ff40064 fix(resolver): Exclude all installed packages in dependency search
70b28137b Omit (hopefully) redundant yum update from downstream builder stage.
69ecef260 Fix UpdateSingleExistingCRDOwner test case
3872318fd Fix validate CRD compatibility check and deprecated CRD test case
5bfbcf4cb Return an error when solver input contains duplicate identifiers.
6864de30c fix: use server-side apply in crd e2e test when changing the subscription to point to a new channel to avoid transient object modified errors
689a8eb5d Refactor solver preference searching.
e3f56352c Updating based on feedback
dbab66ca8 Bug 1855088: generate unique role and binding names When same permission rules are defined for different ServiceAccounts, OLM would generate same name for (Cluster)Role and (Cluster)RoleBinding related to this rules. This change should ensure that unique names are generated, taking into account ServiceAccount name and CSV Name and CSV namespace (for ClusterRole)
772f603d8 Bug 1855088: generate unique (Cluster)RoleBinding names
ee5da016a fix: remove bundle e2e skip
57d58cdea fix: Use PR head commit in artifact naming instead of merge commit
31375e585 fix(metrics): query cache found object count metrics
e2f65700e Setting resource to plural in relatedObjects
f1c227a6b test(e2e): delete all subs, installplans, catalogs, and csvs in test teardown
7e80746bc fix(e2e): make problematic test specs eventual
fda6d7a4a fix(e2e): copy rest config from test ctx
14d0618e0 fix(csv): prevent duplicate service ownerrefs
18d6a8e02 feat(operator): automatically adopt generated resources
af199f79d fixing up to return exit codes
2cb8d1e16 Changed address for readiness probe and liveness probe on registry-server
079a5b156 fix: install VPA CRD directly on clusterfor bundle e2e test.
5f0093093 Adding sanity check and error message for inserting the same bundle
a0ecedab3 Updating: adding sanity checks before insert into index
fc5e1f301 fix(containerd): always [also] pull layers from linux/amd64
c1f261542 fix(validate): pull bundle images before unpacking
15a3cdaaa test(e2e): skip bundle cr install test
45feebf6f Use go env to get architecture for building
6a35e8e67 fix: add installplan check after subscription status check for gc tests. this will help reduce the e2e test flakiness as resources were sometimes checked before the installplan completed.
605ab3a58 Add Label field in StrategyDeploymentSpec
dc451bd4b fix(build): don't set -race when testing on s390x
a79b14ea6 feat(api): add skips/replaces to listbundles api
75747a16f fix: checkinstallplan status in bundle e2e test
7b2414489 fix: add kubebuilder to development requirements
b5d5ad0fd fix: broken link in PR template
54fbe6c3e Add an AtMost cardinality constraint to the solver package.
513b7692f Retry update in flaky test of CSV w/owned API Service.
54783684e refactor(solver): small naming changes and iterative search
993ee6b8d pkg/lib/bundle/generate.go: add JSON tag to AnnotationMetadata
e0db8e7aa Introduce preference order for solver.
ec56ad20a Bump GRPC version
52c0daeaf feat(release): add builds for s390x and ppc64le
753a5befa fix(opm): refactor indexer
b941ade64 Use /. as the directory root to copy from.
e059c5169 feat(deps): nest dependency values
4d2c6f0c3 Add workflow to save e2e test artifacts
837dc61a1 feat: support new bundle object types: priorityclass, pdb, and vpa objects are now resolved from the bundle by OLM.
39f1516cc test(e2e): patch installplans w/ server-side apply
ea09a5de0 feat(store): store provided apis and package info as generic properties
9b44e17eb fix(docker): build grpc probe outside of gopath
59e6e640a Update OPM_VERSION
21586e294 Separate build/pull tool for index rm
36e7c25a2 feat: add design docs for including additional objects in bundles
8007c0a70 Bug 1822396: Update metric when Subscription is updated
af4220200 feat: add pdb, vpa, and priorityclass object support to registry
2d7f37c31 (fix) Update to go 1.14
bdbbb1ab7 Update OPM version to 1.12.6
f71745996 chore(deps): bump containerd
ee0184cda fix: update README to point to the OLM book website instead of github repository
d1e86c8fb Add more precise matching to the metric end-to-end tests.
f011476a5 Update ocp manifests with latest template
cd14be584 Remove failfast from operator e2e test
51be87a6e Fix a flaky CRD test.
e5aafa2b2 Replace assertions within async assertions.
4922e6a10 Disable parallel e2e-local runs by default.
03f574cac bump olm version to 0.16.0
7ebea2fd6 Add operatorhub validation
98a747d0b fix(installplan): don't store the manifest contents on the installplan
01366b6dd (fix) Actually validate csv fields
c2351f888 fix(crd): Fix CRD validation falsely error on unused CRD versions
fb747a938 Bug 1822396: Delete subscription metric when an operator is uninstalled
d1f76ebd6 Bug 1847540: resolve only default channels
e08860c65 Add BugZilla component to OWNERS file
41c23a17b test(server): wait for connection to go healthy before running tests
389929591 Fix broken link to CONTRIBUTING.md
4947764eb pkg/lib/bundle/generate.go: ValidateAnnotations does not compare number of annotations in existing vs expected so arbitrary annotations can be added to annotations.yaml
53873646e beta.kubernetes.io/os deprecated since v1.14, removed in v1.19
799b23560 fix(package-server): get icons from default channel
59bfb459d doc: add CONTRIBUTING.md
5c4db409d chore(modules): bump api dep to v0.3.7
112d8a6f3 fix(copy): make tmpdir relative to current directory
300881afb fix(images): use docker/podman create and cp for exec unpacking
bb6d23e0b chore(crds): regenerate manifests to drop status
318728664 chore(make): drop generated crd manifest status
d551f752c chore(make): rename yq var
0ed21428d Update OWNERS
368b298a9 The api repo is now pinned to the latest commit which contains bugfix https://github.com/operator-framework/api/pull/39. This update also removes the bou.ke/monkey dependency that has a very restrictive license.
7bf9f1d5d Modify prow ci logging for e2e tests
ed140c71a feat: add uninstall
bb33e2451 Changelog for 0.15.1
4914787af Update grpc-health-probe version
f304d2ab6 [e2e] Fix opm test
cb54b5ba4 validation: bundle CRDs are compared by definition key instead of name
bb93d81f8 Add test for release installation instructions.
0dfd78134 Remove CRD manifests from 0.15.1 quickstart's olm.yaml.
186d25e1f Preserve .crd.yaml suffix for manifests copied from api.
87034d380 Don't put CRD manifests into olm.yaml.
e098dd067 Catch failed Ginkgo assertion in test goroutine.
7441b9ce3 Reduce install.sh flakiness.
84189d5ab Convert metrics_e2e_test to ginkgo
55e76d51a cleanup: delete duplicated import in olm
d6234be9b feat(resolver): don't build new clauses for weights
be95e235f add info over where the bundle files are or will be written
69b2ebe65 fix: add err check before defer
8b53b9833 chore: fixed a typo in bundle manifest format
1481b4d94 docs: remove typo from dependencies example
d9fdb9d99 feat: add OPM_VERSION notes to release docs
cf9e51091 Doc: Remove legacy webhook proposal
6f433623d fix: add check for storage version changes when installing CRDs. This prevents data loss when a CRD is upgraded and no longer supports existing stored versions of CRs on the cluster.
438fcd1bb fix(unpack): support unpacking readonly folders
b107cf050 pkg/manifests: return error if a bundle manifests dir has a subdir or hidden file
ac74d6004 fix(catalog): no operatorgroups in a namespace should be an error when resolving
0d0e77a06 Update PkgManifest upon catsrc update
cdaed1d40 pkg/manifests: use yaml decoder instead of unstructured to avoid conversion issues, and close all files
50cef154c Configure "podman build" to produce images with Docker manifests.
3a9f54f27 Fix delay when OLM applies label to Namespaces
ae23a0e48 opm bundle extract shouldn't validate annotations
597eba274 Add more comments on e2e test case to clarify test flow
01ce79c53 fix(server): make a copy of the db before migrating it
296568bed Address feedbacks on registry client interface
a47ce37ec Compose registry client & interface under a new interface
b531ac38f Add e2e test case to test multiple dependencies with same package
5b1aaa72f Update unit test cases to adapt to new changes in NamespaceSourceQuerier
291bd4c98 Edit test cases to work with new changes on NamespaceSourceQuerier
6d0b88590 Mockgen for registry client
b910d5e18 fix(resolver): don't pick operator from same package when resolve requiredAPI
ac1f2e5c0 fix(webhook): Wire ContainerPort to Webhook
925b4d514 Remove registry dependency
3e77564e6 fix(validation): Fix CRD v1beta int-float conversion error
07c7d7560 WebhookDesc should use containerPort field
5694cbbab fix: add ownerrefs to bundle objects; add e2e tests for bundle object gc
815da1c84 Manifests for OLM 0.15.1
ce80022d5 Bump OLM to 0.15.1
96e55d50b Deleting a CSV removes related CSV metrics
83510c270 Changelog for 0.15.0
27b597d66 Pod Config Deployment Hash Error
5c2bdcfd7 Manifests for OLM 0.15.0
2912b3932 Update scripts to include crds during release
dccdd506b Converted packagemanifest_e2e to ginkgo test
e0771b9d9 upstream-opm-builder.Dockerfile: don't install bash; sh is sufficient
3012ff6ef PackageManifests should include CSV Metadata
28e173ea2 fix(queues): requeue events against all-namespace queue if present
7ded3a39a Modify dynamic_resource_e2e_test to ginkgo
62d656e9f Update Webhook E2E Namespace Labels
d85d5ea3e upstream-opm-builder.Dockerfile: add bash and ca-certificates to runtime index image
ce0084039 feat: add build flags to opm to show version information
43b923e91 Adding error message for more than one CSV in bundle dir
5e262241d Convert gc_e2e to use ginkgo
ccb44f523 Detect WebhookDescription changes in CSVs
f4f1061fb feat(opm): add version command
496e6820c Make default channel optional
f5155ff43 Make default channel optional
48bbe2d08 Bump OLM version to 0.15.0
be5bab281 (fix) Admission Webhook names must be unique
6a6c3e9d2 Fix upstream.Dockerfile
bc0cc96bb Update OLM to use UID for OG Labels
ba44be8c4 Update CSV Validation
fede0f0e6 Update Webhook Installation Failure to be generic
a48013449 Update WebhookDescription struct
66c5f2ed2 fix(auth): use fixed containerd authorizer
d3c22d214 Move bundle validator back to registry under validation package
5276ae623 fix: use runtime.Object instead of interface for CRD return type
768e7d2b9 Remove Bundle validator from the validator list
a8c2049af validation: bundle CRDs are compared by definition key instead of name
46ae2d03f feat: add test for v1 CRDs in registry bundle
02a152557 feat: Enable v1 CRD validation in bundle library
8d507d50f feat: support loading v1 CRDs into index from a bundle
0e58e0d40 Split build and push command runners
e4f0814a4 (bug) Always overwrite local db when copying
03c562cfa Update OLM to use UID for OG Labels
2f95c9b37 Clarify log message to indicate that dependencies.yaml is optional.
7dce17776 *: bump to k8s v1.18
610df2273 refactor(crds): decode to v1 directly w/o conversions
eb7e00cf5 fix(types): Fix GetDependencies func that returns duplicate items
59bc8f83b fix: address sttts feedback
5b96c24c1 fix: support creating v1beta CRDs to avoid data loss during conversion to v1. Due to data loss during client side conversions OLM will support two different paths for v1 and v1beta1 CRDs.
7871e6486 feature: opm (index|registry) prune command
69e95d8c3 (fix) Use opm builder image for opm indexes
2b401d2c5 fix(resolver): Transferring API Ownership
69945af22 Fix Operator Generation code
622564c5e Bug 1820438: Slim down upstream builder
7b2ffe887 test(e2e): correct tls detection in metrics spec
6cb639fcd test(e2e): make operator resource creation eventual
2fb9d9aab test(e2e): simplify csv requirement event spec
97901a1f7 chore(modules): pin controller-runtime to master
53c28b19d chore(manifests): include double-hyphen olm deployment options
3960780e2 fix(client): supply missing params
3af4abf06 test(operator): gracefully stop test controller manager
2aeb3505a fix(operator): swap top-level update for status update
4c8e489ad feat(operator): enable configmaps to be operator components
eefb21697 test(lib): add unit test for metav1 time conversion hook
98a6871d0 chore(make): use existing kubebuilder installation
db1af5dd0 chore(logs): set manager setup log level to 4
9440e420e test(operators): add e2e test for the v2alpha1 operator resource
2fd8cedb2 feat(operators): add v2alpha1 operator controller
faf929150 feat(opm): add unprivileged index extract
caa685961 fix(indexcmd): use a separate directory for unpacking a previous index
ffb2bf284 Address the metadata read files loop to work regardless files order
18bd22456 Add an operator cache for use by the resolver.
8f55d0ab5 Add unit test cases
8e445b144 Add Validate() for each dependency type
338cba6a7 Add dependencies validation
fc2490b71 Add dependencies.yaml validation to opm
994d99697 chore(api): switch to operator-framework/api
36401b385 fix(secret): use a synthetic kind instead of an api field to determine bundle secrets from pull secrets
9919c4dc4 chore(make): copy crd manifests from apis repo
c0c6a63ea chore(deps): bump to kube 1.18
d68232e1a Fix failing E2E bundle unpacking test.
b7aea1e95 Add initial SAT solver package.
11b26af18 (feat): Bundle commutativity
452c04c2a feat: support secrets from bundle
8d30b2913 fix(schemas): remove installplan generation field requirement
00b5fac1e fix: add empty go file to packge to fix make verify
3008b35ce Fix panic in AddToRegistry when using podman.
f29b17b0a feat: support v1 CRDS in OLM. Simplify InstallPlan Execution via new Stepper interface. All CRDs will be converted and handled at the v1 APIVersion.
2624d1f97 Regenerate the chart embedded in the test installer as needed.
e891fac25 fix(index-add): docker index add failing
3511cbb9b chore(gh-actions): install conntrack before minikube
47f57a912 fix(docker): include util dir in upstream image build
a56d8a0ff test(gh-actions): add upstream image build test
195fd70cc Add ListBundles to the client interface.
00938978e fix(query): ListBundles returns all bundles even without dependencies
4b8be0343 fix(registry) Update the addDependencies to add requiredAPIs
a75d99c1e OLM Support for Admission Webhooks
79b39c1b0 Move APIService to installer
e2d6e343a Added Github workflow for running e2e tests
fa1f8a40f fix(add): allow containertool to be specified for registry add
0211a173d chore(docker): add kubebuilder to base image
6ed6cd70d fix(crds): add missing status subresource to schema
022c73e09 bug(opm): use db dir when modifying existing index
9644be3cf Address feedbacks (second round)
3d24b440e Add BugZilla component to OWNERS file
22092a80c feat: support configmap creation from the bundle
1a2969719 fix: use busybox csv for polling e2e test
e5d708779 Address feedbacks and fix test cases
32c04f650 Update OG and CSV for Webhooks
fb3addd35 fix(operators): add missing v1alpha2 types and update crds
a610ef24d Codegen for registry API changes
d6987d37f Add bundle dependencies specification documentation
9026431f1 feat(registry): Add operator version dependency metadata
f40eff62b fix(load): shouldn't clear bundle/csv field from non-default heads
31c0743e6 fix(operators): sync v1alpha1 types with olm repo
45e9423c9 feat(crds): add unmarshaled convenience getters
7c64f8b89 test(e2e): login w/ docker first to prevent failures
c52863016 feat: add support for configmap and secret objects when generating a bundle
c7eefdc83 bug(opm): packages flag on registry rm required
e25ff74c4 fix(imageloader): image loader should consider existing channels when adding to an index
51b00418e (feat) Add semver insert mode
bfb349d84 chore(deps): bump to kube 1.18
20e115c73 chore(crds): add crds and manifests make rule to generate them
885a59229 chore(travis): add conntrack package
40b0dd25c fix(populator): set bundle name
dbbacff0b fix(populator): put correct argument in decode call
33b090c64 Create APIService after API server deployment
5e7dcb8b1 test commit please ignore
91fe5d2f5 refactor(populator): ensure file descriptors are closed
8a8f2f068 refactor(image): add image reference interface
902074d2d feat(deamonless): add buildah-based deamonless image puller
6b71f6573 docs(opm): add self-contained container-tools section
ccb818dcb feat(opm): add unprivileged registry add
9a5c3c0f0 chore(codegen): update to drop license year
cf1eae75d chore(codegen): use controller-gen for deepcopy
283f5aa4c chore(codegen): update deepcopy types
422133acb chore(make): add generate and vendor rules
19aa8d24a refactor(csv): don't use pointers for rawmessage fields
931b4dea5 feat(operators): add v2alpha1 operator types
53e97f670 fix the `validate` command in the docs
7d3f5ea0f test(migrations): add tests for api provider and requires migrations
8fae3ba1a fix(load): add synthetic nodes in every channel that a replacement is in
01ab07dd1 feat(bundle): extract replaces/skips data on load
6043ce87d refactor(db): remove denormalization that associated provided and required apis with channel entries, rather than bundles.
5c6d88f2f [feature] Understanding packages from directory
af6ff5d9b chore(codegen): remove license year from boilerplate
473863b3d Rewrite
754662662 PackageManifest isn't actually a CRD
e448e6b89 Remove specific client tool names
1499093a4 Clarify roles and adds info about Package Server
5ac2ad1f3 feat(catalogs): add spec validation for sourcetypes
ea7dfddc2 fix(dns): fix slow dns resolution of localhost for grpc health probe
4faaecbf1 pkg/lib/bundle: fix copyManifestDir so it actually copies file contents
fab72d5ca [travis] pinning minikube version
45b0c29c9 [dockerfile] removing dev directory permission change
a1eef3a29 Revert "[feature] Understanding packages from directory"
84152693a fix(sub): prevent nil pointer access
55cb829b1 [feature] Understanding packages from directory
c5d6a7b46 Update the code and test case
6a79699b4 Update related images func and test case
f4897ca6b make codegen for packagemanifest changes
2d798e9e8 Add more CSV information to the PackageManifest
a44caddce Reconcile Namespace OG Labels in Namespace Syncer
746ccf47b Update graphFromEntries to be a private function
31fa297a2 use query interface in sql graph loader
90541c7b2 address pr feedback
9ef3f960c Update graph format for runtime concerns
a8ea1bfb2 Graph Loader initial implementation
575d92a92 Add tests for GC assumptions.
03b2db1d7 chore(apis): Regenerate API types for openapi3 specification
e55a4431c chore(deps): bump to kube 1.17.3
75ec17ee3 Change to using a hash instead of ordering
c044cd401 Add alm-examples-metadata
6f4c9f3d5 chore(deploy): update manifests
e10945113 fix(bundles): include csv name in installplan for bundle images
e303dcbef Add OG label to namespaces in OperatorGroup
44a5741f8 Update chart to use the new "crds" directory.
f75829b27 Convert e2e go tests to ginkgo
72a396937 Add e2e test for multiple APIServices on a pod
d0fecef3b fix(catsrc): remove limits on catalogsource pods
9115b31e2 Fix typo in subscription.crd template file
8a79a98b1 Ignore differences in CSV .status.conditions in unit tests.
6e597918c Support multiple At PIServices on a single Deployment
6e67f2c44 Add updated manifests from make release
1b9ebf463 Optionally lock down package server runtime environment
2a57de06b manifests(prometheus): failing operators should be a warning
7181da8cb Add opm E2E test.
e6dd01dab chore(deps): Bump to kube 1.17
7b7940cc0 chore(deps): Bump to kube 1.17
b05891a8c update examples for Subscription config features
9145ef1e7 (test) update e2e test
d022ede6f (feat) inject 'Tolerations' & 'Resources' from config
9d031339d add link to olm-book definition of subscription
76aa9fbcf Make provided API ClusterRoles be owned by the corresponding API.
6531eea45 Generalize manifest copy
ffd62133e update go.mod to remove unneeded license dependency
80ec4d5e0 Update operator-registry OWNERS file
9a92f73a5 Match bundle image directory structure
60cbefcc1 feat(jitter): add jitter to controllers to smooth out our spiky resource usage.
e24a30431 Add test target
3d289ad65 Have a Makefile to install operator-verify
f08f7ee8a GitHub action
6df3786ab fix(installplan): crs are ownerreferenced to their resolving csv
ece76cb27 test(installplan): add cr ownerref unit testcase
60d9c9b7e Bug 1809294: Update subscription_sync_count to include the package name
b8e519622 add stalebot
1cff59d94 fix(make): build cpb as prereq of e2e-local
65fe08e51 Use k8s version instead of replace in go.mod
662f4591a Unbreak the minikube mode of build_local.sh.
a4a430838 style(logs): mention generations instead of manifests for subs
11a583d57 fix(subs): retry status update on conflict
b06240fff Removing olm dependency
8068c205b depend on registry v1.5.3
7dfadbce1 test(installplan): ensure single installplan per resolution
9b8dd25f5 Removing olm dependency
0b39510ad fix(index): gen index dockerfiles from opm image
fafb016e0 fix(resolution): add generation to installplan
b5c72e2eb fix(deployment): remove separate operatorgroup annotation updater
93eb7f183 fix(deployment): use deployment spec hash for determining if change  is needed on cluster
82d43867b Fix TestUpdateCSVInPlace e2e test case
ed94e0f23 Remove run-level 1 from olm and openshift-operators namespaces
2b3d40150 fix: use label selectors in package server List response for all namespaces if label selectors are provided
75162c2e6 Don't block on ctx.Done() if startup fails.
0bb00ee1c Fix kind detection for local builds.
689e64e93 Add stale bot
0c173c69f test(meta-pruning): ensure pathless nodes keep data
0fb8e2d7e Add stale bot
fb0489b70 Produce binaries without target platform prefixes by default.
537d03995 Update README to include OLM-Book
e1c406909 chore(deps): remove helm as a dependency
f04515c78 Update subscription-config.md
d7a93457b Add some examples for Subscription config feature
f6ef85d61 fix(docker): add entrypoint
53bde4b33 Bug 1798051: Reinstate v1alpha2 operatorgroup
bf5010ce9 fix(packagemanifests): Fix index key func to avoid key collision
74c1cbe22 feat(util): add cpb command
d3437399a fix(bundles): execute opm from tooling container
aa753bfca Bump version to 0.14.2
f76ea21db fix: update e2e test to use internal docker registry and openshift registry. removes quay credentials.
9d780ed68 mention OLMs features in the introduction
d5053fdb4 Fix cases where an operator's ready channel may never close.
38955c133 fix(index): copy correct opm bin builder path
df43ac7d5 Update operator-bundle to clarify the bundle format directories
d2f6e6086 BUG 1238: Fix configmap registry server readiness probe timeouts
2ae275102 fix: update existing robot credentials
3ebc7c33a refactor rh-operator test directory
52db6fd8b Delete junk SQLite journal files.
bea99c650 feat(appr): exit build early if no manifests were downloaded
f913c128b chore(ci): update owners
48f8d6cb9 Generate manifests for version 0.14.1.
5d3650ff6 Generate changelog for 0.14.0 and 0.14.1.
24d607545 fix(gc): clean up copied csvs that have incorrect operatorgroups
230ed91fc test(e2e): add test to reproduce bug where copied csvs with annotations
6a857172d fix(operatorgroup): don't overwrite operatorgroup annotations on copied
1eab138b7 test(ci): add failing test assertion showing that operatorgroup annotations on copied csvs will get overwritten to the wrong thing
1cc4c0b98 Addresses the bug where updating the packageserver fails with a unable to adopt APIService status message. This is a result of ownership mismatches between the packageserver (owner) and the APIService (the owned object). This can be resolved by setting the actual k8s owner references or the label-based references that OLM uses. This commit ensures that ownership references for the APIService are cleaned up on OLM restart and that the olm.owner:packageserver label is set on the corresponding APIService object.
6dd781751 Bump version to 0.14.1.
3bc3a3a07 Update operator-registry dependency to v1.5.8.
29263b0a4 Add bundle validation test cases
61f7aca09 Add validate bundle test cases
64f5acb45 Remove dependency on sqlite from pkg/configmap.
078a6f8c9 Fixing wrong database loaded in memory for export cmd
52bf1dcd3 Fix overly broad .gitignore pattern that was excluding a vendored package.
b797473b0 Revert "fix(ci): build opm statically in CI"
0cab8a53d Add support for Prometheus Custom Resources
3a0309a28 Adding ability to export package from index
7cdf29dae fix(ci): build opm statically in CI
fd5b5456e Bump version to 0.14.0.
6de6829fa Vendor helm, since it is used for templating manifests.
4a113bfa9 adding e2e test framework for rh-operator metrics
01c22044e Update README.md
2399fc36d Update docs to reflect index/bundle image changes
1bad1e5c9 Bug 1784028: Updating summary for 'Operator Registry ' containers
d0ce30eb5 Add support for choosing the package's release
9abf38906 chore(release): use robot for deploys
33a3a875d Fix issue with empty docker error output
9e393e615 chore(release): add a travis.yml to build and release opm
bba572390 Address feedbacks from comments/reviews
12dff198f Add unit test case for CRD validation
bb4139601 Refactor validate CRD to fix conversion error
17f67d0ab Refactor bundle validation code to seperate format and contend validation
e58102dbc Add validate bundle contents
dfef906ed Fix IPv6 incompatibility in TestGrpcAddressCatalogSource.
084cc4650 Update release script to require version 3 of helm.
f3f78e48f update internal objects proposal
4f926286d chore(build): only enable cgo for ci/prod builds
617a1da83 Remove pyjq and yq from the release documentation prereqs.
da188bd21 fix: typo in catalog polling doc
977079d7f feat(packagemanifest): add default os/arch labels if not present
921414bd5 feat(packageserver): support label queries and copy CSV labels onto the packagemanifest
f54690791 fix: refactor catalog polling spec to use more general update strategy field
ec92318a7 Delete file that was renamed
9df9d528b Swap annotation namespace
b2ca9020d Use the correct title
6d8cfdce1 Ammend proposal to include data CRDs and new annotation names.
97879df57 doc: add internal image proposal
44c2a9513 Reconcile manifests with templates.
1fb8497e4 test(e2e): fix subscription update flake by retrying
579ad84ce docs(design): add bundle image unpack design
a29885434 refactor(resolve): simplify bundle lookups
629c26fb1 fix(catalog): add ownerreferences for bundle image resources
d30eec482 fix(e2e): remove local dev test registry image
0ac5d7834 fix(e2e): remove local dev test image
824b575a5 test(e2e): add test for bundle image
261d22ef9 chore(fakes): make mockgen
d2f6a1692 chore(codegen): make codegen
8d0620093 feat(bundleimage): resolve bundle images
7a4130a65 feat(catalog): make install possible from bundle image
7b0c870a1 chore(vendor): get latest operator-registry
cfccb8bce feat: add polling doc
28bd26930 fix: update Poll to be pointer
ef660b62d feat: implementation of catalog polling feature with e2e test
26a08dcf5 Revert "feat(packageserver): support label queries and copy CSV labels onto the packagemanifest"
af3dab3c4 feat(packageserver): support label queries and copy CSV labels onto the packagemanifest
81919f512 Make downloader.go testable
7510a1793 fix(build): grpc-health-probe was not building properly in 1.13
91f4eeee4 Use vendored transitive dependencies for "go run" of vendored yq.
f4927441c Enable CGO and CGO_DEBUG
98a9e79d1 fix(bundle): set csv name field on configmap loading
7d7d73046 chore(codegen): update generated code for 2020
351f482b3 Vendor helm library to enable helm chart validation
8ed495541 Fix a few minor issues
b0a5cdf77 Update bundle validation lib for sdk consumption
ca90fd1b4 add tests
158d8771e Add bundle image validation feature to bundle library and bundle cli
1b0352188 chore(ci): add dockerfile as a base for building in CI
a87892fd7 Detect replacement cycles while adding package channels
08e7975e4 Fix tiny typo
3e8b6904d fix(configmap): remove packagemanifest parsing
c8a374612 chore(makefile): add selective unit test execution
9ee71a10d add cp to configmap-registry image
a2d3a67d5 Add opm to configmap-registry image
3cc8d20b0 fix: add err check before further operation
434e736e4 feat: make run_console_local.sh sh compatible
3c9c4e40e fix: make run_console_local.sh working on WSLv1
5a2c09762 test(e2e): testing CRD upgrades shouldn't create a new subscription
f9dc11c9f feat(resolver): rely on info from catalog to determine updates
e674ac7df Add note for version field
e17efd934 fix(deploy): remove resource limits
3cc2aede2 chore(modules): update vendor
923200984 refactor(opm): add examples to index add subcommand
33e472eb6 chore(codgen): regenerate code, mocks, and openapi
56c53d2bc refactor(pkgsvr): remove apps group
b3c31e88e chore(codegen): clean up codegen make rules and scripts
24208ed04 chore(ci): remove old gitlab ci config
d7ff63fca docs(design): add general design goals
14b60c426 feat(resolver): fallback to csv parsing if grcp api does not contain the information required
d18bbe4b3 Update manifest CRDs
b821e5a5e Implement controller-gen
531f3162b Update CRD go types
66bd02946 Corrected etcd CRD URL.
18a528e3d Added `keywords` in operator metadata.
6672ec680 add a mention of bundles to the README to help users find bundle information
a89f54259 Dep is not required.
a59d446ba chore(git): remove and ignore packageserver test key pair
ccda3c5dc fix(packageserver): cache packagemanifests
076003433 Fix CI unit tests
b98f2d15d Change index func to return list of ns instead
d9845a62a Fix updateInternalCatalog namespace bug
95a0619fc Add e2e test case for syncSourceState
ccd54c5db Enable multiple namespaces sync if catsrc is updated in global ns
aad455fb0 bug(metrics): serve metrics using new certs when replaced
062584436 feat(filemonitor): add new filemonitor package
82e72d337 chore(modules): add fsnotify
13057a042 Bug 1769030 Replacing (updating) operator creates duplicate secrets for the operator's ServiceAccount
87618fc45 go.mod,go.sum: bump k8s deps to kubernetes-1.16.2
84585c6fd Fix minor namespace bug with NewFakeOperator
55974007a Update k8s version for local cluster (1.16.2)
ed1935b21 chore(mocks): use new counterfeiter directives
b019db1d4 fix(appr): use given cache dir for image builds
c95aa6a25 fix: double limits
66ab840f9 fix: double packge server limits for CI
5b12e385e Bug 1774630: relocate test data
5f481ce3c Bug 1774630: Fix panic caused by incorrect bundle data
6ab2895f1 feat: add resource limits to all OLM pods for OLM releases on OCP above 0.13.0
9cc5fac0f Bug 1771850: Error logging for opm alpha bundle extract command
4f8dd8c4d vendor in github.com/pkg/errors
903eab048 fix: defer RUnlock in AsClients
940c3fb3b fix: use defer cancel to cancel context waiting for state changes
0fa8201ed [docs] update changelog command
3e469c477 fix: simplify test by removing additional map
0d9b81a23 feat: add test to confirm node selector behavior
c34e80a38 fix: add NodeSelector to catalogsource pod spec
1957d0cb4 Clarify the directory requirement in docs and help menu
17e1fac98 [release] updating changelog
da3fc2e34 pkg/validation/interfaces: Validator's implement WithValidators to append non-default Validators to the Validator; ValidatorFunc implements Validator
1324a97e0 [release] - making new release
548d017b0 Ensure provided directory has at least one yaml manifest file
475a9fda7 Add directory check to ensure the directory exists
6ec0bba73 Fix bundle build command with Docker and update documentation
e9ae4be82 fix(e2e): update ginkgo configmap test
92acda8bf fix(olm): defer provided api update in operator groups
f20ad06da [release] - version bump
f0c2b06bd [docs] - update release docs
9a4e3b3cb [bug] - add version and skiprange to operatorbundle table
31d85cfd9 pkg/validation/interfaces: Validator's implement Validate() to return errors.ManifestResult.
645f73f7c Make imagereader work for all layer paths
a26089a5a Fixing doc typo
f7bdf8284 fix: t.Fatal should be used in main goroutine
a8ff97b42 Fix flaky subscription e2e test case
80f25361e Fix several flaky e2e test cases
b27d28666 fix(configmap): bump base image for configmap registry image
3775f1d9a Add `opm index` commands
9fc13ce3e fix(mirror): canonicalize names before swapping domain
e5a4c8dbe feat(api): return version and skiprange in bundle
bc3c953c5 Alerts for failing OLM operators
43b7d8462 [opm] - Add registry add and rm bundle commands
b270b73ea fix(builder): Add AppRegistry org to `ToOption`
f89f7e09e feat(metrics) Report subscription channel
088c142d5 fix(configmap): make launch bundle work
a28729347 feat(resolver): use provided and required apis from grpc instead of calculating from the csv
48128f96d feat(metrics) Limit Cardinality of CSV metrics
8586d5946 feat(client): return api bundles in client
95f956aee feat(sql): extract required apis when loading
9dd281b4f feat(imagebuild): add opm binary to registry image build
ff9ac78b8 docs: Corrected CSV upgrade version.
c04b9eda0 Add unit test for minKubeVersionStatus
0065ffd46 fix(bundle): Fix the build paramater order mix-up
5a9e2085e test(mirror): add tests for mirroring
924bdfeba feat(opm): add registry mirror command to mirror the contents of a catalog
f09d1f48a feat(opm): add registry build command to build a catalog from an appregistry namespace
396d51306 chore(configmap): load packagemanifest data from annotations
9c9fcb834 test(unit): add test case from generated configmap
f49d8d513 (feat) Load operator registry bundle from ConfigMap
80ec02aa6 Update registry gitignore to be consistent with OLM
9c2b5bea1 fix(bundle): Fix manifest directory issue in generated Dockerfile
317dd2aab fix(olm): No longer report status if minKubeVersion not specified
e7e204be9 test(e2e): add bundle data image extraction test
127b4c8f2 test(e2e): add initial test bootstrap
3a29503b7 feat(cli): add bundle extractor binary
59a75cd86 feat(configmap): add configmap writer
c0f8325ad chore(client): move k8s clientset generation
461d6985f Change const to upper case so it can be used
aa26d805e Updated values.yaml location.
602fabf72 fix: refresh architecture and philosophy
ce488d190 Clean up minor issues with command-line code and documentation
c625b267c Fix bundle library doc to reflect new changes/features
f7dee84cf Fix bundle library unit tests to cover new code
df3d617ac Fix bundle library to add package and channels info to annotations
c5c42cfad Clean up library code, unit tests and documentation details
e87847714 Add CLI tool to build Operator Bundle image
062cfa9c2 Image digests for referencing bundles
38e90e00f Update resolver.go
a3259165f Fix log message in resolver
df6ef4d11 fix: fix particular typo in clusterserviceversion_types.go
cf24622fd feat(migrate): migrate from current version up to the latest
46088dfb0 feat(images): add support for storing and querying related images
b3f5273ac feat(migrations): switch to go-based migrator
58b7f3d33 URL with modified manifest directory structure
b2afe6a00 Update OWNERS
7678f6edc bug(dependencies) Prioritize APIs from same CatSrc
906690334 Adding opm cli
d7081859f Update PackageManfiest table handler
4688a9dcc bugfix: assignment to nil map will cause panic
d0e22e9b2 (proposal): add bundle image deployment text
6779f0b26 (proposal) Make bundle accessible to a cluster
313d15f7b update OWNERS
6aa2b7499 Bundle migrations in binary
82f97db28 Database migration initialization
fc99a2ba3 fix(sqlite): enable foreign keys for sqlite
7344cbf0e proposal(relatedimages): combine the two previous proposals
bf587f26d proposal(relatedImages): update related images proposal to use kustomize
775fbf92a proposal(relatedImages): add a proposal for specifying related images in CSVs
f31c876b5 Fix InstallPlan stale variable issue
e70eb17fc Add e2e test case
542d8d2d9 Bug 1758008: Manual approval strategy ignored for subsequent releases
22477b866 Add document for SubscriptionConfig
bd975dcb9 feat(subscription) Config Volume and VolumeMounts
5f25627b7 Rename envVar package to overrides
23ac744d2 Add `apk upgrade` to upstream builder
c26ac3099 Fix links to console repo for moved packages
e54770d4f bug(install) Fix packageserver name in install.sh
183c6a860 feat(metrics) record CSV sync events
f0f7f9d23 Bug: Fix olm chart
fde8c0553 chore(modules): bump openshift/client-go pseudoversion
6d8449d89 (release) Update changelog
46406f126 pkg/registry/bundle.go: use v1beta1.CustomResourceDefinition, as the apiextensions type is internal
b96fcdd54 Add migration proposal
f8d3c4824 chore(deps): bump to kube 1.16
9aa8674c3 feat(scripts): add shell lib with some common helper funcs
0a48b1c72 fix(subscriptionconfig): add missing merge struct tags
bcf781ec6 refactor(operatorstatus): make monitor constructor variadic
122de9ae0 (release) Generate manifests for 0.12.0
865609081 chore(deps): refactor load_test so that OLM is no longer imported at all
9394c1452 chore(schema): remove schema
7d0279468 feat(csv): support extracting version from bundle's csv
227c5f994 (release) cut a release for 0.12.0
08eab6477 (docs) Update release.md documentation
afe956695 chore(deps): bump to kube 1.16
a31af892c Create PULL_REQUEST_TEMPLATE.md
7ecae3cc9 Update PULL_REQUEST_TEMPLATE.md
a887ff0fa Update PULL_REQUEST_TEMPLATE.md
db19d9fee Update PULL_REQUEST_TEMPLATE.md
823ca8fbc (doc) How to update operators documentation
e45258d22 test(e2e): add operator group SA permission tests
25cbc86a4 fix(olm): requeue as needed upon permission changes
e954cf8f9 fix(olm): handle CSV install failure gracefully
9ec40d12b Enable vendoring on Go 1.1x
7a8c5589f feat(olm): don't calculate a patch when updating via a replacement chain
973e9c395 Add unit and e2e test cases for deprecating a CRD version
cec93f8b4 Remove deprecated CRD's stored versions to allow CRD update
55f068e4a (doc) Add deprecated CRD version procedure and note
a256f5f88 chore(docs): consolidate doc directories
b7819af96 Fix broken doc links
998809eec fix(registry): return all valid packages
3dc775536 chore(mocks): generate mock list packages client
42969ebc0 fix name of dir - replace Documentation for doc
bc02e9d6e feat(github) : Add github files in order to follow org standard
16494cd03 feat(readme) : Ajustments
cf8c2bfdc Drop the hard-coded DNS suffix
bede912c8 add default for packagemanifests/icon subresource
ea78704b6 fix(clusteroperator): update status after initial creation
e9501878e fix(clusteroperator): fix naming of related objects
1fca6a1f3 feat(clusteroperator): plumb additional clients
8ff1a2abd Bugzilla 1744245: Subscription should not point to deleted ip
4ce17d2f0 fix(init): cleanup leftover cross-namespace  ownerreferences
09e846ad0 Stop relying on pgrep -q
31898fd5b [CatalogSource] Set Global Catalog NS with EnvVar
8b9d8b18c Remove InstallPlan Source, SourceNamespace from UX
d354b682f fix(olm): report name and group for related objects
f16ca4ad2 [lib] add two methods to validator interface
072bc751f [lib] add bundle validator
5496e4e09 [lib] add package validator
a31c68463 [lib] add crd validator
6b0b69706 [lib] parse operator manifest directory
b9207a2fe [lib] csv validator for example annotations
a1dafde35 [lib] add support for handling manifest
254ff6d88 [cli] change from verify to manifest command
13e77238f [lib] refactor logic for csv validation
28ef243a6 [lib] refactoring the library
f6b32131c go.mod,go.sum: add modfiles
db8ca031a fix comment
c23e76ac6 refactor Validator and error/result types into pkg/validate/validator
10cd8b511 pkg/validate: add Validator interface to add k8s objects and run validation logic, refactoring around interface
36f17aa27 [lib] Handling mandatory/optional fields and reporting custom errors
bc4a45f97 [cli] Handling error reporting through cli
ff518e877 [cli] Adding verify command
de5eab427 [lib] Adding serialization for CSV type
c63198ac9 fix(sqlite): defer rollbacks to prevent db lock
dafa3719c chore(deps): update grpc to latest
6952403d0 feat(operatorstatus): report packageserver as upgradeable
9e7039fc5 Bugzilla 1737057: Sub CRD does not validate config
e9e115eee feat(sources): syncronize access to lastupdatetime for sources
e209a4e08 chore(deps): update grpc dependency
d7d1ff1b8 Bug 1740332: OLM should resume operator install
5fb22c2c3 add packagemanifests/icon to aggregated OLM RBAC roles
2172020fd filter icon fields from PackageManifest object (use packagemanifests/icon subresource instead)
65c4666d8 test(e2e): add test verifying permissions are updated during an operator upgrade
6877b58e0 Bug 1702552: Two "NAME" fields by command "oc get catalogsource"
6525b53f4 Bug 1732914: Operator upgrades fail when versions field is not set
734cd61f4 fix(spelling): just a comment correction
1c631bf63 fix(olm): clean up resources on CSV deletion
43904bac0 test(e2e): ensure resources are deleted after CSV delete
a4020e3a3 (proposal) improved csv status reporting
88885ba20 [doc] Add fake README to the project proposal
d9ad0f893 Operator validation library project proposal
e89735b13 Bug 1744245: recreate of sub should not fail install
d82e763f2 packagemanifests/icon subresource
9147efeb1 add proposal for 'packagemanifests/logo' subresource
1d70f3048 Bug 1737081: catsrc status should show error
33d39768c test(grpc): add basic connection event tests for source manager
fc5b01acc feat(grpc): adds grpc source manager which notifies main controller when grpc events occur.
fa442cb0c fix(deploy): change local deploy to use olm namespace
0b44cdec2 fix(registry) Fix incorrect error return and handle
f5e8bf6d2 refactor(cmd): change command scope to make testing easier
10f4bfb8e feat(configmap-server): tolerate load errors
4bf956652 feat(registry-server): tolerate load errors
38c956b56 feat(appregistry-server): add strict load option
7da728f31 feat(configmap-server): add permissive load option
af591e9df feat(initializer): add permissive load option
e08f0e390 feat(log): make termination-log setup failure non-fatal
2eb8e4f30 test(load): add test of unpacked appregistry format
ae4493d4f fix(sqlite): correct directory load error collection
ad310d64e feat(appregistry-server): use empty querier on fatal load error
82722d27c feat(sqlite): make configmap loading best-effort
242baf625 feat(sqlite): make directory loading best-effort
ef61b9e60 feat(sqlite): make package loading best-effort
efd0c3fd6 feat(appregistry): avoid panics in flattened processor
05d4d864b chore(git): keep testdata/download
f7f47a0f0 Initial commit
c22cea8eb bug(1717636): Add relatedObjects to cluster operator status
ab835aa69 chore(deps): add glide.yaml for importing to oc
58f3ccb93 feat(appregistry): have appregistry transform configmap bundles into directories
6bb21c271 chore(deps): remove dependency on marketplace
eccfa7060 chore(deps): remove dependency on openapi and go-appr
105d723dd (doc) add doc for scoped operator install
9ea876e78 (doc) update make new release doc
106f9e507 Report `Upgradeable` in ClusterOperator status
e2b2b7470 fix(unit): allow logrus log level to be adjusted
8c5cfd708 fix(catalog): re-install resources in existing installplan
e6fea4bb0 (release) update changelog
59305c77e (release) generate manifests for 0.11.0
5471a5b80 bz-1662263: include git sha in ART builds
55cf20a68 (e2e) fix e2e test flakes
57d5167bf (feat) requeue the csv when subscription changes
50d8af9b8 Rename and remove commented code
900846502 (feat) empty proxy env var should result in unset
8f044c03e (release) cut a release for 0.11.0
b74b184e1 Fix panic when binding already exists
89076d623 fix(dockerfile): missing image alias
9012b067c fix(unit): refactor to use shared pod resource
82b89d2cc feat(deploy): add resource requests to all pods
cba79661f fix(manifest): fix env var projection in command
df9418c85 (test) add e2e test
2045208a9 (feat) inject 'Env' from config to deployment spec
38decf71d (feat) incorporate proxy configuration support
e9b8e3c75 add operator configuration to subscription spec
391012587 Add e2e test case for existing CR validation
39d9fa5ca Validate existing Custom Resources against new schema prior updating
70701ea86 add dockerfile that just contains the registry server
979c4fa39 refactor(load, query): don't rely on json extensions to sqlite, and don't rely on types imported from OLM
4db7fc736 feat(load): allow multiple csvs in the same directory
bcbd5e9f1 chore(modules): re-vendor
6ac6e1ef2 chore(generated): run code/mockgen
86276ae2c chore(modules): pin k8s 1.14
de66a717b feat(metrics): record sync count for subscriptions, labeled with name and most recently installed CSV version
aa599f91d feat(metrics): record sync count for CSVs, labeled with name and phase
232ab6a9d fix(init): move cleanup to olm startup
98cc0a6ba feat(init): add init container to olm operator that can clean previous deployments
4711b0aca chore(deploy): remove packageserver subscription and catalog from chart
d3c232d3d fix(build): don't build static in downstream images
128449632 chore(image): change base image to go 1.12
0164effea feat(olm): allow CRD updates with multiple owners
fa7fcf9d1 chore(logging): logging fixes / small enhancements
a655bbaf2 test(catalog): add sync resolving namespace benchmark
2060152e1 fix(olm): List does not return NotFound error
7e7a20d7d fix(e2e): fix baremetal e2e
9aa00c871 chore(dockerfile): switch to go 1.11
19a892236 proposal(operator-config): initial proposal for persisting configuration of operators
be55365d0 feat(csv): detect changes to a deployment and persist them
6cb475990 fix(query): return all channels when querying
423ecf606 docs(profiling): add basic usage doc
2be069c49 feat(cmd): add profiling option to olm and catalog commands
40a34b5c8 feat(profiling): add pprof handler registration function for mux servers
62ba254c4 test(e2e): remove extra resource comparison
7a8a21df2 Add webhook proposal
6df186031 1723818: package server 4.1 to 4.2 upgrade should not fail
4d07ecab8 feat(makefile): add target for compiling e2e
24e3bdda3 (bug) CSV name change causes upgrade to fail
89f4d288f (e2e) add e2e test for user defined service account
cfff29c30 (feat) validate that secret is valid api token
6d56a74d0 (feat) use scoped client for plan execution
5a378a491 (feat) create scoped client from bearer token
5943b2223 (codegen) generate operator group type changes
1d1406292 manifests: move ServiceMonitor manifest to runlevel 90 so it will be applied after ServiceMonitor CRD is created
6ba46b3e1 [bug] Remove duplicate packages from list
c7831f5e7 chore(modules): add hashstructure and revendor
55c4a61e4 test(sub): add subscription installplan condition e2e test
4b976ae87 feat(sub): add installplan reconciler to syncer
dd58ec73d feat(sub): add installplan status reconciler
c6e0f24c1 feat(state): add subscription installplan states
3b56f8ade feat(sub): add subscription installplan status conditions
666942c4e feat(equalitor): add equalitor interface and hash implementation
fe942aa77 (feat) monitor package API server CSV progress
65566179d Receive notification of CSV(s) being watched
0549c5f52 (deploy) add cluster operator for package server
9153703c5 fix(test): fixup bare test imports and vars
5a48ba8bd Add a new test case to cover preexisting CRD case
befedc7cc Add e2e test case for single owner CRD update
7a2263d9f Add IndexFunc using ProvidedAPIs as key to look up CSVs
b17a0f946 Enable OLM to update CRD when there is only one owner of that CRD
1a01baa0a Update CHANGELOG to include changelogs from 0.10.0 and 0.10.1
98a9a20e6 docs(release): add additional clarifying details
f39e000df fix(build): set GO111MODULE=on
7ec84feb2 Switch to go 1.12 in the root Dockerfile
73d86fde9 make release 0.10.1
56a83e9fb fix(unit): fix unit test flake
16d1d8318 fix(build): don't use helm in src image
2434f1b77 fix(catalog): do not add owner references to clusterroles or crbs
ac617f597 fix(chart): add missing descriptions to operator group
112248d93 feat(queueinformer): add config options
300403724 test(subscription): add e2e tests for catalog health
547910899 test(bare): use new operator constructors
951bbaa8b chore(codegen): generate conversions/deepcopy
5a7ae300d feat(subscriptions): add catalog health conditions
14d1f34bd refactor(packageserver): plumb context throughout
30d315892 refactor(main): use signal context and new operator contructors
c0231ed15 refactor(olm-operator): replace factory method parameters with options
e162d49b3 refactor(catalog-operator): use new queueinformers
2c1adf0a0 feat(subscriptions): add subscription catalog health syncer
a9272bf5a feat(registryreconciler): add now function
3bc29f8b2 refactor(operatorstatus): make sync channel receive-only
884ecd94d refactor(queueinformer): use kubestate resource events
97abc9440 feat(kubestate): add generic typestates and interfaces
16b5ad074 refactor(signals): replace stop channel with signal context
314e02ce7 feat(e2e): allow KUBECONFIG to be set from env
5e019f32d add -l option to $POD_MANAGER attach
e8bde0245 clone labels from CatalogSource to PackageManifest to prevent concurrent map writes
25caff25e (proposal) Add user defined service account
948ae2d98 change packageserver global namespace to openshift-marketplace
951fb43fd add --rm, remove cleanup func, and attach to block
b8114b3ac repair run_console_run.sh script
8c76fa321 Bump release version to 0.10.1
fae07921d change global catalog namespace to openshift-marketplace
3445c4b50 chore(deps): bump kube deps to 1.14
b5dadcdd6 feat(install): Add new install scripts for releases, update release instructions.
77461fcea Documentation: Fix a few typos
fe51b8578 chore(types): codegen internal convs, clients, listers, and informers
d53e34e64 refactor(codegen): add conversion to make rule
bc2fecc42 refactor(types): add internal types for olm resources
36fe1227f Remove pragma lines that reference the files that cant be found
dd4c1d6f2 fix(registry): Validate alm-examples in operator registry
18e9d9228 Documentation: Small typo fixes to README.md
32c1e6607 fix(operatorgroup): Remove namespaces requirement for opgroup status
ca98f467c docs(release): add basic steps for making release
e46653c90 fix(catalog): close grpc connections before deleting them
d26e3af03 update manifests to 0.10.0
d313ede32 bump version to 0.10.0
d192632e5 add provided APIs to PackageManifest
8f867e81a (refactor) Move csv set and replace to a package
f79fcb60d feat(client): add health check to high-level client interface
9d6999b55 test(e2e): add test for orphaned api services
530a8a6ed end-to-end test for cleaning up apiservices after CSV delete
7ec8864bd fix(olm): add deletion monitoring for api services
6a31c507c fix(unit): fix flake in TestUpdate
6b540dcca fix(unit): operator group test flakes
19e9ed6c9 fix(olm): unit test flakes
fbd218514 feat(unit): allow specific unit test execution
2e6f3c5b3 test(olm): test role aggregation for aggregate apiservices
f96abcf34 added e2e test for garbage collecting ClusterRoles
8a7af925c fix(unit): Remove leftover println causing excessive log in unit test
cc6ff6f65 fix(operatorgroup): No targetNamespaces matched namespace selector
c63e7678f chore(deploy): install helm in `src` image so that verify manifests job can run
73715797c chore(deploy): re-sync manifests with the chart
b06422292 chore(deploy): add `verify-manifests` command to ensure chart and manifests are synced
6ca9f429f chore(deploy): fix release scripts
0b59c5adf fix(catalog): Fix subscriptions without a sourceNamespace hang forever
668e596dd fix(run_console_loca): Fix command and improve output message
2cc6173c4 Add validation details for `spec.maturity` field
da1622e49 fix(unit): TestUpdate no longer flakes
bf7364e1f One more doco typo fix
703262267 documentation:  Fix a few typos.
330e9cab2 Fix small typo.
4d3470876 Add support for Windows WSL in run_console_local.sh
0932515cd Fixing indentation for spec field
84bb8a405 fix(deploy): add missing descriptions to manifests
6f43ee44d Fix tolerations
667805d5e fix olm-operators tolerations
51f14be2f fix(catalog): fix issue where subscriptions sometimes get "stuck"
352f82693 add terminationMessagePolicy: FallbackToLogsOnError to OLM deployments
e16b2bccb fix(deploy): add missing descriptions
7e7410caa Fix tolerations
1efa117fd fix(e2e): fix installplan test cleanup
31e906c90 fix(operatorgroups): fixes rbac checking for multinamespace groups
f41a55265 feat(olm): speed up csv updates
39adb606e test(catalog): add tests for catalog reconciliation
033c4119a feat(catalog): check catalog health and recreate if bad
c74e3ad5e fix(roles): use correct group for package permissions
65007eb54 fix(e2e): test changes
dc2de2d6a feat(resolver): treat the registry as the source of truth for replaces fields
f506fba6d fix(olm): race when a subscription updates many versions
30354384b fix(resolver): resolved dependent subscriptions don't detect updates
fb6cca459 Set limit on length of Status.Conditions of a csv
6067ef7c9 feat(load): validate that packages have a default channel when loading
6c4d21f76 feat(resolver): allow skipping a set of updates if the channel head explicitly states that a range of existing operators can update directly
2c8d2be4f chore(deps): switch to blang/semver from coreos/semver
69204952d fix labels.provider issue
da68073dd fix(catalogs): make grpc registry check for < 1 pods
e5a7d5c5f test(reconciler): refactor reconciler tests with k8s decorator
94c99d71e test(clientfakes): add k8s client decorator and shared options
68611698a Add e2e test case to verify the events flow
f02824374 fix(olm): Fix the issue with missing events due to rate limit
a6e5ba291 fix(permissions): the aggregated edit role should grant view access to operatorgroups
e548c63b8 fix(olm): don't requeue operatorgroups for deleted copied csvs
499802def test(e2e): wait for deployment to exist in csv replacement test
c9c674c06 Always set LastTransitionTime in OperatorStatusCondition
1c04f1302 Revert "chore(cvo): remove ClusterOperator from manifests"
5ed875b87 Add node-selector annotation to namespace
bf6e905d1 chore(cvo): remove ClusterOperator from manifests
8e8499219 chore(deploy): update manifests
f646c0d1a add priorityClassName attribute
a9393b30d chore(cvo): update openshift/api so that OperatorFailing is changed to OperatorDegraded
f71593ea5 refactor(queueinformer): prevent > 1 run calls for duplicate informers
6c94c8d90 refactor(subs): add objectreference installplan refs
1b7b64903 feat(types): add reference for olm types
0b7509aa6 feat(loader): don't require file suffixes
aba81c5ca feat(rbac): restrict permissions for namespace admins
ba14de1f9 chore(cvo): report progressing=true if the version has updated
fa5da9eb7 Modify and improve unit test on deployment
fff1c6912 Rework cleanupOrphanedDeployments
d3bdadbcf fix(deployment): Clean up orphaned deployments
379187617 feat(packageserver): add additional info to package server output
8b084675e fix(e2e): metrics are now served 8081
f67a44ef7 fix(metrics): remove optional from secret parameters
8b7cf67da fix(metrics): add logging and separate muxer in catalog
f6738b2f9 fix(metrics): add logging and separate muxer in OLM
037fd1170 fix(catsrc): force registry update on dep resource deletion
e9078df6d feat(registry): add registrychecker
01763d417 feat(lister): add catalogsources to operatorlister
a69e8aea6 chore(mocks): regenerate mocks/fakes
0f6920873 chore(mockgen): use modules for mockgen
75b365b44 test(catalog): add registry pod delete e2e test
d7e8e144f Add unit test(s)
a00d721ab Support nested operator bundle format
d9a964ffd fix(e2e): remove ip count check
31805c44b fix(olm): generate rbac roles for ownnamespace operators correctly
0d59b4760 test(aggregation): Add test for operatorgroup role aggregation
7a0a48446 test(e2e): add sanity check for project admin permissions
f5e868766 test(subscription): add additional testing around installplan generation during manual approval subscriptions
6478efadc docs(changelog): regenerate changelog for 0.9.0
a8195a728 docs(release): add release doc with changelog generation section
68bd541cc cut release 0.9.0
96a5e2e86 fix(git): remove nuget ignore rules
2e4c2eb57 chore(modules): revendor
ca07037f6 fix(modules): update replaces fields
091a80097 bump version to 0.9.0
2a69d8d0a docs(subscriptions): add improved sub status proposal
098024d87 chore(deploy): set priorityclass on olm pods
ec943c50a chore(package-server): adjust to new API
3dbf29e63 chore(vendor): add jsonpatch
87b9d09b3 chore(codegen): regenerated due to vendor updates
629d46aee chore(vendor): update vendor directory
44f118f0d chore(vendor): prep for update to 1.12.7
ce738c402 fix(annotation): don't annotate deployments that aren't owned by a CSV
9e244e665 fix(packageserver): add struct tags to PackageManifestList
b0c3752e4 chore(codegen): run codegen and mockgen
0d74e0458 feat(packageserver): support apps.redhat.com and operators.coreos.com
1b570285a chore(deploy): regen /manifests
6eb30ae64 refactor(charts): normalize packageserver templates
de5fcdb95 Support v1 OperatorGroup and v1alpha2 OperatorGroup
ac22aed7d chore(api): bump operatorgroup and packagemanifest to v1 and group operators.coreos.com
3af623ac3 feat(load): use a new "skips" field to specify additional operators that
abd818bcb chore(deploy): don't include openshift stuff in upstream
bdf965108 fix(deploy): move service creation to new file
f9270ad15 fix(metrics): add service monitor config
3254744db feat(templates): make use of TLS options in deployments
b9de856aa feat(olm,catalog): add TLS support for metrics
6d333867e chore(deploy): renumber files from 02* onwards
bca81d76f fix(olm): use hashes for provided api labels
63c3d3a44 chore(deps): bump openshift/api to get new ClusterOperator types
ae72383de chore(catalog): add ClusterOperator status for catalog operator
c2b442a50 chore(build): build binaries locally and load them into containers
d67704a56 Remove OperatorSource dependency
4432c798f chore(manifests): recut 0.8.1
6cfd1eb45 docs(git): add changelog
f86f9bd31 fix(build): add some minor support for building locally with kind
12342747c feat(operatorgroup): operators in operatorgroups that select all namespaces are now granted namespace view roles (get/list/watch)
3e2c9012c test(e2e): add failing e2e test for operators in global operatorgroups
00e6a85cd feat(csv): label CSVs with provided/required apis
86139cc75 update upstream configmap-registry image to use the builder image
7827f6775 fix(chart): persist operatorstatus reporting changes to chart
2b6f52876 feat(upstream): add operatorhubio catalog to upstream release
898752aa2 add instructions how to use grpc catalog
c6a2e9a05 fix reference to Dockerfile
6c3f537da Fix typo - k8s version format
002e902bd fix(installer): include generated manifests
b4c925fa5 fix(ocp): add csv and deployment for package server
6dc8f6051 feat(e2e): generate a larger set of namespaces during testing
1ad71dac5 fix(e2e): use ifnotpresent for all test images
d1a92cf4b fix(olm): don't attempt to annotate deployments if the deployment hasn't yet been created
99b065778 fix(catalog): kind was omitted from ownerlabels
0061f4ffb fix(operatorgroups): gc copied csvs from a separate queue
eed7b3ef4 fix(e2e): e2e test for pre-existing crd owner tested incorrect behavior
28c092f45 fixes typos in README.md
64ac4303a feat(builder): add builder dockerfile (contains tools for building a registry image)
177e3166b fix(resolver): take a snapshot of the current generation before updates
f3d7fc544 fix(catalog): fill the csv cache with informers
cb82894d5 test(subscription): add an e2e test for validating that subscriptions step through multiple intermediate versions
3694a941a refactor(images): use operator-framework namespace for all olm images
00c7367c9 feat(make): add quickstart generation to release rule
943c42c48 chore(docker): update upstream.Dockerfile base to go 1.12
64750a89b refactor(scripts): use existing manifests in package_quickstart.sh
c6b87a205 style(scripts): rename package-release.sh to package_release.sh
7eeb33542 chore(modules): revendor
b0be6e4c9 clusteroperator: Report when OLM reaches "level" and check syncs
6d4af4ce1 fix(csv): properly detect owner conflicts for crds and apiservices
4abff4adb fix(transitionCSV): reorder apiservice resource check
78dd09e4a more event emitting for CSV phase transitions
5526dde6c more event emitting for CSV phase transitions
3700a5ecd fix(contraction): requeue any csv that may need it after operatorgroup expansion/contraction
e707be584 feat(olm): update deployment annotations as soon as the csv annotations are available
c986d6ab6 fix(e2e): fixing e2e test after rebase
0f53418e8 chore(rebase): fix errors from rebasing
58a8184ae fix(opgroup): incorrectly detecting CSVs as "copyable"
f9d906484 fix(operatorgroup): set labels on copied resources correctly
3c89f1439 fix(olm): move csv copying into its own workqueue to free up csv processing
ae0737164 fix(e2e): fix e2e tests for operatorgroups
bb16a4643 refactor(olm): refactor provided api pruning
5434dec4c refactor(olm): simplify CSV copying/pruning
c08c52e28 feat(namespaceSet): add Contains method to namespace set
2259009e0 feat(olm): don't copy csv to operatorgroups if it's not in certain copyable states
b136cf416 fix(olm): delete copied child csvs with no parent annotations
85fe51df3 fix(operatorgroup): annotate all csvs and allow collisions
a0f16e77a fix(olm): delete stale resources after op group change
2024a6214 fix(opgroup): revert order of operatorgroup updates
dad85617c fix(requeue): requeue owners that are referenced with labels
973fb2418 fix(olm): change operator group / CSV requeuing
680f06e07 chore(opgroup): allow selector to be nullable so that marshaller can output an allnamespace operatorgroup
7060f104a remove minishift support
99c2fc603 docs: update CSV link
7622b74f4 feat(test): adds CSV phase reporting for package server
7553d1019 fix(test): fix labelselector pointer
b7d71876e fix(olm): delete api services upon CSV deletion
2046ca519 chore(olm): add debugging logging and handle potential list failure
4725ccdd6 fix(util): fill in GVK info from InferGroupVersionKind
c5877b578 fix(olm): Fix CSVs api-servers battle for ownership of APIServices
e7e7a2632 Make release
6e27f0f3d Add minKubeVersion validation to templates
57c9ef437 chore(manifests): regenerate manifests to include new validation
4ba65f585 fix(operatorgroups): use pointer for labelselector
31d873167 refactor(operatorgroups): bail out after successful namespace update
307e13d6e fix(csv): fix unsupported operatorgroup status update
916de307d test(operatorgroups): add installmode support e2e test
c8aeee46a fix(installmodes): update support logic to match expected behavior
bd5d352d5 fix(packageserver): set packageserver to IfNotPresent
045977b06 fix(load): return an error if a CSV specifies a replacement that doesn't exist
18cc7e4ef fix API validation for OperatorGroup spec
b607311e3 chore(deploy): run release scripts to get view permissions on edit/admin
cda5a387c remove rbac changes to 0.7.1 deploy maniftest
6f062ab11 update aggregate clusterrole to chart template
043151a92 add view rbac to 'admin' and 'edit' default roles
b77478e4a docs(operatorgroups): add more extensive docs
dd7fb76bf fix(packagesever): add missing name field to api definition
0ea74cf6a fix(owners): remove cross-namespace and cluster->namespace ownerrefs
9cef4dd35 add all-in-one yaml and helper script
9a3740171 fix(csv): remove regex on base64 image data
d7222352c fix(csv): icons in csv schema should be an array
9dc027fd2 feat(csv): allow use verb in permissions
cc9908053 Update README.md
9a3902a45 Rename upstream.Dockerfile to upstream-example.Dockerfile
053f32da5 Update docker commands in example to use upstream
e417e1d2b Add authentication to apprclient
9eb34b5fb fix(olm): properly detect cluster operator API
f17f0dd5b feat(catalogsource): allow grpc source types that don't require an image
ccd77162a fix(registry-pods): add everything toleration to registry pods
1c4ddd2a7 Incorporate new binary into docker images
d20b4936e Add appregistry-server binary
c29a6e3cc Add apprclient package that talks to app registry
b570441c7 graceful shutdown for PackageManifest server
9203775f9 fix(manifests): start manifest file names with 0000_50_olm_*
d91217121 Refactor configMap loader to work with appregistry
f1940f847 fix(csv): only allow one CSV per provided API across intersecting operatorgroups
50fbf6458 Add godoc for InstallModeTypes
57a7afcb3 test(registry): add InstallModes to CSV
d31025f10 fix(openapi): add InstallMode definition
925655bcc revendor and run codegen
25d72b41a fix(packagemanifest): Add InstallModes info from CSV to PackageManifest
e8f8655cc fix(olm): Remove the "v" prefix in minKubeVersion if presents
9f912b0e3 fix(e2e): fix instability in test runs
8f14c334e fix(e2e): add MinKubeVersion to helper function
67e3d1ef8 fix(build): remove dep usage
8c9136482 chore(build): make vendor
caf326347 fix(build): update grpc-health-probe for module support
b97a84d42 fix(deploy): Add a component prefix to manifests
2ae16e15f fix(build): make static build work
c178f5d48 chore(modules): update operator-registry module to v1.0.6
d82344597 fix(deploy): fix image references
a65328f14 fix(deploy): set writeStatusName for ocp builds
868528e3c Update README.md
7b7ae8dcb fix(subscriptions): respect startingCSV
ae5c508d3 fix(installplans): only create installplans if something new has been resolved.
b5d0fa058 fix(reconciler): set command in pod spec of registry images
78a126960 chore(olm): run make vendor
975ad4c55 feat(olm): write operator status by default
1d6b495c8 fix(subscriptions): add check for csv manifest dif before applying new installplans
b1fa131ff fix(e2e): ensure all subscriptions are deleted in replacing test
e027882a1 fix(subscriptions): fix race between subscription sync and cache
d6fe1d4db fix(dockerfile): user needs enough access to read from the filesystem
30e6fd6ba fix(permissions): Generate unique Names for permissions
7e5d76415 chore(modules): update version of OLM module and revendor
cbb8b85fb fix link for Package Server CSV
3c8e6ad5a add ownerReference to backing ConfigMap for given CatalogSource
83d7c58b0 fix(catalog): use installplan lister instead of api client
6e29b7ea9 feat(lister): add installplan lister
7dadd63f8 fix(e2e): only select installplans owned by subscriptions
4fc1890f4 feat(catalog/olm): add tracking ids to logging
cc707d518 fix(catalog): remove gate on operatorgroups for resolution
b0d8941aa fix(dockerfile): move configmap-server into path
32550468e test(subscription): update unit tests to use the namespace resolver for subscription tests
7b07a12ca fix(catalog): move write of installplan state from installplan execution into namespace resolution - this prevents races where installplans are created twice.
8f86ad348 fix(installplan): only resolve if there's a subscription in the ns that isn't up to date
8a4121934 fix(installplan): fix bug where too many installplans can be created
46794f8ec fix(cm-reconciler): query for pods to overwrite by CatalogSource label
a8d9c7769 chore(deploy): change 30 prefix to 50
1b9468098 chore(style): run goimports
55438ab31 fix(installplans): add ability to apply Services
047cd1971 fix(test): get kube version from client go for tests
a524d1674 chore(deps): vendor
39cdaad0d fix(catalogsources): omit unhealthy catalogs from resolution
459d86b0a fix(installplan): fix race in installplan resolution
5698be925 fix(e2e): make e2e-local-docker work again
8c89b3464 feat(catalog): add grpc sourcetype to CatalogSources
4a5183c74 fix(registry): service label selector doesn't include resourceversion
eb1de5179 fix(catalog): use a different queue for each namespace
4be186cf6 test(catalog): add e2e test to verify configmap changes are detected
95ed12de6 feat(bundles): add GetBundle request
c146f9abd fix(olm): Provide correct format of kube version in CSV
5288a5ed5 fix(olm): always return a status on minKubeVersion checks
be95cc5a8 Add minimum kube version to CSV & check it against server version
e307808e5 WIP: add new minimum version field for kube
f3b3f36c6 test(validation): add test to verify OLM can use bundles with CRDs with min/max fields
b59f9bd7f fix(bundle): fix CRD conversion with minimum validation field
b5a2b47ea fix(packageserver): don't error out when listing
8ecc5da64 fix(operatorgroups): write out CSV status on OperatorGroup issues
6a46d07b2 chore(deps): update vendor directory
ef58599f5 fix(metrics): create another endpoint for prometheus
92c857223 cut 0.8.1
4c48fe3de fix(deploy): add linux nodeselector
07e1cd7fd fix(operatorgroups): use copied csv for update status
ba067f232 test(unit): fix TestAPIMultiOwnerSet_PopAPIKey tests
a9bdff870 feat(packageserver): consume registry pods
4d1502429 Update metering InstallModes to support SingleNamespace
275186f2b Watch all namespaces in local setup by removing watchedNamespaces in local-values
ede8ca0d9 chore(ci): remove ci checks for PRs
a5c0963fd feat(registry): remove in-mem registry implementation
ef5b2b669 feat(resolver): take all subscriptions into account when resolving
c1c195036 Remove operatorsource installation
506edc8a1 fix(dep): bump olm types so that registry can serve new CSVs
5e6ec00e5 feat(client): expose underlying clients
43b5c8c3e fix 1663113. Add component image ENV vars to cluster-logging-operator fix 1662397. Add permissions to create shared-config roles and bindings
165b3440c update Service Catalog memory & cpu limits
3f68bd4d2 adding csv, crds, package for metering operator
00ee55020 feat(installmodes): add installmodes to templates
406474b17 feat(installmode): add InstallModeSet
7d6753bd3 refactor(operatorgroup): account for TargetNamespace field in updateNamespaceList(...)
022a23a85 feat(csv): add installmodes to CSV spec
574534883 update codegen for 2019
b7174678a fix(configmap-server): switch dockerfile to go 1.10
f276c7bab fix(configmap-server): gvk parsed for owned CRDs incorrectly, so bundles were omitting CRDs
f2c19df89 Updated MongoDB Operator to 0.6
37aaaab06 test(catalog): add an e2e test verifying that the rh-operators catalog starts up correctly
e786106bb fix(crds): remove category all from CRDs
936f30312 refactor(schema): split groupOrName into group and plural fields
99af1d8a3 chore(codegen): run codegen
8724cf751 chore(tools): add golang/protobuf as a tool dep
24203a998 feat(codegen): add container-codegen make rule
5f9b21f63 feat(olm): add message to requirement statuses
03b6ff80d fix(unit): fix tests involving CRD status
50227493c fix(unit): use global logrus logging instance
36ca0f607 Verify CRD's condition to ensure it's registered with k8s API
2213da1bd fix(packages): add sourceNamespace to packages apiserver
780c7da9b requeue dependent subscriptions when a catalog syncs
35cb43134 fix(sub): set subscription to failed if there's no catalogsource
d3f7e2e68 fix(charts): add operator_namespace to run-local values
5d637db1e chore(ci): add OWNERS file
adecf7d47 Install operatorsource crd and default cr
166bdcdc9 increase memory limits on all service catalog pods
85754a591 chore(fake): add fake for registry client
20b0487b0 refactor(Makefile): rename test rule to unit
79a4b1b5e chore(Dockerfile): remove directory check
474834c10 fix(build): enable cgo
9040a39e4 chore(go.sum): regenerate go.sum
324aa4786 feat(make): prevent test caching
bf072023f fix(test): add missing fields to expected bundle
aec9d5950 fix(client): correct package used for healthcheck client
cd5b6d7fb feat(image): add CI compatible Dockerfile
fd5f8758f chore(deps): vendor
d1c52bff6 test(registry): add checks for registry pods
e7fbda496 feat(catalog): use operatorlister in catalog operator
e6a525627 feat(registry): when syncing catalogsources, generate pods that serve the operator registry api for configmaps
d643abb1f feat(catalog): add configmap server image config flag
a338c9d2e feat(api): add registryservice to catalogsource status
3e0e45f64 chore(olm): make use of operator group constants
67653a5c9 fix(olm): don't annotate target namespace on copied CSVs
24e120898 feat(rbac): generate cluster role for viewing CRD for each provided api
4614df31a add 'get' permission for the CRD itself to the created Role
d0f57b81e fix(deploy): fix marketplace manifests
c8d4d3879 fix(health): move health to its own package with the right package name
f4f14e91b feat(health): add gRPC health probe tool to docker images
263d1d506 Add Marketplace csv
77292f514 Creating csv, crd, and packages for clusterlogging and elasticsearch operators
77fc133c7 fix(deploy): add runlevel to openshift-operators
84d2c53ef fix(schema-check): fix schema check error bug and update manifests
93a7f370c feat(csv): make apiservicedefinition pluralname required
0741fe54f refactor(logs): factor out default writer hook setup
07a1114fc feat(configmap-server): write panic and fatal log levels to a termination log - adds `termination-log` flag to `configmap-server` binary to specify termination log path - writes panic and fatal log levels to a termination log
25bfdcca0 feat(registry-server): write panic and fatal log levels to a termination log
10670752d feat(logs): add WriterHook type for splitting log levels between writers
f4e93cf64 fix(go-mod): fix checksum issue with client-go go module
de7a6951c feat(olm): generate clusterroles for provided apis in csv loop and aggregate them to operatorgroup clusterroles
9e88aac5f feat(operatorgroups): don't process CSVs that aren't in an operatorgroup
5543d0032 chore(manifests): regenerate manifests
d62e71aa0 test(packagemanifests): add wait for package-server to be ready
655b10ba3 feat(subscriptions): requeue dependent Subscriptions on CatalogSource sync
df410b47f feat(helm): create helm templates for package-server subscription
5abc4daf3 Updating: adding description to package manifest object - solves ALM-819
9055ba276 add rbac for servicebindings/finalizers
377ec21d4 Make use a valid clusterPermissions rule verb
772f1db38 chore(docs): fix markdown lint warnings
86d4b4d62 docs(arch): add operator groups
98970c61e increase limits for embedded etcd
1a627c1d0 chore(release): switch image-reference tag to operator-lifecycle-manager
e7d66c8f4 use quay.io vs registry.reg-aws.openshift.com
76581508d regen manifests
c5cc09aa0 fix(scripts): clean up all resources when done
0be9286ae feat(deploy): add operator group to watch all namespaces
1640fe921 chore(scripts): add quoting for safer bash
00e70a34e chore(docs): fix up whitespacing
846f1f95f Descheduler operator CRD, CSV
285de2730 fix(e2e): make operator group test more robust
f45a4f45a feat(ci): remove e2e tests from gitlab
31766b91d chore(manifests): make release
5815ef4a6 feat(package-server): self-host package-server with CSV
7e0447ebb fix(e2e): create CSV first to use in CRD ownerref
d1df2b6a2 fix(e2e): use testNamespace for ownedAPIService test
db65feb62 Fix a typo in documentation
4703e7c9a fix panics in package-server
c43cf67b8 fix(e2e): set up variables for non-bare e2e runs
d87b352b7 feat(e2e-bare): add utilities for running olm and e2e locally against a remote cluster
820e9e5a6 feat(make): add e2e command for running from ci-operator
6f3600144 test(csv): use mock-ext-server for owned apiservice e2e test
d201e7396 fix(annotations): merge CSV and pod template annotations instead of replacing
220616c44 fix client-go in gomodules
61ceea9d1 fix(bundle): fix CRD <plural>.<group> parsing
05f4f3cff add packagemanifest:aggregated-apiserver-clusterrole
360ce2fde Add packagemanifest:aggregated-apiserver-clusterrole
c73307e23 feat(operatorgroups): move annotation projection to csv loop
2730daf40 test(operatorgroups): more comprehensive tests of operator group copying and rbac generation behavior
27b195273 fix(e2e): add operator namespace to target ns list
4ad704dd6 fix(unit): account for correct rbac resource parsing
e02bca22b fix(e2e): account for operator group type change
a4fd04eec feat(operatorgroup): create role bindings for operator service accounts in target namespaces
55e67a96a propagate labels from 'CatalogSource' to each 'PackageManifest'
61480a0e3 fix(csv-requeue): requeue on namespace all if all namespaces are watched
ab3883aff fix(olm): create cleanup function for olm deploy mod
5578e8a4e fix(olm): fix RBAC cluster role creation
4e4f50087 chore(olm): add additional debug in requirements
a7ec12e50 fix(olm): add additional validation for operator groups
b0ed43694 feat(olm): use cache listers in olm-operator
097341675 cut 0.8.0
20e6155ee chore(build): remove vendor commands from base dockerfile
1a90ec0c6 chore(release): bump version to 0.8.0
410eae4f9 feat(mocks): generate fakes and mocks in a container
26f089585 fix(rbac): use separate queues for each rbac resource
b9c1b02c5 fix(queueInformers): use separate queue for each namespace
1a4fa284b fix(logging): use structure logging in checkAPIServiceResources
759d9005a chore(olm): remove cleanup func from operator
5af8a7878 remove namespace annotator
ab09d5ab4 fix gomodules (broken by client-go mutating their release tag)
35191e341 chore(ci): remove verify step from gitlab
a26ef5745 feat(container): make container builds faster
5acebac83 chore(codegen): run all codegen in a container
546ca8fc6 chore(deps): switch to go modules
da014b133 feat(csv): detect deployment and requirement changes in Succeeded and Failed phases
934a667b8 use OpenShift's ServiceCatalog build, fix rbac + more
05248e810 Update AMQ logo to new brand standard
fd6d9d41f Fix template values for 'olm' parameters
3ad3d5250 feat(build): allow skipping minikube during local builds
86eedf88c fix(olm): make operator group copy CSVs more efficiently
f095b0cfa fix(olm): remove duplicated code
3bb7e25d5 chore(olm): refactor updateNamespaceList
e7bce974f fix(unit): create OperatorGroups with initial fakes
777e33cd6 chore(docs): update readme with configmap-sever and pkg/client
08ee59ca5 feat(health): add healthcheck endpoint
2de662325 feat(schema): add validators to directory loader
3bc77b9e9 feat(client): add grpc client interface
bcb4ef9b7 feat(bundle): add package/channel name to bundle
eb2ab43a4 chore(deps): switch to go modules
59ca95847 fix(olm): do not check namespace if casting failed
80c876ef8 fix(olm): operator group annotations and listers
33f83dc49 fix(e2e): slightly improves execution time
59d7698eb fix(olm): set event handler functions correctly
c89aa9cbb fix(olm): refactor e2e and check annotations
2e8cd467b WIP: cvs in operator namespace are being annotated, csvs in target namespaces should be annotated
a4ccb4ea9 fix(olm): adds debug logging for operator groups
7af0b4274 feat(olm): detect dangling child csvs in olm operator
7a65c2b84 fix(olm): handle copied CSVs when deletion occurs
48279b413 fix(e2e): update e2e for refactoring
4b5070abf fix(unit): fix race condition
bc96bb9ea fix(unit): set expected owner refs for deployments
c969049c0 refactor(operatorgroup): split apart the larger sync functions
43f64db30 fix(e2e): ensure created objects are deleted
df5b760fc fix(olm): make RBAC creation resilient
552699b61 test(e2e): add second e2e for operator groups
efafe6cc8 fix(unit): call Run on operator directly
24ceed696 test(e2e): add e2e test for operator groups
c12dd0acb fix(olm): make status updates on deployments, not CSVs
090e09169 test(unit): add unit tests for operator groups
2e3b84bba fix(olm): change annotations to be allocation safe
8f954fef8 feat(olm): copy "dummy" CSVs to target namespaces
891f247bf feat(olm): handle required RBAC permissions
c39e3bd0d feat(olm): make namespace updates trigger annotation updates
65fc370a2 chore(olm): rename annotateNamespace to syncNamespace
245092f00 feat(olm): add operator group control loop
e88b05108 feat(olm): add CRD definition for OperatorGroup
81c635217 chore(olm): generated files
9c2e92f3d feat(olm): add OperatorGroup types
6b80c5e4c Add test case for supporting multi-version CRD
a086ddbfb fix(build): add cleanup for package release files
c92d07ede Fix olm pod name so log to be written correctly to olm.log
a686d26c2 fix(olm): set lister up for deployments
927097c9c add 'spec.nativeAPIs' field to CSV and check that native APIs exist before install
dd9d1effa add Service as owned resource for Prometheus/Alertmanager CRDs
2057a5a8f feat(listers): add and use aggregate informer lister
ee5b4ae1a feat(csv): add generated APIService resource check
d35c0e44b fix(ci): cleanup packagemanifest APIService during deploy stop job
63a08e6ff feat(csv): add succeeded to pending transition on cert refresh
4aa3dc9c9 feat(csv): add configurable APIService cert expiration
af7aaef7b feat(apiservices): add APIService adoption logic
c357affb0 refactor(ownerutil): make HasOwnerConflicts generic
4b65ea613 chore(test): bump minikube kube version to 1.12.0
40b9aca47 fix ClusterServiceVersion CRD to allow any descriptor default value
a5b2c7e06 added spec/status descriptors for Dynatrace Operator
09d5d2c67 feat(grpc): enable reflection on grpc endpoints
8e464096f feat(configmap-server): add dockerfile which builds and runs configmap-server
b975d8cb5 feat(configmap-server): add configmap-server binary
16d58cbcc chore(deps): update dependencies for version-config
51bffd94f feat(registry-server): add server binary that speaks grpc
7ccd900bf feat(grpc): adds basic gRPC interface to querier
18e518dce emit events when setting CSV phase
29fe5db4d Add `assign` verb to csv crd
a3db7f955 chore(release): cut release 0.7.4
9b2995211 add ConfigMap as an owned resource for Prometheus CR
197e96843 [Doc] Add note about helm binary requirement
4145a1806 chore(release): bump version number to 0.7.4
7b8b4d965 feat(load/query): support provided APIs that are apiservices
e3c57bf55 chore(deps): depend on latest OLM
78cd6aef2 feat(configmap): add configmap loader
2d79c5e74 fix(e2e): switch to port 5443 for owned apiservice test
762b71f4c chore(e2e): change package port to 5443
b404cbf8d fix(olm): don't annotate namespaces on operator creation
082cc655d feat(deploy): add debug variable to all deployments
c18a09fe6 fix(package-server): make secure port configurable and default to 5443
68ea1a40c chore(package-server): enable auth by default
c7f7d014f pass annotations from CSVs to associated PackageManifest
6ce20c55d adding more spec/status descriptors for CouchbaseCluster
993bfaf65 fix(metrics): use CRD client instead of k8s
383ecd915 Update OKD install instructions
05a785a87 fix(requirements): add CRD served version requirement check
11fb00bf5 fix(requirements): add support for non resource url rules
2134f0bc8 rewrite 'metadata.namespace' of global PackageManifests
5ca5dff37 bump olm version to 0.7.3
8d1dc0cdf chore(deploy): remove unneeded dockerfiles
bec794bc3 fix(csv): make invalid install strategy transition from pending to failed
3deda8696 fix(requirements): remove extra empty permission requirement statuses
c7002dc28 Add missing nonResourceURL verbs to csv validation
860d44536 cut 0.7.2
78d575e32 chore(deploy): update release scripts to not use 3 different images
fb851e585 chore(deploy): put all binaries in the same image
c402e10fc add 'catalogSourceDisplayName' to PackageManifest status
8105c238f fix(ci): use deployment namespace as catalog_namespace
50272f783 Small log statement fix
d62c141af chore(deps): remove unneeded dependencies
33c3455fd chore(pkg): make more like a kube-style go package
cee0231ed feat(query): open db as immutable for querying
5c4df7f1d feat(query): add query interface and refactor tables
57c11c154 feat(load): add package and channel loading
f1543cde6 refactor(store): add storage abstraction
853ef172f feat(loader): create basic loader that puts csvs and bundles into a sqllite db
812dfaceb Initial commit
42db65951 chore(deploy): use runlevel label on namespace
01ad7f88e docs(apiservices): add some detail on APIServices in CSVs
ffc9f1ffa feat(svcat): add service-catalog manifests
ccc90f8c1 feat(csv): install owned APIServices
80d5d4d72 chore(deploy): Add runlevels to release
576bd7f97 chore(ci): Use a single Dockerfile for ci
a4e548c1e Make use a valid clusterPermissions rule verb
ba4c536a2 Remove explain 'annotations' and 'replaces'
79f74adf3 add example and additional info about optional CSV metadata  (replaces, annotations, labels, selectors)
b6eb190be return PackageManifests from 'global' namespace
10e333f6f fix 30_14-imagestream.yaml formatting
5f4124db2 add 'spec.provider' to Federation CSV
0720b00da Update registry unit test for FederationV2
0c5f96f9d Split out FederationV2 CRD file into many files
2f423feeb Update FederationV2 CSV to add spec fields
d9d694c89 rh-operators: add FederationV2 v0.0.2
577a4fc82 Add missing binary to fix run-local-shift
a6a89d1a7 fix(deploy): add base images for ci-operator
90ea442dc Dropping label for origin releasepayload
372ccfda7 implement watch for PackageManifest resource
228bcfd4b feat(package-server): add minimal watch
f6d7f7bc4 fix(build): don't vendor
32849e132 change go build to use 1.10
bf4a190a1 fix(submodules): remove submodules
84df81088 fix(deploy): only use replace on configmaps
442b1efcb Revert "fix(deploy): remove package-server until ci-operator is outputting the package-server tag"
86dfcb241 fix(deploy): remove package-server until ci-operator is outputting the package-server tag
7a6397510 fix(deploy): yaml error in imagereferences
9810bc424 fix(deploy) rename image stream to `image_references`
9c2407f17 Add manifests to dockerfile
d8d886adf re-cut 0.7.1
ad49bfffb docs(rule_checker): update hasOwnerConflicts comment wording
c4c1daa7d test(rule_checker): wait for informers to sync before continuing tests
db157196f refactor(olm): use SharedIndexInformer listers for RBAC resources
8ec2872c7 docs(rule_checker): add reasoning note to hasOwnerConflicts method
f786d5ad0 chore(dep): constrain k8s.io/kubernetes to the release-1.11 branch
4bee692f0 chore(comments): correct comment mistakes
d93643dc7 test(deployment): remove/refactor tests expecting RBAC installation
5de6abb67 chore(code_gen): regen mocks and openapi
9f786750a refactor(olm): add DependentStatus message field
96c41c543 test(csv_e2e): add e2e tests for permission requirements
4bb2ddf53 feat(olm): add ClusterRole/Binding requirement checking
4db66160f refactor(rule_checker): move rule_checker to install package
015b67ee4 feat(permissions): add RBAC permissions as CSV requirement
4282e8606 refine cluster-admin OLM workflow
4687eae95 certified-operators: rectify form of business for Dynatrace
19b060924 test(installplan): test clusterrole and clusterrolebinding resolution
907830ea5 refactor(resolver): move step resolution to resolver package
728b77743 feat(catalog): resolve ClusterPermissions on CSVs as part of an installplan resolution
9895763b2 feat(deploy): add clusterPermissions to CSV
3078c946f fix(deploy): update upstream release
df5006c58 fix(ci): don't create namespace (it's in the chart now)
cc7ba87e7 cut 0.7.1
e04dec6bc feat(ci): push tags to quay
438f78da0 re-cut 0.7.0
201b9be82 chore(deploy): add package server to release scripts
db0185040 Issue #469 update the service catalog instruction for minishift.
4a10ee634 fix(olm): don't both checking for GVK in discovery for CRDs
7febb04bd feat(e2e): use newNginxInstallStrategy helper to clean up csv e2e tests
07ffd1cc0 test(olm): add e2e tests for depending on apiservices
81230fd72 test(olm): add unit tests for depending on apiservices
17b25b08a feat(olm): check for the existence of required APIServices before installing
033abf478 chore(deps): add kube-aggregator to get APIService types
2794c3a1b feat(apiservices): add support in CSV for apiservices
725a0cc69 chore(catalog): remove TODO comment
00d077b6c chore(mocks): regen client mocks
57eca037a refactor(resolver): rename resolved RBAC resources
4fd31ca37 feat(catalog): add OwnerRef patching for ServiceAccounts, Roles, and RoleBindings
21585d6f0 feat(operatorclient): add Role and RoleBinding clients
65d2c98f5 fix(catalog): update OwnerReferences with stored CSV UIDs
b9d21d166 refactor(installplan): move scheme build to init
7b685f654 feat(resolver): generate UIDs for freshly resolved CSVs
8b87f1bf2 fix(catalog): handle creation of RBAC resources in plan execution
b5a4713fa test(catalog): add e2e test for InstallPlan RBAC resolution/execution
8094fc49e feat(installplan): resolve RBAC resources during InstallPlan resolution
a2d5f4eac feat(installplan): enable creating step resources from runtime.Object
32cfc26ec return all 'PackageManifests' for 'all-namespaces'
d2eab9cf6 feat(olm): add metrics
0e4167295 Documentation: Change to full path
14b3482ef Create OWNERS
b6e34b70b Improvements on the MongoDB Enterprise Operator CSV.
113407d06 List out options for Descriptors
e7cfbac65 test(e2e): add OwnerReference GC behavior test
73a292419 style(e2e): re-order imports
9245fe5e8 cut 0.7.0 release
bb8f78305 feat(deploy): update makefile to generate deploy artifacts for okd
e140db8ea cut 0.7.0 images
07e3fb437 fix(vendor): revendor dependencies
780ce7c75 feat(olm): attempt to cleanup namespace annotations on shutdown
1ddf8b5ab fix(scripts): short-circuit up to length 1 running pipelines
e6c8b7258 style(scripts): snake_case is_head function
55786a805 fix(ci): move wait-in-queue job before deploy-preview
427da0761 feat(ci): add wait in queue job to test_setup stage
2f8a379d9 feat(scripts): add pipeline queue wait script
fc5d4626f fix(e2e): update prometheus channel
5764db8e2 rh-operators: use preview as channel for Prometheus
5402a4c69 rh-operators: use preview as channel for AMQ
621f218cf certified-operators: use preview as channel for Dynatrace
efcfc1a6f certified-operators: use preview as channel for MongoDB
92c39c7e1 certified-operators: use preview as channel for Couchbase
542e4c5f8 certified-operators: add double spaces in Mongo markdown
84c08e330 certified-operators: fix Mongo markdown lists
67402a8e5 certified-operators: add required parameters for MongoDB
d09dde676 certified-operators: add required parameters for Dynatrace
4f8eb35d8 certified-operators: add required parameters for Couchbase
793e813b0 Fix certified operators packages csv refs
4423d7afc include certified-operators catalog in deploy on CI
8420ccf4d Update directory loader test for amq-streams
ed31d09f2 certified-operators: update Dynatrace version
1f68e32f4 certified-operators: add Dynatrace CSV + CRD
c7126206b certified-operators: add Couchbase CSV + CRD
3f440bfc6 certified-operators: add MongoDB CSV + CRDs
7797a6643 rh-operators: add AMQ Streams CSV + CRDs
051f57e7d feat(catalog): add aggregated roles for each crd we resolve
0a608ad7e fix(reststorage): start with empty slice when filtering
db3942765 feat(inmem): collect CSV data in PackageManifestStatus
77cee5d03 chore(server): remove commented packages
94935273b test(e2e): use CSVDescription in expected PackageManifestStatus
66bd1bd4a chore(openapi): regenerate openapi spec
b7cacfab5 feat(packagemanifest): add CSVDescription to PackageManifest
2267c5ac0 fix(build): add OLM_VERSION file and .git directory to e2e.Dockerfile
1eeb7b32d test(packagemanifest): add fetch function for packagemanifests
9eb5b27c9 test(e2e): add logging to TestPackageManifestLoading
a66cb8fb4 fix(charts): change cert secret mount path
b4fd5c712 fix(charts): change default package-server internal port value to 443
c57cd7365 fix(charts): update expected package-server chart value name
49fdd3f24 refactor(charts): use olm-operator-serviceaccount for package-server
4d97b9bac fix(charts): correct indentation
39f009bb7 fix(charts): add missing coreos pull secret
3c5621d13 fix(scripts): uncomment cleanup
0cc75e2fd feat(ci): add package-server to ci
d01ba48da feat(scripts): add package-server to build scripts
698832f56 feat(docker): add package-server to Dockerfiles
2e527c6d4 feat(reststorage): return NotFoundError if manifest not found
b74429868 fix(provider): don't use pointer in manifest selection loop
e7f4f99c1 feat(package-server): add debug flag
7c29094cb fix(package-server): surface cobra flags to package level
8555e6cb8 feat(package-server): add run-local package-server helm values
c677e3b99 test(package-server): add basic e2e test
7dcd3763a feat(deploy): update package-server templates
3d9744815 fix(inmem): change struct tags
978e9fed1 refactor(packagemanifest): move all package data to status
b37b5821d chore(package-server): remove and ignore local config
5ee54cd3c feat(package-server): enable openapi
dd56ae77a feat(package-server): adds skeleton of package server
bd3d54fd7 fix(prometheus): add securityContext to alertmanager example
85108765a Recommend installing OLM with `kubectl create` instead of `kubectl apply`
8b1abe1a2 docs: update broken link
81d09f937 docs: text -> label
36ea39607 docs: move desc to bottom
530bc0518 docs: add CSV guide
56ff27a19 fix(build): remove GOOS and GOARCH settings
52b5296e9 feat(build): add version injection to go test build
acc784adf style(flags): change version output format
0f90e0009 fix(build): point version build ldflag to correct package path
5b503d2a6 feat(cmd): add version flags
7c93f7155 chore(osbs): remove unused Dockerfile.single
78b9b0a7b feat(run_console_local): add docker pull for console image
c19ac11a0 fix console script to work with both Linux and MacOS
ee48d103e chore(broker): remove servicebroker from CI
8dcd2a8c7 chore(rbac): add olm-specific ClusterRole
94b3b30f7 Remove outdated install instructions
9e7956d19 remove non-go references to broker
62dadcee2 prune dependencies via dep ensure
dde0a7e48 fix(servicebroker): remove broker from repository
c108aea18 chore(deploy): remove ansible scripts for install
d4741172a feat(osbs): add non-multistage docker build
76dd0dbd0 fix(scripts): allow use of existing KUBECONFIG env var
ad56ecc22 chore(catalog): rename ocs -> rh-operators
68f1a9e91 chore(rbac): remove view verbs from edit role
59ad7e3cf chore(prometheus): remove namespaceSelector from ServiceMonitor
2c211124a fix(scripts): make cp cross-platform
6acd8a48c chore(api): move non-generated apiclients out of the api dir
07b5110ac add script and instructions for running OpenShift console
97b27fab3 fix(Dockerfile): fix catalog copy typo
ab70f7dba fix(Dockerfile): add catalog bin to final docker image
2256df73c chore(ci): update gitlab-ci.jsonnet to reflect Dockerfile name change
bb59bfdb5 refactor(Dockerfile): make Dockerfile.rhel7 OSBS compliant
31e3eba25 chore(dep): vendor dependencies
4125547c2 updated prometheus csv according to the integration into openshift
6b80809d5 test(e2e): add catalog loading between operator restart test
5d9e452eb add actionDescriptors block
b23c8efe6 feat(subscription): add dedicated currentCSV field to subscription status
2203111f4 fix(catalog): add check for loaded catalogs
439256825 fix(operatorclient): remove wait for deployment rollout
374290c40 set 'status' on Subscription when 'spec.source' is invalid
6a7518a31 fix(e2e): remove deployment cleanup
3f4e27e07 refactor(operatorclient): remove error return in deployment poll
4491d8403 fix(operatorclient): return error from infinite deployment poll
6b4d2eba7 test(e2e): add wait for deletion during OLM cleanup
bf4a14a1f fix(catalog): ensure pre-existing check does not interfere with upgrades
c60ae953e refactor(resolver): incorporate custom error type
cb588e9c5 feat(catalog): add namespace awareness to plan execution
b8a269e99 feat(controllers): add custom error type for multiple existing CRD owners
27edc7317 style(operator_test): reorder import statements
7cb66c4ee refactor(catalog): return early from sync catalog
1c4bcb219 test(e2e): add deferred global cleanup calls to subscription tests
c14bc66c7 fix(e2e): move log after nil check
ad7caa09f fix(ocs): reduce prometheus requested resources
1d420641a fix(olm): restrict deployment watches to the watched namespaces of the operator
b71a302ca feat(operators): log which queue items are coming from
9efec1a28 test(e2e): remove cleanupOLM calls
745e5f78a refactor(catalog): only load in-mem when a change is detected
58feeb875 test(installplan): add helper functions for building test CSVs
7c1b83953 fix(catalog): correct sync logic to accept catalog spec changes
1187ed015 test(catalog): add wait for catalog sync to e2e tests
0719e0326 refactor(catalog): enable status subresource
0474469ac test(catalog): add catalog source sync unit tests
380940256 refactor(types): remove Hash field from ConfigMapResourceReference
1fb79a741 feat(catalog): add catalog status block updates
387f164ba fix(e2e): re-enable prometheus test
602285003 chore(rbac): update roles to include resources
4cf17efb4 chore(rbac): list out verbs in edit role
668805c04 update 0.6.0 release
db9a9f07a fix(ocs): add securityContext to prometheus example
cfdedb7b5 chore(deploy): update 0.6.0 for okd
111a95643 fix(ocs): update prometheus operator
c69496bb3 Fixes #416
197bde49b Make key resources linkable in philosophy doc
b317a5eb2 cut 0.6.0
9de59fd19 style(resolver): remove nesting from owner CSV selection logic
9f6c1d6e9 refactor(catalog): remove map-based subscription caching
1743c95c5 chore(dep): re-vendor with dep stable
cd85776a8 feat(resolver): add namespace and channel awareness
cf617c20f chore(docs): update docs for newer types
84868ef46 chore(ci): update catalognamespace for olm
0f1bbb332 fix(e2e): don't use vault in e2e tests
2d4b06951 chore(ci): disable teamui deploy
039988967 chore(catalog): update prometheus deployment for 0.22.2
391c5928b fix(catalog_versions_test): test all releases
78547f8c3 chore(deploy): remove tectonic-alm-operator
517f061d1 chore(deploy): remove old catalog entries
8f5525034 chore(vendor): remove vendor directory
662609500 fix(e2e): use fetchinstallplan in subscription tests
08af520eb chore(e2e): delete duplicated test from merging
295d802cd refactor(opclient): remove fake operatorclient
38f4c25d1 fix(olm): re-enable a requeue
de2752e7a chore(fmt): order imports correctly
ea9bf4e92 fix(e2e): update fetchSubscription call to new use version
ab97ddc1c feat(deploy): add OLM type access to aggregated cluster roles
c8ec51dbf fix(csv): delete csvs immediately
83d17c7b0 feat(subscriptions): pick up installplan changes more quickly
2660204eb chore(logs): add debug logs if item can't be found in index
3376c3cba fix(deploy): key the rolebinding to the namespace so that serviceaccount won't lose its access when a new binding is created
0f8bfd5a5 fix(e2e): clear existing CSVs before running subscription tests
4a6ed5c60 fix(installplan_e2e): add deferred cleanup calls to installplan e2e tests
e4985b308 fix(subscription_e2e): ensure subscriptions are completely cleaned up
607b52f9d fix(subscription_e2e): add check and wait for subscription status
1e023d067 fix(cvs_e2e_test): move old serviceaccount existence check
e39f55bbe wip(olm): fix leaks
98d38f7ed chore(api): update apps/v1beta2 to apps/v1
9c9e4533e fix(subscriptions): don't update subscription when there are no status changes
d05219d5f feat(olm): set up watches on deployments so that csv status can be updated more frequently
60010413e chore(tests): remove old mock-based tests in favor of fakes
e31534859 chore(tests): rewrite TestIsBeingReplaced with fakes
1d7360b12 chore(tests): rewrite TestIsReplacing with fakes
95c72be4c fix(olm): add fixes for GC optimization
06920b014 wip(olm): add failing upgrade csv test
07a2812b1 minor: broken link
c481d2225 chore(deploy): update deployment resources to use apps/v1
5c2a51aef chore(api): bump deployments from apps/v1beta2 to apps/v1
c606b220c update 'urn:alm:descriptor:com.tectonic.ui:selector' to use GroupVersionKind
f2a205b0b chore(ocs): Update to prometheus 0.22.2 but disable e2e test
6b8ff7cf0 feat(makefile): allow running a single e2e test from the make command
6d88c5f00 chore(e2e): switch to using the versioned clients in e2e tests
4abf88438 feat(api): migrate apis to common group and regen apis/clients
27800d810 fix(csv): update CatalogSource for 1.11
b5f088377 fix(catalog): update Subscription control loops for 1.11
f72e9f948 fix(csv): update Subscription for 1.11
4e4368cf9 fix(catalogs): remove outdated EtcdCluster validation
a7d7dd653 fix(catalog): update InstallPlan control loops for 1.11
95c2f5802 fix(catalogs): update catalog data to use ClusterServiceVersion
28ab3c373 fix(ip): update InstallPlan for 1.11
e7072f953 fix(olm): update ClusterServiceVersion control loops for 1.11
a9e652fff fix(csv): update ClusterServiceVersion for 1.11
bbd1255b3 fix(build_local): don't start minikube if already running
608913485 fix(csv): k8sjson encoders don't properly omitempty on json.RawMessage serialization.
097c4f2f2 fix(crds): update CRDs to validate in 1.11 (versions field now required)
44a72746e chore(codegen): update codegen for 1.11
0194241fe chore(deps): update k8s libs to 1.11 versions
036ae5481 chore(catalog_versions): remove extra lines in import
f9c8f2339 test(catalog_versions): add resolveCatalogs test for catlogs in each version
ee0196f45 refactor(resolver): make resolved step logging more helpful
0ff6cfd45 add 'spec.sourceNamespace' to the Subscription CRD validation block
0105c944c docs: add access control workflow
ca90d23aa fix(ci): deploy files to ci cluster in order
32d8e90f6 fix(makefile): fix run-local and run-local-shift
a1486e2cb fix(e2e): update prometheus serviceaccount
f10bc0f90 fix(make): fix local e2e
e211d3e23 fix(e2e): update e2e prometheus test for 0.22.0
2edc560a6 fix(deploy): put prometheus in ocs catalog
351cb3d88 fix(ci): update ci to use replace
d2dda9d52 deploy/chart: bump prometheus to 0.22.1
8cbffb90a feat(catalog_resources): add prometheus 0.22.0
03124436a test(installplan_e2e): change main package name to avoid conflicts
271600231 style(catalog): add missing semicolon to log
bfe9ac670 fix(catalog): remove required CRD existence check for service additions
b749aac27 test(installplan_e2e): add multi source install test
4f27e0baa test(util): add internal catalog source creation helper function
31dc52771 Fix invalid `minishift start` option in install_local_shift.sh
3a66ebc5e chore(ci): update gitlab-ci.yml from jsonnet
3cdcbf16a fix(installplan): type InstallPlan.Status.CatalogSources to []string for backwards compatibility
bfd82e638 chore(ci): update gitlab-ci.yml from jsonnet
8910b0f54 need to use 'operator-lifecycle-manager' namespace but ffctl is broked
a17754f00 fix(subscriptions_test): replace single source resolver with multi source
e21e79ec2 refactor(resolver): accept prioritized list of source refs as a parameter
03f8b6a04 refactor(catalog): change parameters of getPrefferedSourceKey to take a source snapshot
d93c54b8b fix(e2e-local): remove extra RBAC config on minikube start (default in newer kubeadm versions)
c549f66c7 fix(e2e): apply charts from templates directory
d01ac8c39 refactor(InstallPlan): add source name and namespace to install plan custom resource
a92fe931e refactor(catalog): limit sources snapshot to global and install plan namespaces
9e3df88a0 feat(catalog): add catalog and catalog namespace to install plan spec
bb8078868 feat(catalog): add helper method to get preferred source key from plan owning subscription
9545f2152 feat(registry): add subscription key type
d5769bfb8 test(resolve): decouple expected results from test input
bbcf01ca1 refactor(resolver): return used catalog sources slice from ResolveInstallPlan
9e743b3f4 chore(registry): dedupe to in comment
9354895a0 refactor(InstallPlan): use registry.SourceKey to keep track of used CatalogSources
4d69b3cfa chore(.gitignore): remove vscode file exceptions
f632f4010 fix(resolver): set resolved csv namespace to plan namespace in MultiSourceResolver
eae597485 feat(catalog): use MultiSourceResolver in catalog operator
c7b14e40f test(resolver): add tests for MultiSourceResolver
3c7d33482 refactor(catalog): add helper method for getting a sources snapshot
0d6bb9c47 refactor(resolver): remove extra functions from DependencyResolver interface
1a45332bf feat(resolver): add CatalogSourceNamespace field to StepResource struct
1165abfab vendor: re-run `dep ensure`
25511b20b cut 0.5.0 release
50c897e3a feat(release): build a release package from a tag
91c38ab3d fix SingleSourceResolver to use plan namespace for resolved CSVs
06b50db63 refactor catalogLabel to catalogLabelKey
325261689 fix namespace used for CatalogSource lookup
abe61f64f refactor resolver to be in separate package
3b182f3bc refactor interface method parameters
50490e0e3 fix remove .vscode/launch.json
654e93e88 remove test for MultiDependencyResolver
bddbf013c add test for step resource catalog source
b3c455587 add DependencyResolver interface and SingleSourceResolver implementation
d23e85a8f refactor interface method parameters
6b40120fc fix remove .vscode/launch.json from .gitignore explicit include
16589abea fix remove .vscode/launch.json
543c64122 remove test for MultiDependencyResolver
4d003a0e3 fix CatalogSourceStatus.ConfigMapResourceReference json struct tag spelling
980db9111 add test for step resource catalog source
6b8b5ff57 add DependencyResolver interface and SingleSourceResolver implementation
cff0db1a3 add 'spec.catalogNamespace' field to Subscription-v1
bd7b58c2f fix catalog_namespace for deploying to OpenShift
e55a60890 deploy to TeamUI's OpenShift cluster
b36fd16a0 fix(docs): correct spelling of philosopy.md
17ffa434b fix(docs): typos in architecture.md
250af4476 feat(olm-operator): prevent a CSV from installing if there is another CSV in the namespace that owns the same CRD, but isn't being replaced.
a2108bf9a Fix a small typo
a5c8eacfd add checks for runaway control loops in e2e tests
3daf90d41 fix(servicebroker): add main_test.go to servicebroker cmd
2348ddff2 fix(make): fixes run-local and run-local-shift
da4468ecc fixed panic(err) calls
dd623f1e1 check upgrade path per package directory
075c815aa changed filepath for pragmas
910b7f3f3 remove testing.T from manifest validation files
54dd79093 moved schema validation
9c6b98db0 chore(deps): remove tectonic-operators as a dependency
2bba14a79 feat(operatorclient): add minimal operatorclient types
194bd8c65 fix(make): set version var for run-local
94418b29d make 'InstallPlanPhaseInstalling' come before 'InstallPlanPhaseRequiresApproval'
caf34fd70 added docs for RequiresApproval phase
868a28ecc readme: fix broken link to CSV example
363c84034 fix(catalog): catalogsources should only read from their configured namespace, not all namespaces
d5d05c0c0 fix(catalog): release memory after loading catalog
b801bfc8d fix(ansible): make sure git submodules are checked out before ansible build
79ca1dc62 feat(build): add rhel build
d7d7a1177 chore(deploy): add openshift_ansible as a submodule in order to symlink lib_openshift and lib_utils
ce3b229f4 chore(deploy): add ansible playbook for deploying OLM
7d00b5e89 feat(ownerutil): update ownerutil to infer GVK for OLM types
c879cc35d fix(subscriptions): directly include apiversion/kind of created resource
c9dce1d7d fix(e2e): make e2e local scripts work again
3fc0a8d3d Fix the deploy to kubernetes command in install.md
fc6a7a7a5 do not update Subscription-v1 if nothing has changed
d1b6e23d2 chore(deploy): add upstream release and deployment pipeline
f9768c04c chore(build): use helm to template the catalog files in
8b1f7ee9d chore(deploy): which catalogs get included in a release is configurable
89fbf9a1d feat(servicebroker): list one serviceclass per package
9ad912554 fix(ci): codegen needs apimachinary to not be pruned
17f6121c2 chore(deps): update servicebroker for newer servicebroker libs
1f3d81f5a chore(deps): commit vendored dependencies so that project can be built by people without access to tectonic-operators
f6e8e3342 fix(e2e): fix local e2e scripts
9783645f9 test(e2e): add e2e test for Subscription/installPlanApproval
4ad6c1f0b feat(subscription): installPlanApproval field
b9e80e193 implement manual approval of install plans
e6810e636 strip Markdown from descriptions for OSB
222d82960 fix(servicebroker): reverse map check bool order
fade2fc00 test(servicebroker): check validatation of broker api version endpoint
4e49b72ee fix(apiserver): fixes rebase problems also removes the apiserver tests, which are empty
41f65aaff fix(apiserver): update imports
d11988b8c fix(servicebroker/types): dedup description
a97ea1654 fix(servicebroker/types): set bindable to false on serviceplans
ad074103e fix(servicebroker/types): use link url for support url in serviceclasses
a285b5402 fix(servicebroker): grab namespace from interface object
f156b318e chore(servicebroker): update types from broker libs
bcdc69033 feat(servicebroker): display icons and pretty names in catalog
92af257ed fix(servicebroker/apiserver): use un-normalized CSV name
7daa34551 temp(servicebroker/apiserver): log debug lines
d21077bc5 wip(broker/sources): implement LastOperation handler logic
5923fe185 fix(ci): fix e2e test runner
7f8419538 fix(makefile): add build-coverage command back for e2e testing
f93bfac38 feat(ci): multi-stage builds and verify codegen and catalog during build
bb724dfbe chore(ci): simplify container builds
54905993b fix(makefile): fix release scripts
b9fe8395c fix(deploy): chart naming after rebase
d1d8c984f fix(makefile): support ocs and ccomponent catalogs
6adef178e fix(makefile): always build targets so that dockerfile builds work
75314ee29 fix(broker): use updated imports for osb
e3c90bcde fix(makefile): xargs working cross-platform
dcfa5355e chore(deps): update lockfile
0aededa15 chore(rename): fix path in catalog version tests
e788c53cc fix(Makefile): update makefile recipes for rearrangement
e4a207468 chore(servicebroker/apiserver): update broker interface types
44e654018 chore(Makefile): add target to run e2e with minishift
b51858ba6 fix(deploy/chart/templates/01-alm-operator.serviceaccount): specify pullsecret
fcded45ae rearrange(deploy/chart/templates): create secret before clusterservicebroker obj
9f32512ea fix(.): update scripts with e2e dir move
792d366c1 fix(Makefile): codegen clients correctly
11b0fd0f2 chore(*): update github repo org
2f270b789 chore(makefile): clean up build
faf8375dc fix(Makefile): add '-' back to flag (rebase fix)
3a2416e86 feat(deploy): add servicebroker templates
5746da11f feat(broker): add service broker service for alm
499afff02 fixup(api/client/util): return err instead of panicking
84498f5fd use environment variable for TEAMUI_HOST
19f0b8263 use InstallCheckFailed instead of DependenciesConflict
d6e77454b s/ALM/OLM for Slack webhook
93eaddc6d Update manifests for 0.4.0 release
0ed1cf517 fix(catalog): pull secrets are no longer needed for vault and chargeback
a7f943afe Update README.md
bd6b73565 Update README.md
9f4b4027c Update architecture.md
24bc4f7d4 chore(rename): ALM -> OLM in design docs
19adb6066 Add simple install instructions for using a released OLM
72d4974f5 chore(rename): rename ALM -> OLM in install docs
19e95d9cf Remove unneeded install steps (minikube fix and pull secret)
45cc1d27d chore(rename): rename quay.io/coreos/alm -> quay.io/coreos/olm
3f8dc2891 readme: restrict SVG height
5721eed44 added intro for framework
edc68169a fix(ci): update paths in dockerfiles
a0e81f0b3 chore(codegen): run codegen on renamed codebase
4d7d550e7 chore(rename): rename alm -> operator-lifecycle-manager
0ba0253dd chore(ci): update ci to use new operator-lifecycle-manager repo
8a40137cf Add pipeline status to readme
2a2ddebaa Update readme
7c5b7c638 *: add code of conduct 
0133f3c7e re-cut 0.4.0
1176500c9 fix(e2e): same deployment install strategy shouldn't change label selectors, which are immutable
2a4ea0533 fix(ci): better names for e2e test objects
0200909b7 fix(e2e): generate different label selectors for test deployments
73f48f7cb fix(e2e): use different csv names for each test case
63fee6903 fix(ci): don't error if serviceaccount is already patched
f6d3ec674 fix(subscriptions): startingCSV is not required
13eedc74a fix(rename): coreos-inc -> coreos
3b6dfcb15 fix(ci): vendor in sanity check to remove codegen error
64b49f0f3 fix(e2e): use name of catalogsource instead of name of configmap
9ab4a6e66 fix(deploy): update x-operator version to one that supports CRs
408c98dad fix(deploy): use DeleteAndRecreate strategy for CatalogSource updates
3b5db85c8 fix(deploy): catalogsources should have different names
6f9c8c7f5 fix(deploy): put catalogsources in catalog namespace, not hardcoded to tectonic system
41f95a011 remove generation of catalogsources from catalog/main
a0b72c722 write out both ocs and component catalogsources
f2ce7b1c1 update catalog version test to handle multiple catalogs
3b9f54ecc split catalogs into OCS and cluster components, package 0.4.0
6843afc77 chore(Gopkg.lock): update dependencies
230b40367 chore(*): update github repo org
594320503 Review docs for outdated information
4a46dd1cf move Slack webhook URL to environment variable
e29a3f463 catalog: update etcd-operator to 0.9.2
f77ed56e5 fix(ci): switch to short sha for naming
2ddf08d73 fix(ci): update failfast namespace for new ci cluster
c2396d176 do not update Subscription-v1 if unmodified
1b3b603e3 add bill of materials
fd26e1adf add Apache 2.0 License
f39bb583f fix(ci): change $SHA8 gitlab var to new $CI_COMMIT_SHA
fa8d8e1d7 fix(ci): update docker host path
43288c869 removed UICatalogEntry-v1
1a00232a1 added docs for Subscription control loop
1d3949357 fix(e2e/subscription): update import paths
ccdb1e7d9 chore(Makefile): clean up all test files
2609e6b36 refactor(e2e/subscriptions): add cleanup fns
f1fcf6db9 test(e2e): test subscriptions control loops
dfd51c10e chore(.gitlab): use commit sha in ns
81b35edce refactor Subscription control loop to only call Update() once
51278d5f7 fix Slack notification
5190d338d fix Slack notification webhook in CI
84e87486c send Slack update when deploying to Team UI cluster
49546168a GitLab CI deploys to Team UI cluster watching all namespaces
3e204955b modify GitLab CI to deploy master branch to Team UI cluster
8a9ad12a0 fix example YAML
29c97d309 fix subscriptions being stuck in UpgradePending state
f65c33a94 chore(.gitignore): ignore all generated resources
34127a659 set Subscription 'status.state'
2814325a6 refactor(tests): split source and calculate coverage over non-generated code.
686eecd4e docs(development.md): encourage test running after dependency update
56eeea37a fix(ci): pull common variable out into vars.libsonnet
42044973e test(e2e): add coverage generation to e2e tests
94f02c00f fix(tests): update tests to use the new client fakes
2c9bc4052 refactor(clients): switch to using generated apiclients
bb1f39afa feat(ci): add sanity check step which does basic verification before building the images
9a980093a fix(ci): update fmt-ci to handle multiple files
879f8ae61 feat(ci): run verify-codegen and verify-catalog before building
ab3b4a853 remove gocoverutil, go 1.10 coverage tools can aggregate coverage now
0e55de464 switch to go 1.10
db6b96d25 fix(e2e): fix invalid CSV in e2e test
e6fde0804 fix(catalog_resources): update deployment specs for 1.9
a628f9ce7 fix(makefile): separate vet and docs testing
ee0851e39 fix(e2e): use newer apiversions
82470a72f Add $(DEP) as prereq to vendor make commands
59e34092e Switch references from glide to dep
a9104b930 Generate clients with code-generator
9cf4b9e71 Update api usage to 1.9 apis
92704e89b Update api usage for 1.9
529d0db00 switch to k8s.io/code-generator
4bbb40f27 Switch to dep and update dependencies
df945292c update ALM templates with correct JSON schema
5ff5cb62e fix subscription status
0a6f63510 Cut 0.3.1
dba789582 add annotations for example custom resources to CSV
abd4db71d Update install instructions and add a `make run-local-shift` command to run locally in minishift.
54caa1e24 update csv requirements
f806d1cb4 fix(crds): nest csv, uice, sub, and installplan validation under "spec"
cb2f61710 fix(crds): nest catalogsource validation under "spec"
47dd92950 cut 0.3.0-5
e33db7287 cut 0.3.0-4
a401495eb cut 0.3.0-3
a06451b82 clean up during e2e tests
ff0c05956 Remove vault podstatus descriptor
961c4d3f6 Add prometheus 0.14.0 and update 0.3.0 release of alm
e4d985385 feat(operators/catalog): label resolved CSVs and CRDs with the catalog source they come from
fdf467182 fix(operators/catalog): set phase to failed when resolution fails and enable the e2e test for it
90ea9b8a7 catalog: update etcd-operator to 0.9.0
2649b50e7 hack(ownerutil): hardcode groupkindversion for ownerreferences to CSV
508d7de9f fix(install/deployment): use ownerreferences when checking for SAs
8d86ec12b refactor(uicatalogentry): minor renaming / refactoring
93a225841 e2e test for uicatalogentry updates and pruning
a437bce4d Prune old UICatalogEntries from the cluster on catalog sync
dc789396f When a watched object is deleted, purge it from the queue
2c43f0070 fix(client/installplan): use correct resource name
18dc0affa catalog operator ensures labels on Subscriptions
ca9789ae0 fix(alm/operator): don't update the status timestamp if we aren't transitioning
2a20b2c5e catalog: update vault-operator to 0.1.9
ed5cdae7d Fix chargeback e2e test
e96dc5816 Fix e2e test reporting in gitlab
befb6dfff Update images for 0.3.0
6d8f959ab fix imports
92230e644 fix(catalog): add tests for compatibility between versions of the catalog configmap and fix the errors that the tests revealed
4df53d390 cut 0.3.0
eb43a1383 add alm-catalog label to Vault CSV
f59cd0f12 Revert changes to labels/match labels on the deployments
ac872b1fb fix(pkg/client/installplan): only set name if provided
58c4f231f fix(operators/catalog): don't update catalogsource status when processed
fd6948338 fix(operators/catalog): don't share informers between installplan and subscriptions
12bd02664 pkg/registry: Update tests for Chargeback
3f1249351 catalog_resources: Add Chargeback resources to catalog
a5e86df9b fix(operators/catalog/subscription): specify csv in installplan (duh)
682f736eb fix(apis/uicatalogentry,subscription): set list items to correct type
d055915f8 fix logs in e2e tests
6a3753b75 Add package loading to catalog directory loader (only used for tests)
78b1b279c Add additional logging to catalog loading
b9e83e77b Fix makefile build directive
4c5f5b751 Remove `replaces` from prometheus operator since we don't have an older version
217bf7dd4 fix(apis/subscription): correct meta in List obj
750cf4ed0 fix(operators/catalog): use the right plural name to list subscriptions
08884b64d Switch from gomock to counterfeiter and update tests
b430e12ec feat(operators/catalog): standardize to UTC time
97b42de74 fixup(apis/subscription): use the sane json tag
cc3f2b29d chore(zz_generated.mock*): regenerate code for k8s types
833e86ef9 chore(.gitlab-ci): ignore not found errors on delete
436502185 feat(operators/catalog/subscription): use startcsv if specified
f94f23981 fixup(subscriptions): use CurrentCSV in status block
e22af3da0 test(operators/catalog/subscriptions): test lastupdate times
5abb528b4 fix(operator/catalog/operator): ensure safe concurrent map access
2bb164e4a fix(operator/catalog/operator): update queueinformer fun signature
c9132b48b fixup(operators/catalog/subscription): store apiversion/kind info
1509eee14 test(operators/catalog/subscriptions): ensure installplan existence checked
0d399fb31 fixup(subscriptions): check for installplan existance
2e5700adb fixup(operators/catalog/subscriptions): regen mocks and such
8f07e3510 chore(operators/catalog): generate mock catalog
45725cbb5 test(operators/catalog/subscriptions): add unit tests
7fa8321f9 fix(operators/catalog/subscriptions): save subscription
aecdd376e chore(operators/catalog): generate mock clients for subscription tests
2ebf1e111 chore(**/zz_generated.mock_*): update mocks
c7c45203c feat(operators/catalog/subscriptions): add subscription ctrl loop
0888ca77a feat(subscription): save install reference
9922e4ef9 feat(pkg/client/installplan): add create method
956217442 feat(pkg/client/subscription): wrap subscription ops in client
226ddce54 feat(apis/subscription): add subscription crd back in
c5dd8c29b Add package metadata to UICatalogEntries
4e8d25920 Update philosopy.md
22eb68587 catalog: update etcd-operator to 0.8.3
2c511b072 e2e: Load catalog entries from the in-cluster catalog and verify they  install
03aa72130 Requeue more often when we know we can shortcut a resync
bbfd7cf11 Add a doc on tracing errors through from ALM resources
fead9d149 Minor renaming / refactoring
624401d39 Refactor e2e test utils
f89f6711f Port drive design docs to the repo
ae7a328a6 Add docs on GCing and the new packaging format
35463b1c9 Fix e2e tests
904ebf401 Only query for csvsInNamespace once per loop
634aae599 Add requeuing logic to simplify state handling
1365bb1f2 e2e tests for CSV upgrades
2c04a95e3 Clean up old CSVs if they're successfully replaced.
280269bd6 Don't queue up delete events (we take no actions for any of them)
05242e5dc catalog: update etcd-operator 0.8.2 and vault-operator 0.1.8
588d3f895 Update packaging for vault and etcd to use the new package format
101505cd1 catalog_resources: add etcd backup/restore operator and bump up etcd/vault operator version
c6f78ed31 Implement ListLatestCSVsForCRD, which finds the latest CSV holding a CRD, per channel
d08554284 Add concept of packages to catalog, for tracking of services at a grouped level
87bb06ff9 better description for EtcdCluster in Vault CSV to drive UI
785a2da51 add spec descriptor for ResourceRequirements for etcd
cff77eb40 modify spec descriptors for Prometheus OCS
66a511262 Use generate unique name for e2e job
cb003b061 Rename and export FindReplacementCSVForName method
2c1778093 Remove references to Service Name in catalog
a82badb22 Don't use helm upgrade
32137bc9e Move all scripts to /scripts
bc5e7154a Seperate update-catalog into its own script
f9d34fdbf Update e2e tests to run in separate cluster
f6ac082f0 CD to separate cluster
1016b59af Cleanup Catalog interface in prep for fixing how we handle service names
f39c27046 add labels to OCS catalog ClusterServiceVersion templates
265c661f4 add visibility annotation to catalog resources
5abc89166 move build catalog script to hack/
3f64f6bca fix whitespace stripping from configmap generation
efb7fab9b deploy/TAO: use stable release of x-operator
2d8e689b3 update EtcdCluster s/service/serviceName
472e92f8f chore(.gitignore): ignore test artifacts
fce062f24 chore(Makefile): remove vendor update from e2e-local
2ebe712b8 style(buiild_catalog_configmap.sh): trim trailing whitespace
68ba7ea6a test(e2e): test catalog entries visibility set correctly
790d1dfb0 style(catalog_resources): add newline at end of file
9b7dbd571 feat(catalog/uicatalogentries): add label via csv annotation for visiblity
a022f0ae9 Consolidate vault operator version references
507014eca Add errors package to vendored dependencies
4ea3d4af3 Add readme for tests
c24afe788 Add note for running single test
81c9205ec Add test ensuring Vault cluster is created with etcd pods
f8b23f4c1 Cleanup
182e3fbaa Add failed InstallPlan phase and skip test for it
3f302d165 Refactor InstallPlan fetching and allow passing an anonymous checker function
801931dee Add test for creating InstallPlans with invalid CSV names
23382b230 Add test for creating InstallPlans with invalid CSV names without a Failed plan state
bab2e24ae Add test for creating InstallPlans from UICatalogEntry list
f5128701d Adds test for expected UICatalogEntries
546a48ec2 Add the ability to run a single test
5799be2a8 fix(package-release): use gnu compatible cp options
ddb3356a7 Tag e2e test container with latest when master builds
3a8c21629 Take $NAMESPACE as an argument for updating the catalog
b9f63ffe6 Put jq script for convert to tap format into a separate file
312798ec9 Containerize e2e testing and output TAP format
076c69558 catalog: fix inconsistent header size
df5651396 catalog: fix markdown formatting/rendering
fe9eecc43 [e2e] Add a test for InstallPlans with  manual approval
3c8e22d78 Release alm 0.2.1
608fb47e2 Fix parameter count comparisons
f58c9bb3f Bump vault OCS version
0ed9cf51b remove alpha files
5349127f8 Add docs for packaging
21fa5c5ed Fix catalog resource tests and remove samples
281e3e75f Add packaging script to generate x-operator manifests
61bb093a6 rename chart directory to "chart"
b904f44e5 operators/catalog: only add catalogsources once
4a4798bb9 Update 0.2.0 manifests
6167b5c7c Update etcd-operator
f576758b9 Update alm versions in 0.2.0 release
a39745b80 operators/catalog: add Type field to copied Secret
a690fa00e Update etcd and prometheus to latest operator versions
b0c91cf94 update Vault OCS SHA w/ make update-catalog
b81582bbd run 'make update-catalog' for ALM-316
4e7f05062 reorder CRD resources to correctly match ownerrefs
e694cfe6d run codegen for ALM-316
fa204a9e7 add resources to Operator CSVs to complete the ownerref chain
8b8d4b40b add 'resources' block to ClusterServiceVersion types
9848a321b Remove catalogsource cr from helm chart (catalog creates it on start)
3b6f9afc6 tectonic-alm-operator: bump operator SHAs
7a0dde528 operators/catalog: only copy secret data
cefb160e5 Update the OCS to pick up the latest changes
5b5f4a2e5 Fix the defective CSV schema
1383b475a Fix up the alm_resources install directory
c4251a38d Update manifests for v0.2.0.
9e78175bb Copy over the resource for the 0.1.2 release and renumber
a0fbef077 Don't use full apiversion as resource name in CSV client
99aabd7f5 Remove incomplete e2e test
df705b24f Fix nil pointer error in CatalogSourceClient
f4e13b325 Add catalog source to helm chart
c4163044a helm: add configmap
ae6921d48 glide: bump lock file
f03292c37 install: add CatalogSource CRD
06ae38ff4 cmd/catalog: bootstrap OCS catalog
9b14c85c1 operators/catalog: rename aceClient uiceClient
3036dc2e6 operators/catalog: fix grammar in comments
1954e0631 operators/catalog: support secrets in InstallPlans
a68258310 Update OCS configmap
65f7bf3e4 update Vault ClusterServiceVersion
3d0e32ef7 for posterity
675ef4936 Refactor install strategy deployment check
de1ba79d8 CSV upgrades: look for deployments by name, upgrade any with the same name in the new CSV, delete any that are in the old but not the new, create any that are in the new but not the old.
d35a90cc4 feat(*): specify objectmeta for CSV to replace
255877f7c test(pkg/client/deployment): add serviceaccount tests
0b6aa0bc4 refactor(pkg/client/deployment): use operator-client service account fns directly
77282a019 Add resources blocks for the CRDs defined in the OCS
f66cf399c Fix typo in CSV schema
eea242edb Properly label all resources that will be managed by x-operator
1f1b680ae Prepare test cluster with CatalogSource CRD
3afc0f031 Rename AlphaCatalogEntry to UICatalogEntry
36279ae9a Fixes for the Catalog configmap generator
defc572ed Add the OCS catalog as a ConfigMap
d31260a5b operators/catalog: return error instead of fatal
826ea5136 operators/catalog: init CatalogSource control loop
b812e70f0 fix Prometheus specDescriptors
5a75f4203 Add a config map loader for catalog sources
3f66ad2ea catalog: link to OCS user docs
5c892b826 catalog: beta -> alpha
b0560a994 catalog: update OCS descriptions
6cf87e688 add more spec descriptors for Prometheus CRDs
24e2dbb12 Update prometheusoperator.clusterserviceversion.yaml
cbc39d4b1 Add prometheus role
7dff085ab Add a catalogsource client with create and update function
0380fecd2 Tiny fix to use a const to set the CSV CRD name
6ed4e9706 Remove URL from catalogsource CRD until we have a remote catalog type
13c1d7f85 Set catalog namespace when deploying for preview
989a30bf6 Fix runtime panic due to client-go changes in new operator-client version
105fe43c3 Support both kube-1.7 and kube-1.8 in deploy charts
fdd0f03cc Update to tectonic-operators
0ae6887e5 Throw error when validating resources if asked to validate a kind we don't handle
b071dd1fb Add local e2e testing scripts and an example e2e test
864647d96 chart: Remove unused ClusterRole and make catalog namespace configurable
76a7ba8f9 Refactor installplan name into constant
e42e7fd83 Update all catalog resources with the new CSV format
2efc9ca19 fix(pkg/install/deployment): compare deps by name/ownerref only
126028e00 fix(pkg/operators/alm/operator): put correct error in status on install failure
2b687dfc5 Add cluster size status descriptor to prometheus
c8a2704bf test(pkg/install/deployment): create suite of table tests
531d6bd28 test(pkg/install/deployment): make more explicit tests
705110b18 refactor(pkg/install/deployment): break up install function
43d4803e1 fix(pkg/install): use Create*OrUpdate*Deployment
17eeee9f8 style(pkg/install/deployment_test): remove unnecessary struct init
ecf714e56 refactor(pkg/install/deployment): use semantic comparision
413c0deff fix(pkg/client/deployment): use cascading delete for deployments
efffa7d92 style(pkg/client/deployment): add newline b/w functions
077e973c5 hack(install/deployment): make current tests for dep updates pass
bd1744651 fix(install/deployment_test): use correct type in array
a9b227ae1 feat(install/deployment): create or update or delete deployments
7b3eb97ad feat(install/deployment): check deployments installed by name/spec
ed593bc8d feat(client/deployment_install): create OR update deployment by name
a34819087 feat(install/deployment): create consistent dep names
3cdd68632 catalogsource: add metadata fields
1ca09c108 catalogsource: add omitempty tags
ae24fbb09 installplan: add catalogSources to status
b0757e8c7 catalog: init ocs catalog source resource
0b61b810f catalogsource: add k8s interface codegen
1f42090f7 init catalogsource type
b354c75a6 remove placeholder statusDescriptors
5258e579f Update appversion.yaml
c1e38eade TAO: README w/ tectonic-operators build instructions
e3a22ea4d tectonic-alm-operator: bump operator image SHAs
a1c5c315b tectonic-alm-operator: copy v0.1.1 to v0.1.2
e1d164e76 Swap namespace/name in annotation so that they match the env vars
459680e23 add version to deployment ownerReference
dec2fc26c alpha: explicitly pass manifests directory
e6fb23c7c x-operator: build image based on alpine x-operator
d534db1f2 x-operator: fix CSV CRD schema in v0.1.1 manifests
b71c1e7ca alpha: bump v0.1.1
8f8908909 alpha: init
2f924f289 deploy: cut v0.1.1 tectonic-alm-operator
344fcb925 deploy: copy v0.1.0 manifests to v0.1.1
d3d38c941 Fix generate-mock-client to generate from/into the pkg directory
9046613b0 Add missing dependency tools to the DEVELOPMENT file
8039a3888 pkg/catalog/directory_loader.go: skip hidden nodes
a03db1ed8 style(cmd/alm): format usage string on flag better
adf2cf45d refactor(alm/operator): clarify watched namespaces
7a0a9f89e fix(alm/operator): use non-wrapped client
a79dd39e3 fix(Makefile): make 'all' the default target
9d0cc0425 refactor(alm): pass in annotations from main
aa7bd3a96 style(alm/operator): simplify variable name
49c4f136c style(alm/operator): rename function args
b297c38f9 fix(alm/operator): watch all namespaces if none provided
6ca4bfe0c fix+refactor(pkg/operators/alm): watch specific namespaces only
0bbd6734e feat(pkg/annotator,pkg/operators/alm): add control loop for annotating namespaces
7eb7997a6 rearrange(pkg/annotater->pkg/annotator): spell annotator correctly
3c421922e allow icon to be empty in CSV
6096d77f6 chore(apis/csv): regenerate api objects
89359b89e Fixes clusterserviceversion schema
c15dc45bf docs/architecture: add control loop details
f8900df14 docs/design: add manual install stub
e0f5fc74d docs/design: add architecture doc and fix readme
214e1a1af docs/design: delete stale design docs
0d286d41a docs/design: delete old mocks
c64bb7716 docs/install: remove coreos-pull-secret
c32dd09b4 Update install docs for the cut branch of Console
359ce53c9 add SpecDescriptors to ClusterServiceVersion
40d3139dc Add the required resources to let x-operator install ALM in minikube
4da37ff6a Add a specialization of the x-operator for ALM
d51f448e2 README: add quay badge
05b9a3637 style(*): alias core/v1 import everywhere as corev1
59fc735d3 refactor(installplan): abstract away conditions array in status
3c8e268cf style(catalog): use consistent import names
64a973aec test(pkg/apis/installplan/v1alpha1/types): test setting conditions in status
ad89d6392 refactor(pkg/operators/catalog): explicitly switch on err to set conditions
c51fe6311 chore(apis/installplan/v1alpha1/types): use conditions instead of phase in status
a45cfd4b8 README: fix install link and JIRA link
5c550caa5 Test our catalog resources for consistency
3f2651a05 Adjust CSV status descriptors for Vault to reflect new status block
e7664d5cc Update alm/catalog images in install resources
56449cc44 Remove commented code
620f7b53f Fix namespace labelling bug
da0a83367 Move code into /pkg and create coverage report
2a0ae297c Add more unit tests
d41cee464 Add "coverage" (html) and "cover" (cli) commands, update to exclude mocks
390466790 Add various shortNames to the various CRDs
3be03c819 Change maintainers and add useful links to our CSVs
8e336c313 Update etcd Cluster CSV to have it display real status information
e2bcc7862 spellcheck
8bf4159a4 Fix catalog resources
a81f24207 Refactor deployment strategy client + naming fixes
2c01e155b Deploy install strategy: Add tests for error cases
3008cf157 Add tests for deployment install strategy with role generation
a0719aa9f Refactor install strategies
bebc30076 Switch to patch for updating namespace
7c4bc0512 Annotate namespaces on ALM operator start
1398a2429 apis/installplan: test JSON manifest on StepRes
5cc41d6cf operators/catalog: test creation of dependent CRDs
a3f97f43e operators/catalog: s/CreatePlan/ResolvePlan
747bc9e5a apis/csv: fix nondeterminism in GetAllCRDDescs
cdb61ea81 operators/catalog: refactor and table-testify
67566c234 apis/installplan: add StepResource constructors
45fa62f89 apis/csv: rename GetAllCrds and table test
b559bea5a csv/customresourcedefinitions: add version and kind
a904d2f6f test(client/alphacatalogentry): refactor tests into table fmt
b1d59a84b fix(apis/clusterserviceversion): correct json tag
0999e77e3 wip
ac4c2d8ca test(client/alphacatalogclient): more thoroughly test update cases
08c692918 test(client/alphacatalogentry): test error case
9810213ad test(client/alphacatalogentry): test upsert behavior
0adb952fb test(client/alphacatalogentry): add test machinery
8107f25c7 Update alm and catalog images to latest
1d46d2f45 catalog: resources should use correct sha256 image names
63c25443b alm/operator: Add a test for transitioning to pending if component goes unhealthy
45ff9b877 alm/operator: check if resource has gone missing and replace it if so
bb3b9aa7a remove pull secret from install
c5f9bb6c2 fix(catalog/alphacatalogentries): set sync status correctly
cbec3997d test(catalog): test store sync
a2eb3f62f Update etcd and vault to latest releases
b651f109e Update install.md
3af0e65db Set ownerreferences on all objects created from install strategy
5619f85ef Add omittempty to fields on CSV
f61bb87f3 fix(client/alphacatalogentry): use put not patch
e262f54da doc(catalog): add debug lines
ee7bd4146 style(client/alphaservicecatalog): remove nested ifs
701c00a1c feat(client/alphacatalogentry): patch existing catalogentries
6ae1fc13f WIP
f8f27fdfe refactor(cmd/catalog/main): clean up file
16824272a Install instructions for ALM + Bridge locally with minikube
8d362fa0d Add serviceaccount for vault
58bba6153 (temporarily) use dev versions of vault and etcd operator
3e420d0f4 Update catalog resource labelling
bdb10b70f apis/csv: make OwnsCRD a CSV method
a654189aa operators/catalog: decouple phases from logic
10f39d462 queueinformer: move MockListWatcher
ab2f2c6a8 operators/catalog: table-driven csvOwnsCRD test
2099aacee Add command for generating coverage report
2d71dba20 Update install instructions
ee3420c56 Update rendered yamls for installation
ed9f3fbd1 Update prometheus defintions
9f24cf1b9 doc(control-loops): update CRD name to InstallPlan
b106dce31 Update prometheus
4e0806c23 Better naming and log levels
4d00d9fc9 Update prometheus CSV to 0.14.0
c66895406 InstallPlanList should be a list of InstallPlans, not InstallPlanSpecs
940a0c528 wait for caches to sync before processing queue
9ac472ac6 Prometheus CSV should use the same serviceaccount in permissions and deployment
e0abb4dbd Better log messages on catalog operator
66f32b798 Add entry matcher for alphacatalogentry client tests
a99fb05bb Restore alphacatalogentry test
e79f3769f Switch to log.Fatalf
dca4ee0a5 Update vault CSV to point to latest version, and use coreos-pull-secret
1840452d3 Fix operator tests
d7e703eb9 Ignore if alphacatalogentry exists
c88e66a04 If AlphaCatalogEntry exists, update with a put
93b5a4c43 re-enable alphacatalogentry generation
e8dcb9de9 Installplan should resolve to objects in the same namespace
4631ca47c Serialize resolved resources as json
0a5cff653 Fix operator loop
fb2917cbf Add logging to installplan resolution
6e0fb8f20 Add more logging to queueinformer
7d97811a8 Add more logging to catalog operator
2c337cf01 Update installplan types
a034a8434 don't generate alphacatalogentries for now
f4b7a9477 Ignore if catalog entries exist
c9cefa7b9 Delete/recreate alphacatalog entries
1df9ac708 Update even if there's a transition error
2c39416da Patch don't put
7e799d6d2 Set initial phase to planning on installplan
58e9a72cc Fix alphacatalogentry api calls
1a5693c3d Install alphacatalogentries into configured namespace
1bf0a87b5 Add logging to alphacatalogclient
6facb06d1 Return early if no error creating resources
0b52863f2 create AlphaCatalogEntry if it doesn't exist
bda30d238 Update catalog resources for self-consistancy
bbebdce26 Add more descriptive errors
2653dfbc4 add catalog files to container
9ee3656d3 catalog: more logging
711248cc9 Load catalog resources into cluster as AlphaCatalogEntries
f59759b77 Create alphacatalogentry on deploy
0dcf06218 Fix vet error
bb64463d2 test(operators/catalog): add ListServices method to test impl of interface
fea5f52f3 test(catalog/alphacatalogentries): fix test mocks
e79b47be7 fix(catalog/alphacatalogentries): correct pt/receiver types'
c74fcba99 test(alphacatalogentries): test catalog sync
c85632ced chore(mock_alphacatalogentry_client): generate mock
6a8896f85 feat(catalog,client/alphacatalogentry): sync catalog to CRs functionality
8e20f82b4 feat(catalog/types,mem): add method on interface for listing all services
8ca885420 operators/catalog: add multi-source TODO
061ca277e operators/catalog: transition to install phase
061d28a78 makefile: generate installplan mocks
4a873601c makefile: add gen-all command and run
c803ac260 operators/catalog: init installing a plan
5bb648ab9 Load in memory catalog from a directory
a9bb74a2b Add CSV to install plan resolution
c47878196 Fix tests
2d3a4ddc0 feat(operators/catalog/install_plan.go): adding resources to install plan
15aed12b0 apis/csv: add missing provider field
c710a88ac Add prometheus and vault catalog resources
05db140ed Add catalog resources directory and test catalog resources
49770e000 test(catalog/mem): sort CSVs returned by version
59f555dab chore(catalog/mem): update data types
2f5c2cac1 test(catalog): simplify tests
1308bb5f8 doc(catalog/mem): update comments
ed4418e49 feat(catalog/manifest): add loading manifests from file
d70c252ac test(catalog/mem): test basic catalog fns
3b2415ab8 Update regex for resolved etcd cluster
15eabb81c Fix tests
c005f8902 Update etcd resource permissions
88ebc7ae0 Fix sync
d1db0d1e6 Remove unused config mount
38446bce4 Fix rebase
e2b17ea35 Dob't create serviceaccount if it already exists
a704f37bb Fix role creation
bd53114a3 Log error when install fails
4c77cb46a Validate that example CSVs can be parsed into CSV type
1db49526d Rename capability -> descriptor
f154e458d Add implementation of permissions generation for CSVs
0c1237352 Add permissions block to install strategy on CSV
6c62f169d Update CSV types and parsing to match new CRD description design
c0c199f58 Move labels -> template/labels for CRDs
0c1cb783a Rename x-alm-capabilities -> x-descriptors
3d664e2d0 Move output definitions to CSV and move output values to status block
6dbcd1c3d operators/alm: replace config map with flags
e7dcc1689 ci: add missing pre-step for catalog
778a6a9e0 helm/gitlab: add new deployment for catalog
bf2fde6d3 operators: init installplan operator
a37d12678 installplan: fix inconsistent samples
886fa6435 Update etcd installplan to match schema
080361953 chore(catalog/mem): update fns for mem catalog
6f75a2c0f refactor(catalog/types): shorten interface fn names
4b742e819 temp
8e74e359f refactor(catalog): embed ClusterServiceVersion spec in AlphaCatalogEntrySpec
dd3f07b90 feat(catalog): map CSVs to the versions they replace
68071da7b style(catalog/mem): use variadic fn arg variable names
f261fccda refactor(catalog): rename in-memory golang maps catalog implementation
0debb3a0a refactor(catalog): rename fn to remove ambiguity
7d8b19e5f style(catalog/mem): order import blocks
0288a79ba style(catalog/mem): use explicit key/vals for struct
099d721c3 refactor(catalog/mem): remove sources subpackage, enforce interface
5aa5f294d feat(catalog/sources/mem): add simple catalog implementation
3265de347 installplan: add types for Install Plan Status
1144aabfe Fix rebase
5d751fcad Fix rebase issues
1b20c558a use return instead of break in switch
b257b7f0a Fix icon parsing
87706f290 Add full state transition tests for clusterserviceversion status
595593b10 Refactor phase transitions for clarity and testability
b36cc7ec7 Update codegen
95f6fd6db Fix typos
a6c96bd86 Fix CSV type (deprecated fields)
3e3a65b32 Add missing return from phase transition caused double install
052910bb2 Use switch for phases
3fba6d318 Check if deployment is installed before attempting install
b47c5af16 Update etcd cluster crd to be versioned
c3e42f555 Adds a state transition test
14ceef52a Add mock alm operator for testing
f1a980d87 towards a mock alm operator
23e510c90 Write conditions to status during state transitions
bcf7ad8dc Add conditions as a history of state transitions to csv status
a9b5df197 Resolve rebase conflicts
e1e23bf4d Write requirement status back to status block
43344c92f Cleanup phase transitions
128b9726b Only check for CRD existance
74805fb08 Update gitlab pipeline
8920a0828 sketch out phase transitions
ee5c9bb50 Check for phase before attempting to install
ddd75b83e Add ClusterServiceVersionStatus
6948be17b Add schema for ClusterServiceVersion status
c333b65c2 Look for requirements in same namespace as ClusterServiceVersion is defined
84e2cadea Move config handling to its own package
1961aa00b doc(vault.alphacatalogentry): fix sample name
3b41d59cf fix(alphacatalogentry): regen code for alphacatalogentry types
ef1dc178a fix(alphacatalogentry.crd.yaml): add names
7a8580f66 doc(catalogsource.yaml): remove example catalogsource resource defs
672a1efe0 doc(vault.alphacatalogentry): add vault catalog entry example
bdb8d0262 doc(alphacatalogentry.yaml): create CRD yaml
a3b1fa2c2 feat(alphacatalogentry): add provider field
f3dfa01b1 refactor(apis/catalogsource): remove for now
5e45d1ddb doc(catalogsource): remove extraneous comment
94454bfac refactor(apptype->alphacatalogentry): rename crd for catalog
452439011 feat(apis/apptype): add back in apptype crds
7c2500b22 chore(catalogsource): only have one url per src
13c2fc89f feat(catalogsource): update spec for console to consume
409a9aec5 feat(apis/catalogsource): add new CRD for catalog
cfd483677 style(catalog/mem): use variadic fn arg variable names
fd6a29639 refactor(catalog): rename in-memory golang maps catalog implementation
b76868e00 refactor(catalog): rename fn to remove ambiguity
bfc0ed0ac style(catalog/mem): order import blocks
623569bbc style(catalog/mem): use explicit key/vals for struct
e80807a54 refactor(catalog/mem): remove sources subpackage, enforce interface
915bd0e1e feat(catalog/sources/mem): add simple catalog implementation
be31fa525 gitlab: run glide install in test stage
137aa0d4c Revert "Merge pull request #86 from jzelinskie/ci-uniq-base"
c9c63b6fd feat(alm,install): adding in owner reference to deployment
9a58d6bbd gitlab: base image now unique per git ref
a4bd736e6 Add tests to validate object metadata
8c39859d9 csv: add json tags to CRDs
6236f0e0f init Required/Owned CRDs for CSVs
dd1fc7224 fix(cmd): fixed config parsing
2ab07117f fix samples to reflect new updates
7f5e83fd6 Rename InstallDeclaration -> InstallPlan
ef30e8282 fix validation of approval types
fd12b8680 remove apptype from codegen
96d8df57c add initial ownedCRDs field to CSV
657431f7d fix apiVersion for etcd installplan
ac3d76d32 move Approval type into installplan
c73543aba add dashes back to apigroups
bfac2fbef add install plan validation
44205bd66 subscription: fix apptype references
95757422b fix inconsistencies
59908332b capitalize approval types
22aee6531 s/update only/update-only/
448bfb4a7 s/desired// && s/cloud/cluster
53450305e installplan: add approvals
21b885bb5 installplan: add RequiresReview status
55c455202 samples/installplan: remove inconsistencies
b25b67b67 installplan: refactor status
1f612577f installplan/v1alpha1: add spec
284b2855e installplan: add status.status field
35fe128ba samples: add status for installplan
f7c4bef81 init installplan
5616422e2 Remove AppType and merge its fields with ClusterServiceVersion
e3a0a62fa Merge apptype into clusterserviceversion (examples only)
d3b58016b Remove namespaces from requirements
09216cec7 refactor(catalog/mock->catalog/sources/mem)): organize catalog types
bf6b79575 feat(deploy): add in config map
1c92f598c fix merge of namespacing PR
84ba58a64 feat(alm): adding in namespace list support
5a0de06f9 refactor(client/{opver->clusterserviceversion}_client): rename file
7a7946d3d refactor(catalog->planner): rename component
b5d4834bf refactor(appcache): use new crd name ClusterServiceVersion
1b1e687db refactor(subscriptions): change pkg name and remove unused mock
d160ebab9 feat(appcache/mock): add simple implementation of appcache interface
02ecf1055 refactor(appcache/types): use simpler name for interface method
104b78717 wip(subscriptions): remove logic for now
78be96063 refactor(subscriptions): rename to installplan
9d9b80e0d feat(apis/catalogsource): remove for now
ae62b493a rearrange(subscriptions): move out of catalog pkg
2b632f60b feat(catalog/types): simplify interface
52e30a2e5 feat(appcache): add interface for app catalog cache
e8f97bd4f rearrange(apis): rename installdeclaration as installplan
4c68167f5 feat(catalog): use k8s typed objects
48d445803 feat(hack|apis): codegen new types
9bbf19ceb feat(apis/installdeclaration): add installdeclaration crd types
0d1cb901d feat(apis): add catalogsource crd type
64b3e75bc feat(apis/subscription): add cdr structs
d6b347f4a fix(catalog): fix type inconsistencies
b474582d9 test(catalog): finish memCatalog mock implementation
1e1237cf6 fix(catalog): change fn arg to ptr type
77508acac doc(catalog): comment on functions
57701228f doc(catalog): add comment on temporary type decl
7bbebc1d9 refactor(catalog): move resolve dependencies to catalog interface
6907f970a test(catalog/subscribe): add empty test file
43cef7d4e WIP(v2 catalog): update for new control loops pt 1
93889211d WIP(catalog): sketch out loop ops
01bbf53a7 Fix tests
2306e06bd Fix apiversions and naming
a14e729ad Add prometheus example (has multiple resources)
d1909e888 Add a newline
e435bf229 Namespaced examples
87ddda3ff WIP namespace samples
ae2a89c1c Don't install self-hosted in install instructions
88679b971 Namespace alm
57050f3ea Fix api versions
edd50d350 Inline instructions
42564ac66 Update etcd examples
3b9087d1e Fix etcd operatorversion sample so that pod starts
601c01cfc update samples for UI testing
00f73ba96 Add sourceType and secretName to CatalogSource
9c46f2eec Add example resources for Subscription and CatalogSource
b9fa8a7c9 feat(alm): added in check for requirements
7634b012c Fix deployment test
e4cefe9fd Rename operator -> queueinformer Add queueinformer registration function
4d4cfcd71 Rename ControlLoop -> QueueInformer
27dee133c Formatting fixes
34bc9b9c1 Add codegen for runtime.Object deepcopy methods
d8b31dc44 Factor out common operator functionality into a parent Operator and ControlLoop object
e5f426c05 Move opver client to its own package
d4a120632 Refactor install strategies
f4c675e25 Move opver api registration to apis package, rename alm.go to operator.go remove unused interfaces move apptype type declarations to their own api package
351b067f7 init v1alpha package for OperatorVersion
616171c79 doc(control-loops): fix typo
af7d58c96 attempt to fix dependencies
420b8cd61 Update control-loops.md
bfc715d42 Update control-loops.md
d3f2256d5 Update control-loops.md
41728518d makefile: add -i flag to `go build`
782baa0ab Add testing framework for testing sample resources
a1ae656f0 glide: update operator-client
8d4624350 rename operator -> installstrategies
3ad865fa9 Check for existing managed deployment before installing new one
69d550261 Remove vendor from `make build`
f4a007d8f Update gitlab
1aeb4ca32 Add hack for GKE plus some formatting fixes
bdf97f20b Fix imports
9d736e7ff Add logs on successful install
df9d353f0 WIP: can't use unstructured for subtypes
c325aa295 WIP: can't use unstructured for subtypes
1d7f07269 Register ListKind properly
38d739125 Add api registration for operatorversion
865a592b2 Create a new client for watching OperatorVersions
beb27a9c2 Fix watching operatorversions
c6e95ead5 Fix operatorversion reference
3315b7a93 Install OperatorVersion and AppType before ALM
9de7b0b09 Fix serviceaccount
d71bf92ea Fix merge conflict in operatorversion
c058bdb08 Add CRDs and serviceaccount to helm chart
5cc44ed72 Control loop runs install strategy Also `cmd` will run operator
99f55c397 Gitlab-ci with jsonnet lib
9836a8d72 Update helm-chart
34f52bfd0 Add deepcopy methods to `OperatorVersionResource`
af9689681 Fix glide.yaml
caa783ffe Add WIP glide
cbb514e94 Add coreosbot credentials
6f1e38f34 Vendor before test
5f4d2a5ba Fix dependencies
b8eef3d5e doc(scheme/loader): comment on function not for prod
0b1d069a2 style(installers): format imports by type
0ec025daa rearrange(installers): organize pkgs better
935080fcb feat(schema/loader): add util to load CRD from file
855531003 feat(operatorinstaller): add initial deployment strategy
593e79bd7 rearrange(alm/types): remove unnecessary interfaces files
7104b537b Add install strategies
3860743bf Update example.vaultservice.yaml
0e81b93f1 docs: update walkthrough with validated resources
df7cc0969 Change replaces to a direct resource reference instead of a version
b1cc63cf8 Better formatting for outputs
9a879da4b Add displayName to outputs
acd595d98 Move outputs to an annotation and add displayName and description
6c13d7fb8 Add install instructions and make samples kubectlable again
efaf40012 feat(alm): adding in basic operator version watch
c78b1965e Change to `alm-owner-`
49cd41cf8 Add labels to propagate in addition to labels to match
c5a11eb2d Add labels for AppType
f1a592e30 Add labels and selectors
b4fc772d8 add  field to examples
9de811b72 fix apiVersion in samples
8e6304655 Update loops
835248845 Remove ALM-managed upgrade option
29dee2f52 Fix typo
73df421db Split loops by piece of software, and add upgrade and GC loop descriptions
c6887f77d Add explicit creation note to `AppType` loop
c28ea2367 Update control loops to match newest design
32a8b2e87 Add reconciliation loop docs
3bd81fd43 Fix invalid CRDs and CRs
b86a6b0e8 docs/design: init walkthrough
2314078fd Remove blocksInstall from examples
5c90effc8 Depend on `CRD` not instances of CRD
91ad56094 Fix etcdoperator operatorversion
996790f43 fix almoperatorversion formatting
fe5b5d8b6 Fix formatting on etcdoperatorversion
067405b53 Update vault example to use new requirements format
f3cc3d2ba Update etcd operatorversion to match spec
e6dc168a3 Update operatorversion spec and alm.operatorversion.yaml
9b14af09e Add UIDs and update apiVersions
0c2820412 Add status and ownership to etcd sample
5a1594026 Move the examples back under their directories
890a12a24 doc(DEVELOPMENT.md): outline glide and make usages
85bacad09 fix(vendor): go back to glide for golang dep mgmt
7b2a2bde3 style(alm/types): use golang conventional func naming
8d4769d71 fix(.gitlab-ci.yml): pull correct image
2a5e74818 fix(values.yaml): moved from quay to coreos
65bff4625 fix(.gitlab-ci): put in sha at wrong place
2ecd4effd fix(.gitlab-ci.yml): remove except branches
21ba3b24f chore(.gitlab-ci.yml): add in deploy staging
72075931d Put `example.` prefix on example CRDs
1c1eabd36 Add vault sample
f4c111e8f Move etcd samples into their own directory
8b5e23e76 cmd/alm: init
ab40c950f Fix merge and add important.link capability
cafd7feb7 Add sample etcd cluster instance
b7ee33a2c Add sample outputs
86a24dad4 Add sample proposal for metrics and links as outputs
d129b2c3f Fix rebase issues
cd49d2338 Update requirements version
b88ee5766 Model RBAC requirements as requirements
4ba6e2cbf Add example for including cluster features as requirements
071dc0c94 fix(alm): consolidate apptype cr creation
5675cf344 chore(Gopkg.lock): update dependencies for interface tests
fd818310f test(alm/interfaces): add basic unit tests
ca804421f feat(alm/interfaces): define alm functionalities in interface
a165ea80c chore(godep): update dependencies
c4e8db891 feat(alm/types): add type schemas
3ed37b792 README: init
a0f5b96c0 docs: move design work into Documentation directory
f8582bc39 chore(Makefile): set up Makefile for test, builds
64dac2e4c fix(.gitlab-ci.yml): stop ci build on master
f0713bda1 dep: init
1e05a0449 chorse(.gitlab-ci.yml): add in manual deploy of branch
859e15347 Add schema examples
0cddacb97 Switch to the proper JSON field name for the schema https://github.com/kubernetes/kubernetes/commit/6133d84835c59f157a8fb4596f98d2d3cf828bef#diff-3029a18192feb70af52de676209da9b6R149
62734f345 Make the icon information embedded and more strict
9d4ec1969 Add schemas for the initial resource types that ALM will manage.
62ab83d68 chore(deploy): add in health check for k8s
15c381352 feat(deploy): added in basic helm chart
2e086d0ba fix(misnamed from): adding in golang
129c0426d chore(.gitlab-ci.yml): Adding in basics for ci
7b20d7108 chore(.gitignore): Added in a basic gitignore
0ea751807 Add ALM mocks
eca4f1566 Check in the original propsal README as a straw man.
ddfdf72e3 initial
5503a2a58 scripts: Update the scripts/generate_crds_manifests.sh
f1dbd0d07 Makefile: Add additional verification checks to the verify target
fb555af8c scripts: Introduce a script that ensures nested modules are up-to-date
65ceea044 Updating operator-registry images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/691e628254f318ce56efda5edc7448ec743c37b8/images/operator-registry.yml
f92115001 Updating operator-lifecycle-manager images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/691e628254f318ce56efda5edc7448ec743c37b8/images/operator-lifecycle-manager.yml
199f2b6a6 .gitignore: Ignore the sqlite journal binary files
34318f9a0 Add verify target to Makefile.
da3e496c6 Add IBM managed cloud profile annotations to manifests
1a571a501 correct top level files and vendoring
5a5d31a22 Remove overrides for GOOS and GOARCH in cpb Makefile recipe.
773c28855 Makefile: Use the full git commit hash when building binaries
96b6cc3da base.Dockerfile: Bump the Go base image to use a 1.16 tag
24c413998 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/b7ea3c7f495e67d5b790e3698b5c319b67e98b35/images/operator-lifecycle-manager.yml
a0c9ca7f4 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/b7ea3c7f495e67d5b790e3698b5c319b67e98b35/images/operator-registry.yml
2543e6035 Dockerfile,Makefile: Add opm binary and cross compilation target(s)
08daeb0ab remove top level deploy, crds directories
17bd9976e add crd and manifest generation
aa5df6359 Makefile,Dockerfile: Add additional registry and OLM build targets
73d36e080 scripts: Address markdown violations in the README.md
a6cc02add cmds.go,vendor: Introduce the non-opm registry binary packages
a5c25b3de scripts: Check if the vendor directory needs to be populated first before running e2e packages
e05ed8f90 scripts: Avoid hardcoding the test e2e function called
785ec7b2f Makefile: Update the e2e-related targets
2d2b03f39 README.md
39717cadc Use staged tests
aa1b622be Update scripts to track specific commit
633072a36 scripts: Update the unit.sh helper script and populate the nested staging directory
495385b84 Makefile: Introduce additional test targets
e99ac9167 scripts: Introduce an e2e helper script
3c4fb81ca Dockerfile: Copy the entire repository while building binaries
75238ed4d Update the base image for the operator-registry image
ba7683370 WIP: Update root Dockerfile(s)/Makefile to build downstream images
3c6897fe6 .gitignore: Ignore nested staging vendor directories
69ef1b59d Add the package-server to the list of local command packages
13d97c031 Makefile: Add build and basic test targets
f4cc0f1ef Introduce cmds package that tracks the staging operator-framework directories
9269b835c Makefile: Reduce the number of targets
5f5016efa scripts: Add unit test helper scripts
1ac24811e Dockerfile: Avoid hardcoding the kubebuilder version in multiple places
e4e7f4fb5 Dockerfile: Avoid using the registry.svc.ci container registry
d4cf305d3 *.Dockerfile: Manually bump the image tags to 4.8
1c272ee39 Add root .gitignore
fa34d3f53 Initial commit
84f6a5c15 Revert everything back to the initial commit
7de770d3f Merge pull request #109 from timflannagan/remove-doc-dir
087ba82f6 Remove the doc/install directory
121f35e9d Merge pull request #106 from anik120/registry-liveness-probe
b165a4cd7 Bug 1976326: fix configmap registry server liveness probe timeouts
2a45f5230 Merge pull request #95 from timflannagan/update-verify-check
e6894b43f scripts: Update the scripts/generate_crds_manifests.sh
f0b75da18 manifests: Update PackageServer CSV YAML manifest with re-generated keys
3fa2fc48e Merge pull request #103 from benluddy/bz-1975824
76d53422c Resolve InstallPlanStepAppliedWithWarnings alert after some time.
c6208b0b0 Merge pull request #100 from timflannagan/update-owners
3dec0fb30 Makefile: Add additional verification checks to the verify target
db4bb2c0e scripts: Introduce a script that ensures nested modules are up-to-date
ccd5a62e7 OWNERS: Add additional reviewers
e7f18ff88 Merge pull request #97 from openshift-bot/art-consistency-openshift-4.9-operator-registry
48534ab06 Merge pull request #98 from openshift-bot/art-consistency-openshift-4.9-operator-lifecycle-manager
a4f1f3b83 Updating operator-lifecycle-manager images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/691e628254f318ce56efda5edc7448ec743c37b8/images/operator-lifecycle-manager.yml
4c14d475c Updating operator-registry images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/691e628254f318ce56efda5edc7448ec743c37b8/images/operator-registry.yml
f25f670c0 Merge pull request #92 from dinhxuanvu/opcon-gen
659bac3c6 Merge pull request #90 from awgreene/bz-1950047
4327486a3 Update OperatorCondition CRD in manifests
8a3545331 Address various issues with OperatorCondition codebase
56d5faa1d Update OperatorCondition Role and e2e test case
06fb38628 Add OperatorCondition status sync and update operator upgradeable check
6156d25a1 Regen go-bindata for crd changes for OperatorCondition (#125)
952306bbf Add ConditionType to v2 api (#123)
927e6bba2 Add conditions array to OperatorCondition's spec (#119)
59934e50e Merge pull request #85 from benluddy/bz-1958296
d19ffb361 Fix Template Annotations on Webhooks/API Service CSVs
41991c626 Merge pull request #88 from benluddy/bz-1968700
44c25e24c Merge pull request #86 from njhale/fix/xattrs
4b4a76318 Fix nil pointer dereference while reporting bundle unpack status.
da96f3dcd fix(containerd): drop xattrs during unpack
1adb4495a Merge pull request #84 from vrutkovs/cvo-hotlooping
220c152f8 Surface API server warnings when applying plan steps.
78d224c4e Bump kind dependency to v0.11.1.
afcaa062b packageserver CSV: add missing properties
ca1f0b69c Merge pull request #83 from hasbro17/fix-ssa-error
0e9f3bffa Merge pull request #82 from joelanford/bz-1961472
365495eae Filter secret names for registry pod's sa
9557387ca Explicitly set `readOnlyRootFilesystem: false` on created registry pods.
4a318fee1 Merge pull request #81 from benluddy/bz-1959158
d3b5c5bc4 Merge pull request #80 from anik120/catsrc-metrics
8b1eb28aa Make ClusterOperator Available condition sticky.
b133dce55 Merge pull request #79 from joelanford/bz-1961314
030b4afe5 Merge pull request #67 from gallettilance/sync
2281ea529 (bug) add after deprecation
630cc8e04 vendor changes to metrics(catsrc) from of/olm
625b70006 use snake case for catalogsource_ready metric
406828629 Call cleanup sync.Once.Do
82dc386c4 feat(metrics): Emit metrics for CatalogSource state
c1e3716e0 fix race in test with mockRepo/mockBlobStore
ac7c85de0 Merge pull request #75 from benluddy/bz-1947946
5b9124dfa Merge pull request #76 from benluddy/bz-1958285
0b7700ee0 Merge pull request #78 from hasbro17/bundle-unpack-timeout-bz
a5f4f3bf6 Merge pull request #77 from timflannagan/fix-packageserver-delegated-auth
fdbcd8e1f Annotate CRDs that are installed alongside CSVs.
b1923328c Bump ginkgo to v1.16.1 and gomega to v1.11.0.
b7a83ec5e Add eventually to e2e test crud operations
79616b38d Add unit test for varying job timeout
ce892120d Add unit tests for UnpackBundle
cc3e38e0f Parse timeout annotation before UnpackBundle()
86976b0bb installplan e2e test fixes
51d65b188 Add annotation to override default timeout
805d22917 Check for bundle unpack failure via status conditions
0f2dff6d2 Cleanup e2e tests and add case for invalid bundle image
782238935 Fail InstallPlan on bundle unpack timeout
b0798d0aa fix(packageserver): add tolerant delegating auth config
f82e4e14b Merge pull request #74 from ankitathomas/bump-apiserver
44c8bea85 pinning apiserver for delegated authentication watch request bug fix
d29099fba Simplify deployment status check to reduce flapping.
9498948b6 Merge pull request #72 from anik120/packageserver-co-message/reason
9ec5651af Bug 1955761: Set reason/message for Available condition in packageserver co
69fbfdf2d Merge pull request #70 from ecordell/cr-valbug
24d012397 Merge pull request #71 from dinhxuanvu/config-alpha
6eacf7ffa Move config serve and validate to opm alpha
fa23e819c bump kube-openapi to get validation fix
d9201a5c2 add unit test showing cr validation bug
cabb2c9bb Merge pull request #68 from benluddy/bz-1945443
d44d9fd80 Use DeploymentAvailable instead of custom test for CSV status.
1751d4a12 Merge pull request #61 from lack/management-workload-annotation-rename
531b8b6a0 Merge pull request #56 from timflannagan/bump-k8s-to-v1.20.6
9fa1f1249 Merge pull request #65 from anik120/termination-policy
7cf3faad6 go.*,vendor: Update the Go module version and re-generate root vendor tree
e50564af0 .gitignore: Ignore the sqlite journal binary files
15cadfada staging/operator-registry: Bump the k8s dependencies to v1.20.6
b3227bd0c staging/operator-lifecycle-manager: Bump the k8s dependencies to v1.20.6
35090f520 Merge pull request #62 from dinhxuanvu/olm-resolver-events
d552bf9cb Bug 1952238: Report catalog pod termination logs to catalog operator on exit
3440fa2c1 Merge pull request #64 from benluddy/verify-makefile-target
1a4a2176a Merge pull request #63 from joelanford/bz-1937097
701e2a0b3 Add verify target to Makefile.
49bcc3eb1 Add unit test to verify resolver error handling for sync namespace
0083d6a7f fix(catalog): Reduce namespace resync in resolution failure
c227a5117 Add retries when pulling images
21fbc6ac4 Merge pull request #60 from benluddy/bz-1942522
8281e2926 Rename workload annotations
85f8278d5 Fix resolution error if inner entry doesn't provide a required API.
ec8be6157 Merge pull request #42 from lack/management-workload-annotations
2df1ac175 Merge pull request #55 from kevinrizza/bundle-unpacker-resource-requests
b35304d6b Add management workload annotations
9d2fc1f57 vendor staging updates
8831a0457 Add resource requests for bundle unpacker
8c384e081 Merge pull request #53 from joelanford/fix/subscription-env-merge
e0b47b0f4 Merge pull request #50 from csrwng/roks_profile_patch
03e31a8ab Merge pull request #41 from timflannagan/bug-preserver-existing-sa-owner-refs-install
e3a385f7a vendor staging updates
f0c181d0e fix merging envvars from subscription.config
e6b5fdf7c add failing test for merging envvars from subscription.config
873f908ed Merge pull request #51 from timflannagan/revert-sno-packageserver-bug
f08b0a629 Revert "set packageserver replicas to 1 for single node"
fcc049e3b Add IBM managed cloud profile annotations to manifests
b5814a0b1 Merge pull request #47 from timflannagan/registry-sync-declconfig-updates
840f00345 staging/operator-lifecycle-manager: Update go.sum after running 'make vendor'
a66dfa929 Preserve existing ServiceAccount owner references during installs.
bdc74e956 Merge pull request #49 from benluddy/ip-retry-sync
f9f580dfb Resync manifests with latest sync of staged OLM.
8240f5c3e Update upstream tracking commits.
bb9c47fdc Revendor for staging/api v0.8.0 sync.
8a474173c Add .status.message and .status.startTime to InstallPlan. (#108)
b7a62ba82 add checks for operatorhub validator (#103)
ee94e8d34 Update OWNERS (#107)
454234f12 Add skips & relatedImages to CSV Spec
8ebe01432 Add optional go-apidiff test to CI
673453383 Revendor after latest staging sync.
25a783253 Always validate CR upgrade compatibility.
a56ab3a97 Add time-limited retries to InstallPlan execution.
def4a723b Bump github.com/operator-framework/api to v0.8.0.
56d0f84f7 Re-generate vendor after cherrypicking commit(s)
5c8db0aec Improve the declcfg and model validation
deed5877e feat(validate): Add opm validate cmd to validate config files
647c5a164 Delete the symbolically linked operator-registry.Dockerfile
b0f60a570 Add tests and fix bugs for declcfg server
385b96773 Merge pull request #45 from timflannagan/registry-sync
91d03b25e Merge pull request #46 from timflannagan/olm-sync
8c413c3f6 Update root vendor and staging/OLM go.sum
e45356ed7 go.*,vendor: Bump to k8s v0.20.4
d87c907d4 Remove more testify assertions
38cc76f72 Fix e2e test with incorrect gomega matcher and remove testify usage
ca3266e14 Copy all CatalogSource annotations to its Pod
eabc62d9b Consider InstallPlan phase=Complete as terminal
007621c06 Give more precise reasons for Subscriptions with no candidates.
35fc7ef79 Clarify status condition error message, and update architecture docs
67296298f Add e2e tests for installplan failed on invalid operatorgroups
16e685b2c Indicate invalid OperatorGroup on InstallPlan status
de697a364 Merge pull request #44 from ecordell/no-adopt-copies
2e3a7fe5a Merge pull request #40 from timflannagan/bump-k8s-root-go-mod
c97146c19 go.sum,vendor: Run 'make vendor'
df6f50605 Purge staging/operator-registry/vendor
263f2e708 add server for model.Model
f981968b8 .github: Separate the jobs in the test workflow into their own workflows
de1e8a3a2 use equalsDeclarativeConfig function in load_test.go
adb078ecb move newly introduced packages to internal
3d19f70e6 declcfg_to_model.go: ensure package field and property align
185cd9e8b pkg/(declcfg|property): PR review feedback
da9688ffe Avoid stuttering "mkdir <dir>" errors
7c021e36c feat(declarative config): add base packages
06868cb4a bump vendor
11bb700a4 disown copied csvs
3466dbbff remove component labels when copying CSVs
312b92016 test that the operator api never adopts copied CSVs
f9fbc30ab go.*,vendor: Bump the k8s dependencies to v0.20.4
fc92cb718 Merge pull request #38 from ankitathomas/operator-lifecycle-manager-sync
fad0f266a Merge remote-tracking branch 'main/master' into operator-lifecycle-manager-sync
2cea7f3c5 Merge pull request #39 from timflannagan/fix-olm-unit-tests
964b2a6df Merge pull request #39 from timflannagan/fix-olm-unit-tests
c00da97d0 correct top level files and vendoring
5f87deb2c Merge pull request #1653 from yeya24/add-CsvAbnormalReplacingOver30MinSRE-alert
50ce93ede Merge pull request #2075 from benluddy/bump-kind-v0.10.0
d251e7e0f Update 0000_90_olm_01-prometheus-rule.yaml
28c2ab77c Bump test dependency on kind to v0.10.0.
eca9859ae Merge pull request #2062 from ankitathomas/single-node-packageserver
47d8851a8 Merge pull request #2061 from timflannagan/avoid-hardcoding-kubebuilder-version
a04d7d223 Merge pull request #2068 from benluddy/inconsistent-candidate-order-with-csv-in-two-channels
1b75db8ca set packageserver replicas to 1 for single node
343325d7e Fix inconsistent dependency candidate order.
78407c21f Merge branch 'master' into avoid-hardcoding-kubebuilder-version
f3430d1f8 Merge pull request #2070 from sathieu/patch-1
733cc390f Allow to override download url in install.sh
b494ac1e1 Merge pull request #2047 from timflannagan/avoid-graceperiod-delete-zero
83c0c5daf Merge pull request #1937 from horis233/update-pr-template
8e798b6f4 Merge pull request #2060 from timflannagan/go-1.16-bump
26387563c Merge pull request #2064 from timflannagan/add-ci-dockerfile
caf72b787 Dockerfile: Add a symbolically linked release Dockerfile
0d654f80a go.*,vendor: Bump module Go version to 1.16
70642817a Dockerfile: Use Go 1.16 image tags
bd5bfe089 Merge pull request #1817 from jeyaramashok/1774-csv-hotfix
de317b4b4 Dockerfile: Avoid hardcoding the kubebuilder version in the build root image
2d7e0292b Merge pull request #1936 from horis233/update-og-doc
0daaa46f4 Merge pull request #2054 from dmvolod/issue-1522
9c46d43fa Merge pull request #2058 from openshift-bot/art-consistency-openshift-4.8-operator-lifecycle-manager
417a1853c Merge pull request #2059 from timflannagan/remove-duplicate-apierrors-package
a93f726a2 test: patch existing CSV for a hotfix
d5b23bc06 test/e2e: Remove duplicate package imports
f728dacf0 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/e3b61ff1dde2bfc2bc7f2b5efdd155d1d3299cd7/images/operator-lifecycle-manager.yml
552bbb54a Merge pull request #2055 from timflannagan/fix-trailing-slash-module-tools
c5321a5f2 Merge pull request #2045 from camilamacedo86/remove-ch-name
5443887a7 Set labels for the operator Deployment created via the ClusterServiceVersion
c13365df1 Merge pull request #2048 from benluddy/operator-framework-api-0.7.0
aa7fb08fe go.sum: Run 'make vendor' locally
a083c072a tools.go,vendor: Remove trailing slash in github.com/go-bindata/go-bindata module
7d3c1de4a pkg,test: Avoid setting metadata.GracePeriodSeconds to zero seconds
98b8f42c1 Bump github.com/operator-framework/api dependency to v0.7.0.
a8f961074 doc: moving channel naming doc to website
5c6a9c6da Merge pull request #2044 from exdx/fix/exempt-labels
af8265057 Merge pull request #1999 from openshift-bot/art-consistency-openshift-4.8-operator-lifecycle-manager
5cc05a212 fix: add lifecycle/frozen tag to exempt list to stalebot closing certain issues
29573edff Merge pull request #2025 from benluddy/small-jitters
743495e91 Merge pull request #2024 from joelanford/fix/upgrade-alert
980537c37 Support jittering relatively small resync intervals.
d225f6beb Merge pull request #2029 from benluddy/sa-present-when-owned-by-non-csv
12ff8606a Allow non-CSV-owned ServiceAccounts to satisfy CSV requirements.
4eabd3d28 Merge pull request #2010 from joelanford/fix/dep-resources
36dcb5461 don't change CSV phase on service unavailable error
9c9a0a0c0 Gracefully handle service unavailable errors from kube-apiserver
23d4ea963 only override deployment resources when explicitly defined in subscription.spec.config
ba3182516 Merge pull request #1993 from benluddy/package-name-inference
b68402260 Merge pull request #1972 from jchunkins/modify_makefiles
710b0dc04 Infer package name property for unannotated CSVs, if possible.
d6133be3b Merge pull request #2016 from joelanford/fix/operator-controller-test-flake
60906a102 pkg/controller/operators/operator_controller_test.go: fix flaky test
0779756bb Merge pull request #1828 from zkyle95/master
27f495475 Merge pull request #1834 from errordeveloper/enable-debug-messages-via-klog
148100ca8 Merge pull request #1886 from cfergeau/single-node-developer
d1fc78db8 Merge pull request #1863 from jeloba/dont-create-default-service-accounts
5de59e426 Merge pull request #2012 from joelanford/go-1.15
4bfb7b529 Merge branch 'master' into modify_makefiles
b744a8106 bump to go 1.15
1bb711dc9 Merge pull request #1846 from awgreene/release-md
7e4f4b003 Merge pull request #1882 from horis233/update-developemnet-docs
038151010 Merge pull request #2011 from njhale/fix/adoption-log
195ce72f3 chore(adoption): use debug level to log missing components
bcb80ada7 Merge pull request #1951 from dinhxuanvu/pinned-skips
e7ae0eef4 Merge pull request #1965 from nikhil-thomas/fixes/doc
00c73acff Merge pull request #2005 from ecordell/benluddy-nicer-invariants
5c23b7c92 Merge pull request #1986 from awgreene/update-OWNERS-file
09e406869 Correct timflannagan GH ID on ownerfile
04c08702e fix(resolver): Allow skipped versions to be installed initially
659a9e517 support multiple subscriptions resolving the same bundles
710a3784e add package property to unit test cases
e77fb17e6 collapse resolver tests
3de932b82 Add meaningful string representations for resolution invariants.
7b82f2192 Update OWNERS file
7c710f373 Merge pull request #1995 from awgreene/operator-group-doc
32d3d89de Merge pull request #1958 from ankitathomas/apiserver-version-bump
50dfff447 bump k8s.io/apiserver for webhook auth panic fix
0cc658399 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/5a1293dd0f380abf50c12d65c36655486d7745d0/images/operator-lifecycle-manager.yml
c18f87a40 Fix OperatorGroup Documentation Example
59e29f836 Merge pull request #1990 from benluddy/subscription-constraint-strings
a63ae05d5 Merge pull request #1938 from joelanford/fix/zombie-operator
0416116c5 Clarify subscription constraint strings in resolution failures.
7b1731d86 Merge pull request #1974 from hasbro17/fix-csv-status-time-comparison
2e989308f Merge pull request #1982 from benluddy/continuous-registry-resync
785fb9829 Fix zero-delay resyncs for certain registry update policies.
086c4ba07 Merge pull request #1983 from benluddy/test-minikube-driver
3a7c42980 Use docker driver for minikube installation test.
2a283a382 Merge pull request #1975 from exdx/fix/stalebot
c51a83df7 fix: improve stalebot configuration for github issue tracking
dc7829327 Additional changes based on feedback
51dfe457b Changes based on PR feedback:
c89e1c655 update makefile, workflow, and docs
e8e768ecb Fix time comparison in CSV reconcile loop
e212f002c Merge pull request #1966 from benluddy/replacement-chain-cycle
af5cb8b6a Fix infinite loop when a CSV replacement chain contains a cycle.
5bad05410 Fix typo in docs
3a6bab227 Annotate manifests for single-node-developer cluster profile
75309020f Update shields
85ef01a85 Merge pull request #1941 from anik120/job-secrets
a047501de Merge pull request #1942 from awgreene/operatorcondition-controller-watch-deps
15436e9ca Merge pull request #1888 from exdx/fix/scoped-install
cd3130cd4 fix: create installplan directly in e2e test
0971e280e fix: use OLM client when installing CRDs
a6506b568 fix e2e test order
380872d59 Address comments from PR review: added e2e, improve unit
04c8fd442 Update OperatorCondition controller to watch deps
3e766cbe8 Merge pull request #1948 from joelanford/joelanford-reviewer
4795635cb Add joelanford to OWNERS as reviewer
6b8d6b799 operator_controller_test.go: use JustBeforeEach to ensure correct test setup order
891a1ee64 Only re-create operator resource if it has existing components
cac4593b9 Add unit tests for Operator controller deletion handling.
f5925b55c Merge pull request #1943 from awgreene/initialize-deps-with-opcond-name
16ae6c26b Create CSV Deployments with OpCond EnvVar
fbc4c77cc Bug 1909992: Allow private bundle images within private indexes
d06430e4f Merge pull request #1939 from awgreene/fix-operatorcondition-status-verbs
f6c273e9c Fix operatorcondition role verbs
8eb4b0f64 Merge pull request #1918 from exdx/fix/pin-sys
a64448940 Merge pull request #1933 from zcahana/fix_webhook_cabundle
113649e05 Merge pull request #1887 from guillaumerose/master
7e3f40d38 Update the template of PRs
493f70f60 Update editverbs and Make the instruction clearer
0b956b6ac Use correct caBundle for 'olmcahash' annotation
fa22f8002 fix: update moby/term dependency due to undefined: unix.SYS_IOCTL on macOS error when running locally
df6353105 Merge pull request #1911 from dinhxuanvu/upgradeable-type
d26451fb5 Change the "OperatorUpgradeable" condition to "Upgradeable"
4e1a54142 Update /manifests with default cluster profile annotation
bd76882dc Add the release annotation to all documents in all files
feebee760 Merge pull request #1900 from awgreene/post-pending-operatorconditions
d2042c24d Merge pull request #1913 from awgreene/fix-deployment-annotation-bug
b3d8a7a17 Multiple operatorconditions should not update the same deployment
fa18a49fd Merge pull request #1903 from awgreene/bump-deps-k8s-1.20
ca9016c2b Reduce e2e test failure rate
f55da6e71 Update manifests
28a57c668 Fix manager start commands
49c31f460 fix zap logger
240a39081 Fix controllers and run codegen
e72261981 Update semver import and update SSA
983b63d05 bump k8s deps
6e14b48a4 CSV Annotations override pod annotations
a6e29ef53 Merge pull request #1905 from jmccormick2001/docs-channel-naming-design
7f36227dd Merge pull request #1904 from dinhxuanvu/sa-csv-check
a59b4e882 Merge pull request #1899 from awgreene/fix-operatorcondition-generation
32edd682c fix(olm): Verify ServiceAccount ownership before installing deployment
a3cd4afaa cleanup formatting
a1f114b2a initial channel naming doc and related images
8d9c02ee0 Merge pull request #1901 from awgreene/stop-printing-debug-noise
bbe5a321f Don't create OperatorConditions for copied CSVs
eaed5e11a Reduce log noise from OLM
64bff0dd6 Merge pull request #1892 from benluddy/copied-csv-updatetime
9c08a13de Merge pull request #1896 from dinhxuanvu/manual-approve-flake
2f75d6a98 fix(e2e): Fix subscription manual approval flaky test
eba4ff8c7 Preserve original .status.lastUpdateTime in copied CSVs.
f1df66830 Merge pull request #1885 from dinhxuanvu/create-operatorconditions-for-operator
8451f0847 Add OLM support for the Upgradeable OperatorCondition
44e70e6b7 Merge pull request #1881 from horis233/check-sa-owner
eed758a73 Merge pull request #1875 from awgreene/create-operatorconditions-for-operator
5f3c090a4 Merge pull request #1878 from anik120/auth-catsrc
f9cedec6b Merge pull request #1884 from benluddy/service-updates
b438028a0 Support InstallPlan steps upgrading existing ClusterIP Services.
4e7f8bf6a Add authentication for private index images
798238998 Introduce OperatorConditions
2e1a6d03d revert the change for e2e test
b3940c21b format the import order
4cef35525 Merge pull request #1832 from guillaumerose/master
c52ab20b0 update manifests
45543f4a4 update development document to add more informations for the e2e environments
fe16404f4 Only check the owner of the service account if the service account has owner
ecc7689b6 update e2e test
d83855f0b check the service account owner in the requirement  check
8a4330529 Merge pull request #1876 from njhale/fix-ioob
fe468ab5f Add release annotation
97c46f9e5 Bump yq from v2 to v3
9cb137587 fix(catalog): be defensive about directly indexing catalog pods
0c38f49d1 Merge pull request #1873 from exdx/feat/issue-labeler
0ec97565b Merge pull request #1843 from dinhxuanvu/ip-recreate
2a01d116e add default label to issues. add config file with upstream OLM contact information.
60a4dc1cf Using subscription reconciliation to clean installplan status instead
e0763e5a3 Merge pull request #1862 from awgreene/bump-k8s
551a7fe40 fix(ip): Recreate pending installplan if deleted before approval
84ac0895e Merge pull request #1616 from Jamstah/patch-1
46087ef5e Generate code
8439d2243 Bump k8s dependencies to v0.19.3
dd03e5234 Don't create default ServiceAccounts
070fbd3a3 Merge pull request #1855 from ecordell/service-duplicate-ownerrefs
bf03bcda9 test(certs): add a test the ensures services do not get the same ownerref added twice
03b34ce5a Update release.md with milestone step
8d80d58d9 Merge pull request #1844 from dongwenjuan/master
310b9107d test: scaffold a basic unit test for certresources
f445b924b chore: generate fakes with inline go:generate directives
9b496c696 Merge pull request #1850 from benluddy/changelog-0.17.0
86f6e9cfc Merge pull request #1507 from harishsurf/csv-e2e
82074324f Merge pull request #1848 from dinhxuanvu/svc-hash
757c5aa7c Add unit test case to grpc and configmap reconciler test
f18b5312c Generate changelog for v0.17.0.
adfbdc34d Merge pull request #1849 from benluddy/manifests-0.17.0
be6f02ffa Add spec hash to service's label to ensure service is correct
6a7298bfa Generate manifests for v0.17.0.
c0d4cff41 Merge pull request #1842 from benluddy/version-bump-0-17-0
487a896ba fix the comment in package-server
76d68d543 Bump version to 0.17.0.
e3e4a37b8 Replace assertions with Gomega's matcher library
10410a899 Merge pull request #1500 from harishsurf/scoped-e2e
c4620406e Merge pull request #1502 from harishsurf/catalog-e2e
28bda9e47 Convert scoped_client_test to ginkgo
309954456 Merge pull request #1835 from awgreene/update-manifests
5c4bd9521 Replace assertions to use Gomega's Matcher library
0b242675f Set default, min, and max values on Webhook ports
212cc45b8 Enable debug messgaes via klog
5aa5fed0a Specify cluster name when there is only one cluster in kind
2cbc79f3b Merge pull request #1823 from sjenning/bz1889838
fb6c473ef fix race in Operator reconciliation
fd261994f Merge pull request #1816 from sjenning/bz1888073-master
bbc75c7e8 prevent no-op hotlooping on Operators
799c353d3 Merge pull request #1807 from dongwenjuan/master
0e063188e Merge pull request #1748 from jianzhangbjz/channel
fd2a8f41c Merge pull request #1808 from awgreene/default-kubebuilder-ca-mount
ca3b00e3e OLM mounts CA Certs where Kubebuilder expects
a83ce2baa fix typo
51cc83a5c Merge pull request #1803 from awgreene/improve-transistion-csv-logs
4b47a3a6e Improve transitionCSVState error logs
4171a2183 Merge pull request #1741 from horis233/fix-typo
0ca7d6b54 Merge pull request #1799 from jupierce/art-consistency-openshift-4.7-operator-lifecycle-manager
a3fff4b30 Merge pull request #1797 from awgreene/retrieve-ca-from-cw
e12a78547 Merge pull request #1798 from exdx/fix/inflate-ip
3f34aabde Retrieve CA from conversion webhooks for CA Hash
34c4f2fc6 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/ac81dd4ff0bd57c4e75058d25b40615b92948259/images/operator-lifecycle-manager.yml
ebf370e20 fix: remove extraenous manifest assignment and update CRD stepper. Add e2e test to verify configmap-based manifests.
6e803bb8a Merge pull request #1480 from camilamacedo86/add-bug-report
092e0d41a Merge pull request #1791 from benluddy/downstream-installplan-properties
bdd163f70 Regenerate downstream InstallPlan CRD manifest.
aef200abd Merge pull request #1781 from benluddy/property-projection
5928c67c9 Annotate CSVs with the properties used during dependency resolution.
101989643 Bump operator-framework/api dependency to v0.3.16.
8a5004267 Merge pull request #1775 from njhale/bump-k
4e686be46 Merge pull request #1773 from exdx/fix/polling-cycle
488004863 fix(mockgen): use "go run" in all go:generate comments
00c20978b chore(modules): update vendored deps
64bf0c4c4 chore(modules): bump k8s deps to v0.18.9
3231653c8 fix: update check from previous polling implementation
be036c9de Merge pull request #1766 from benluddy/unresolvable-sub-error
99b811f72 Merge pull request #1767 from awgreene/fix-conversion-webhooks
dccb4d570 Allow ConversionWebhooks to define targetPort
b162272a1 Bump operator-framework/api dependency
8104bc4c2 Merge pull request #1763 from openshift-bot/updating-dockerfile-baseimages-to-mach-ocp-build-data-config
95f6796fd Update pkg/controller/registry/resolver/resolver.go
004f4ef52 Make a subscription without at least one candidate fail resolution.
67c4ccdec Merge pull request #1729 from jianzhangbjz/catalog
97d3d41d9 update error logs for channel head querying
18425e141 Merge pull request #1756 from exdx/doc/default-polling-design
971eec7e8 Updating Dockerfile baseimages to mach ocp-build-data config
ecbff191e Merge pull request #1761 from awgreene/reusue-active-certs
cabaf08b4 OLM should use valid CA certs if available
cf99c6ef2 should not compare if no imageID
9c29e9835 Merge pull request #1755 from exdx/fix/update-pull-policy
5f02268eb Merge pull request #1732 from njhale/fix-op-csv-cond
8380a9ab7 Merge pull request #1731 from exdx/fix/catalog-sync
c4221e7e9 Merge pull request #1745 from awgreene/hco-bug
488b9a98c fix: update catalog pull policy to Always in case the image is not digest-based.
bb2d1f9c1 Merge pull request #1723 from exdx/fix/duplicate-pods
431446661 doc: default polling
9dbee83f8 Merge pull request #1735 from dinhxuanvu/add-skips-operator
4c83276a9 Merge pull request #1 from njhale/hco-bug
1c0c6d759 test(install): expect revision history = 1
ab10b80da Merge pull request #1751 from awgreene/changelog
f03d4aa21 Genereate 0.16.1 changelog
8a1c5c478 Merge pull request #1750 from awgreene/0.16.1-manifests
3089813cd Release: Generate Manifests
c6eae26ea Merge pull request #1749 from awgreene/bump-olm-0.16.1
2ad4bb577 Bump OLM Version to 0.16.1
e4de9a206 fix: remove catalog update pod if it's in a failed state to prevent cycles in the catalog reconciler.
5615cfde1 fix: requeue catalog source sync if update pod has not reported ready; remove duplicate pod immediately after imageID check; turn down polling logging
3229876cd add correct polling interval based on modulus
b556fef5d Handle mutliple skips and add unit test
2be67979d Set RevisionHistoryLimit per Deployment
21a75f3af Merge pull request #1739 from operator-framework/update-OWNERS
1916b0391 fix typo in the error message
a6c3ed229 Update OWNERS
2ee3f9d1b Merge pull request #1738 from openshift-bot/updating-dockerfile-baseimages-to-mach-ocp-build-data-config
113d6e40b Updating Dockerfile baseimages to mach ocp-build-data config
922f80ba0 Add skips information to Operator representation
29ad22b82 chore(modules): update vendor
e163e0c72 fix(operator): map top-level csv phase to component conditions
1a9425858 fix: resync catalogs with jitter if polling enabled
e1fc1b741 Merge pull request #1624 from ankitathomas/registry_poll_interval_retry
025c57fb9 Merge pull request #1727 from awgreene/ownerz
04dfd27ef Merge pull request #1725 from benluddy/fix-subscription-without-channel
55abcbe27 Merge pull request #1720 from simrandhaliw/update-manifests-to-include-bug-fix
03e14b465 Merge pull request #1728 from awgreene/node-selector-bug
28d41bb77 Bug: Fix nodeSelector subscription config override
bbff47839 Bug 1861605: Update manifests to include the bug fix
c36b26fc8 Update Owners file
1fd8c055c Apply suggestions from code review
56a72a9c8 doc: add reporting bugs doc and small nit improvements in the README
377d39126 Fix install plan creation for subscriptions that omit channel.
979464bc5 Merge pull request #1613 from konsotirop/installplan
3fe1a7169 Move server side apply patch code to library, use ssa to update catalog source pods
107eb20b4 Merge pull request #1715 from dinhxuanvu/fix-stale-bundle
4c2de89bc Merge pull request #1721 from njhale/fix-crd-adopt
349a617dd Merge pull request #1717 from Bowenislandsong/total_test
9fa50a815 Merge pull request #1716 from awgreene/nodeSelector-support
ba9a5238d Bug: Fix SubscriptionConfig NodeSelector field
558dc887f fix(operator): re-adopt manually disowned crds
d6b742e85 Add Total Test Number to report
6a2f1f6c7 Fix stale content in configmap due to stale bundle image in the node
61447446b Merge pull request #1713 from simrandhaliw/operatorstatus-description-bug-fix
8f47f42e1 Bug 1861605: Reduce length of explanation of status of Operator resource
79b073783 Merge pull request #1706 from Bowenislandsong/catsrc_weighting
294de7359 Add Catalog Source priority for dependency resolution
81e19588a Merge pull request #1699 from dinhxuanvu/deprecated-filter
e52905795 Vendor registry 1.13.6 and fix unit test
599a6a4c6 feat(resolver): filtering deprecated bundles in resolver
be5540368 Merge pull request #1687 from dinhxuanvu/add-label-type
93be814b4 Add unit test to resolver for label dependency
e3023d9c7 Vendor the registry changes for label dependency constraint
af0e53552 feat(resolver): Add label dependency type to new resolver
258584b1c Merge pull request #1661 from njhale/ext-adopt
ce6aa2dd4 Merge pull request #1696 from ecordell/remove-legacy-resolver
c19e532ab Merge pull request #1702 from benluddy/spurious-bundle-cardinality-error
59af78a3a Remove spurious check for duplicate operators in resolver.
9d815df1e Merge pull request #1649 from simrandhaliw/add-conversion-webhook-support-for-olm
49d15bae4 Addressed review comments
1797b8835 Merge pull request #1680 from kramvan1/patch-1
4819decd2 WIP: Add Conversion Webhook support for OLM
ad1eb2ee6 test(e2e): pass ip test w/ created or present steps
7a3c40ef9 Merge pull request #1695 from dmesser/update-default-catalog
c0ec73047 feat(operator): adopt referenced installplans
27b072d64 remove legacy resolver
9c259b8ad Merge pull request #1694 from njhale/v1-default
52254226e change default catalog to index image
a2fab316a chore(vendor): include v1 operator api version bump
e5113cd39 feat(operators): reconcile v1 operator resources
3adebe965 chore(manifests): add v1 operator crd spec
31ea82c96 chore(codegen): drop v2alpha1 clients/listers/informers, add v1
9c6e9bbeb chore(scripts): drop v2alpha1 from codegen
1c9ba958f chore(modules): bump api dep to include the v1 operator spec
fddbe484a Merge pull request #1692 from benluddy/baseimage-path
19489c72b Remove unnecessary ENV directives from base.Dockerfile.
e88a8971f Merge pull request #1652 from operator-framework/new-resolver
bbaaf7651 Merge pull request #1684 from njhale/fix-ip-gen
b7d3b9e7f add CsvAbnornalReplacing alerts
a73b45e48 configure metrics for new resolver
6131cc467 rebased
17e553ae1 check for cache consistency issues when querying for a dependency
d0d574645 look in all catalogs when no catalog specified
0d00bfc8c emit events when resolution fails
7c49aef22 fallback to standard path for kubebuilder assets
16c810d7e fix catalog grpc connection state updates
123c6cfcd don't include docker image in the docker build test for kind test runs
b37f67697 fix crd upgrade e2e test
ebd4b9a5e retry for flakes
3712fd8be make catalog delete tests less flakey
7f66ef02d add a parity test for transferring api ownership between operators
5351327b4 make catalog updates in tests less flakey
849a2aa41 update package anti-affinity test
e4134dfff properly handle solver invariants
5875675e4 track existing CSVs without subscriptions as mandatory
614a7a8ff handle csvs that are already installed but don't have subscriptions
0b02783b4 extract properties/dependencies from existing operators in the cluster
4665d355c Fix check for whether or not a sub was added during resolution.
4a35e1780 Prefer bundles from the default channel in resolution.
bbd94f70e Try to detect kubebuilder installation path if not explicitly set.
3c10ae8f3 Regenerate registry client test fake.
1e5d3e5c4 Bump operator-registry dependency to v1.13.3.
90de599d5 deduplicate input installables
fec1bf7bb expire cache when grpc connection is READY
8d036cb9d fix sorting of inputs for dependencies
96cef9cec enable new resolver by default
2e2a50512 prefer the same catalog for dependencies
69aaf5cce fix resolver bugs, fix cache race, and re-enable tests
eaa4a5790 fix nested dependency resolution
0b20f2b20 fix verify
74573bce9 ensure cache is filled with content before marking it as not a miss
a91786a6f renaming / refactoring
8b4439bfe rename solve package
0df4f6c09 treat dependencies generically
8bed2cff2 refactor dependency walking to avoid recursing
236ab6523 support skip list in bundles
131f6870e support startingCSV
359a5d640 pin etcd and grpc
05a5abdd7 split old/new resolver and tests
e0afeb7bc test updating to a package with skiprange that is not head
c6b66150c search for operators in catalog order
5552fe6d9 move csvname filter to a predicate when finding bundles in the cache
7ab5dca1f use cardinality-based AtMost constraint
376167a77 resolver can resolve updates
be82373d9 chore(deps): bump operator-registry
7cae89364 don't mark virtual package nodes visited
1afecb8eb Decouple filter predicates from the operator cache itself.
e9f83b6ca memoize bundle walking
fb7f6754d support semver ranges
4083aa6ff use new solver interface in satresolver
8f79243c5 Adapt resolver unit tests to run with both implementations.
964862934 Fix unit tests and add GVK dependencies extraction
8a4dd1a4d Strip plural from APISets in resolver cache
774e83054 Extract dependencies info from bundle and add to Operator object
b56ac763b (feat): Add sat resolver for version dependencies
ac25cb747 fix(install): account for installplans when calculating generation
b6ab64dbe Merge pull request #1657 from anik120/dependency-resolution-metrics
01d2def74 [metrics] Dependency resolution metrics
20241c60c Merge pull request #1678 from awgreene/rebuild-busybox-operator-index-image
f6b4cd739 Add busybox-dependencies-index image manifests
3502ac2ab Remove unneeded toleration from catalog source pod
8188429e4 Add additional logs to syncCatalogSources
b3effc618 Merge pull request #1662 from awgreene/fix-webhook-e2e-test
f019f85cb Merge pull request #1669 from ecordell/gc-installplans
ff2ee560f fix(installplans): GC older installplans
7ca6ce962 Merge pull request #1645 from Bowenislandsong/feat/add-flake-analyzer
c6d569901 Merge pull request #1656 from exdx/fix/delete-grpc-e2e-fix
55ea14156 Merge pull request #1642 from dinhxuanvu/ocs-lib-fix
690347a67 Merge pull request #1655 from benluddy/unyum
305d4ea15 Bug: Fix incorrect deployment annotations
3ba83affa Merge pull request #1659 from dinhxuanvu/fix-deprecated-test
820db5c86 fix: explicitly delete collection of catalog source pods in grpc e2e test
28fe1bb5c Fix UpdateSingleExistingCRDOwner test case
54ec2f5e8 Merge pull request #1654 from benluddy/error-duplicated-solver-inputs
44d441f8d Fix validate CRD compatibility check and deprecated CRD test case
59995d9a9 Omit (hopefully) redundant yum update from downstream builder stage.
0e59b2509 Return an error when solver input contains duplicate identifiers.
9e5c6c421 Merge pull request #1641 from exdx/fix/crd-e2e-test
c581bb237 Merge pull request #1650 from benluddy/preferences-refactor
cc6e86884 Merge pull request #1629 from matskiv/unique-binding-names
9c9f305be Merge pull request #1647 from exdx/fix/remove-e2e-skip
d5cdd52e3 Refactor solver preference searching.
23c48dfe1 Merge pull request #1643 from Bowenislandsong/feat/e2e-artifacts
afb72be15 fix: remove bundle e2e skip
bac1cbd7c Add flake analyzer
18150f98d Update the e2e test case
c2dbcd51b fix(resolver): Exclude all installed packages in dependency search
bc1841d55 Merge pull request #1639 from ecordell/fix-metrics
84fc5feb0 Merge pull request #1623 from ankitathomas/plural_resource_in_relatedObjects
a6962c83c Bug 1855088: generate unique role and binding names When same permission rules are defined for different ServiceAccounts, OLM would generate same name for (Cluster)Role and (Cluster)RoleBinding related to this rules. This change should ensure that unique names are generated, taking into account ServiceAccount name and CSV Name and CSV namespace (for ClusterRole)
65c355cbf Merge pull request #1635 from njhale/fix-always-cleanup-e2e
7bd6c2276 feat: add parity tests to resolver
a97ce0076 fix: use server-side apply in crd e2e test when changing the subscription to point to a new channel to avoid transient object modified errors
9e63ad488 Merge pull request #1607 from njhale/adoption
dc4f6894f renaming / refactoring
aad28cd0a fix: Use PR head commit in artifact naming instead of merge commit
4438cc1f1 rename solve package
8e90ac0c5 Merge pull request #1478 from marcusportmann/master
543b569c5 Merge pull request #1637 from exdx/fix/vpa-crd-e2e
a5b29b4c6 fix(e2e): make problematic test specs eventual
092d68751 fix(e2e): copy rest config from test ctx
0870a36c3 fix(csv): prevent duplicate service ownerrefs
f03ceeb0a feat(operator): automatically adopt generated resources
1db5869c4 Merge pull request #1640 from njhale/skip-cr-test
42a972bdd treat dependencies generically
3b895b771 refactor dependency walking to avoid recursing
0f800116b fix: install VPA CRD directly on clusterfor bundle e2e test.
a5096dd30 support skip list in bundles
7341a41fc support startingCSV
cabdc2bd7 test(e2e): skip bundle cr install test
408a24b3e fix(metrics): query cache found object count metrics
8e1c299b0 Merge pull request #1636 from exdx/fix/check-installplan-e2e
a82db70fd pin etcd and grpc
465df39dd split old/new resolver and tests
33c9587bb test updating to a package with skiprange that is not head
de9d35d6f fix: add installplan check after subscription status check for gc tests. this will help reduce the e2e test flakiness as resources were sometimes checked before the installplan completed.
92c781053 test(e2e): delete all subs, installplans, catalogs, and csvs in test teardown
c1af96599 Merge pull request #1631 from exdx/fix/bundle-objects-test
6b3c309ce Merge pull request #1630 from matskiv/documentation-improvements
35ef62299 search for operators in catalog order
dac555dd3 move csvname filter to a predicate when finding bundles in the cache
768a8dd80 use cardinality-based AtMost constraint
5e2cec7bb resolver can resolve updates
665390c8b chore(deps): bump operator-registry
0f8841f62 don't mark virtual package nodes visited
3bdcaa030 Decouple filter predicates from the operator cache itself.
6fe6abc14 memoize bundle walking
ec3dc5c5f support semver ranges
d72759da9 use new solver interface in satresolver
836d35cb2 Adapt resolver unit tests to run with both implementations.
bac7177db Fix unit tests and add GVK dependencies extraction
d4ada84aa Strip plural from APISets in resolver cache
ee898423f Extract dependencies info from bundle and add to Operator object
717b951cc (feat): Add sat resolver for version dependencies
2b2c4cfe1 Merge pull request #1632 from benluddy/atmost-constraint
c4cd7ad83 Merge pull request #1604 from benluddy/test-csv-owned-api-retry-update
1147ce9d6 Add an AtMost cardinality constraint to the solver package.
9ff5ad0b6 fix: checkinstallplan status in bundle e2e test
b84d6989d fix: add kubebuilder to development requirements
50cdb32e1 fix: broken link in PR template
02060ef38 Bug 1855088: generate unique (Cluster)RoleBinding names
e0561c2c8 Setting resource to plural in relatedObjects
9febd1677 Merge pull request #1619 from benluddy/solver-preferences
a73043275 refactor(solver): small naming changes and iterative search
3a68739e3 Merge pull request #1618 from Bowenislandsong/feat/e2e-artifacts
d1c13c63b Retry update in flaky test of CSV w/owned API Service.
e4f48e0f5 Introduce preference order for solver.
745bd8e96 Allow ConsoleYAMLSample resources from bundle manifests
b6995763e Add workflow to save e2e test artifacts
fb2a2e988 Merge pull request #1577 from exdx/feat/support-pdbs
54258b940 Merge pull request #1617 from njhale/fix-e2e
61a270d43 test(e2e): patch installplans w/ server-side apply
3ea8e306b Merge pull request #1564 from exdx/feat/gardener-objects-bundle
486ca4b96 Merge pull request #1603 from anik120/subs_sync_metric_re-fix
4bed98128 Bug 1822396: Update metric when Subscription is updated
b3af2089e feat: add design docs for including additional objects in bundles
5deac9513 Merge pull request #1611 from exdx/fix/olm-book-link
d78799b02 Merge pull request #1610 from benluddy/metrics-test-matcher
5558d501c fix: update README to point to the OLM book website instead of github repository
86fba414c Merge pull request #1600 from kevinrizza/node-selector-update
20edf9fdf Merge pull request #1592 from Bowenislandsong/e2e-operator-failfast
856be6fba Add more precise matching to the metric end-to-end tests.
509fac3c4 feat: support new bundle object types: priorityclass, pdb, and vpa objects are now resolved from the bundle by OLM.
41feee706 Merge pull request #1596 from benluddy/assertions-in-assertions
7e610de6d Merge pull request #1598 from benluddy/e2e-local-nodes
68dd6da4c Fix a flaky CRD test.
4eb7bfed4 Merge pull request #1601 from kevinrizza/bump-version-0.16.0
5cc19b361 Disable parallel e2e-local runs by default.
a41857056 bump olm version to 0.16.0
1275235ad Update ocp manifests with latest template
24e78eaf6 Replace assertions within async assertions.
4e76eba9b Merge pull request #1589 from ecordell/ip-status-is-status
2525d918e Remove failfast from operator e2e test
db4cbcbc7 fix(installplan): don't store the manifest contents on the installplan
feaf1977b Merge pull request #1519 from anik120/subs_sync_metric_fix
64f80e7a5 Merge pull request #1583 from kevinrizza/bug-1847540
fe88505ed Bug 1847540: resolve only default channels
c8b448430 Bug 1822396: Delete subscription metric when an operator is uninstalled
8e05b8e83 Merge pull request #1562 from kramvan1/remove-deprecated-os-label
112a1035d Merge pull request #1579 from njhale/fix-default-logo
6242436b7 Merge pull request #1479 from camilamacedo86/add-contribution-doc
d3da93782 fix(package-server): get icons from default channel
eae7d0a46 Merge pull request #1578 from njhale/bump-api
5a00be47f chore(modules): bump api dep to v0.3.7
a401b7194 doc: add CONTRIBUTING.md
67d4ac887 Merge pull request #1512 from harishsurf/reporting
96cd8c4ee Merge pull request #1438 from camilamacedo86/uninstall-2
40e8b308d Merge pull request #1539 from anik120/0.15.1-changelog
2b4233852 Changelog for 0.15.1
40d46789c Merge pull request #1542 from benluddy/release-fixes
fa6c0a6a2 Merge pull request #1465 from benluddy/fix-goroutine-panic
4b18ae463 Merge pull request #1558 from benluddy/install-flakes
c8e001b31 Merge pull request #1443 from harishsurf/metrics-e2e
0a52ac8b1 Merge pull request #1501 from beautytiger/cleanup/duplicate_import
861d9990d Merge pull request #1563 from ecordell/weights
710493bd1 feat(resolver): don't build new clauses for weights
55eec053b feat: add uninstall
3018c771a beta.kubernetes.io/os deprecated since v1.14, removed in v1.19
39bf0c782 Merge pull request #1379 from awgreene/remove-webhook-enhancement
da441902e Merge pull request #1535 from exdx/fix/block-storage-version-crd
649df59ee Reduce install.sh flakiness.
11151c8c2 Merge pull request #1549 from ecordell/rbac-fix
7646ccbf6 fix: add check for storage version changes when installing CRDs. This prevents data loss when a CRD is upgraded and no longer supports existing stored versions of CRs on the cluster.
5f045c0b2 Merge pull request #1482 from Bowenislandsong/bug/updateDisplayName
7473aec47 Update PkgManifest upon catsrc update
9b507ca14 fix(catalog): no operatorgroups in a namespace should be an error when resolving
1e10c12bf Merge pull request #1550 from harishsurf/bug-1822040-og
0869e8db4 Convert metrics_e2e_test to ginkgo
cb7e74edc Fix delay when OLM applies label to Namespaces
5131c6860 Merge pull request #1521 from dinhxuanvu/required-api-package
b712bf1df Add more comments on e2e test case to clarify test flow
cf32df90c Add test for release installation instructions.
d166546a3 Merge pull request #1540 from awgreene/webhook-container-port
49c1fde91 Remove CRD manifests from 0.15.1 quickstart's olm.yaml.
bd15e2400 Preserve .crd.yaml suffix for manifests copied from api.
f3550584f Don't put CRD manifests into olm.yaml.
0e17c44da Merge pull request #1516 from exdx/fix/bug-1833195
34bbcc959 fix(webhook): Wire ContainerPort to Webhook
aca04c257 Merge pull request #1538 from anik120/manifests-0.15.1
ab0e18356 Manifests for OLM 0.15.1
b7891aa28 Merge pull request #1537 from anik120/bump-0.15.1
cef848348 Bump OLM to 0.15.1
92ec23767 Merge pull request #1525 from harishsurf/bug-1819308
f063fdbfa Address feedbacks on registry client interface
0f13ffff5 Compose registry client & interface under a new interface
923b93f2b Merge pull request #1533 from anik120/0.15.0-changelog
1e77c07f2 Changelog for 0.15.0
6bdb86b90 Add e2e test case to test multiple dependencies with same package
f9adcc282 Update unit test cases to adapt to new changes in NamespaceSourceQuerier
3480006cd Edit test cases to work with new changes on NamespaceSourceQuerier
a16ec47a7 Mockgen for registry client
abc44c8c2 fix(resolver): don't pick operator from same package when resolve requiredAPI
4d7cd4d69 Merge pull request #1472 from awgreene/podconfig-test-flake
f34530f60 Manifests for OLM 0.15.0
ba2cb1b3b Update scripts to include crds during release
55b9124b2 fix: add ownerrefs to bundle objects; add e2e tests for bundle object gc
14fae5e9a Merge pull request #1439 from harishsurf/pkg-msft-e2e
4181bcce3 Converted packagemanifest_e2e to ginkgo test
1d0bcd5a2 Merge pull request #1520 from awgreene/packagemanifests-keywords
dd49980c3 Merge pull request #1513 from njhale/fix-qset
06e71752c Deleting a CSV removes related CSV metrics
424dc2928 Pod Config Deployment Hash Error
74ce8c1c0 PackageManifests should include CSV Metadata
fce8caf9d fix(queues): requeue events against all-namespace queue if present
552187525 Merge pull request #1424 from harishsurf/e2e-part1
4bac72c0f Modify dynamic_resource_e2e_test to ginkgo
eb9959d86 Merge pull request #1515 from awgreene/robust-webhook-selector-test
b2098e361 Modify prow ci logging for e2e tests
b12c6244f Update Webhook E2E Namespace Labels
3566b2442 Merge pull request #1429 from harishsurf/e2e-gc
46b6c1b26 Merge pull request #1509 from awgreene/csv-updated-on-webhook-change
de8797b47 Detect WebhookDescription changes in CSVs
620986f1b Merge pull request #1503 from anik120/bump-olm-version
b6da2f600 Convert gc_e2e to use ginkgo
e533e19b7 Merge pull request #1489 from awgreene/webhook-unique-names
ffe908629 (fix) Admission Webhook names must be unique
4b8166082 Bump OLM version to 0.15.0
e52a0cd1a Merge pull request #1496 from awgreene/operatorgroup
df543faf2 Fix upstream.Dockerfile
51ae73552 Update OLM to use UID for OG Labels
5a46a5dce cleanup: delete duplicated import in olm
8f8a1a86d Merge pull request #1470 from exdx/fix/bug-1825330
2f9a54c2c fix: address sttts feedback
fb457991d fix: support creating v1beta CRDs to avoid data loss during conversion to v1. Due to data loss during client side conversions OLM will support two different paths for v1 and v1beta1 CRDs.
90a8b4aa8 Merge pull request #1483 from awgreene/dependency-bug
af714e91b fix(resolver): Transferring API Ownership
44cf5cf8b Fix Operator Generation code
38098eedd Changed address for readiness probe and liveness probe on registry-server
105cf4b61 Merge pull request #1468 from njhale/op-disc
db879834d test(e2e): correct tls detection in metrics spec
8c8e60bf6 test(e2e): make operator resource creation eventual
a6afaddc1 test(e2e): simplify csv requirement event spec
ef7257da7 chore(modules): pin controller-runtime to master
335a24af9 chore(manifests): include double-hyphen olm deployment options
9adb4efdb fix(client): supply missing params
da527ce92 test(operator): gracefully stop test controller manager
9c5a9337d fix(operator): swap top-level update for status update
8840a5a65 feat(operator): enable configmaps to be operator components
9322a0fa1 test(lib): add unit test for metav1 time conversion hook
1b519dbf6 chore(make): use existing kubebuilder installation
e428e8b84 chore(logs): set manager setup log level to 4
0e759d6f1 test(operators): add e2e test for the v2alpha1 operator resource
738e9ee07 feat(operators): add v2alpha1 operator controller
08e085e83 Merge pull request #1458 from benluddy/resolver-cache
a9a42c2ed Add an operator cache for use by the resolver.
b2b68b9a4 Merge pull request #1464 from ecordell/ofapi2
5f230069e Catch failed Ginkgo assertion in test goroutine.
fe19a530c chore(api): switch to operator-framework/api
b664fed89 fix(secret): use a synthetic kind instead of an api field to determine bundle secrets from pull secrets
81650bbaf chore(make): copy crd manifests from apis repo
4745e326f chore(deps): bump to kube 1.18
56f1a45b6 Merge pull request #1447 from exdx/feat/support-secrets
3cbeec064 Merge branch 'master' into feat/support-secrets
09cd6b564 Merge pull request #1460 from benluddy/fix-unpack-test
10e77a9ad Fix failing E2E bundle unpacking test.
bfccbaa7a Merge pull request #1440 from benluddy/sat
274e03836 Add initial SAT solver package.
9f0784075 feat: support secrets from bundle
cc9352619 Merge pull request #1455 from exdx/fix/add-empty
62d866165 fix: add empty go file to packge to fix make verify
2795e5660 Merge pull request #1416 from exdx/feat/v1-crds
6a37a199a feat: support v1 CRDS in OLM. Simplify InstallPlan Execution via new Stepper interface. All CRDs will be converted and handled at the v1 APIVersion.
15825bacc Merge pull request #1454 from benluddy/regenerate-test-chart
7c893c486 Regenerate the chart embedded in the test installer as needed.
88654beec Merge pull request #1451 from harishsurf/github-workflow
4e90e55a5 Merge branch 'master' into github-workflow
27610abe5 Merge pull request #1452 from njhale/fix-image-build
f1c2eb3a2 chore(gh-actions): install conntrack before minikube
906b22a0a fix(docker): include util dir in upstream image build
42a64c175 test(gh-actions): add upstream image build test
783882c70 Merge pull request #1436 from awgreene/admission-webhoooks
68aafcc8a Added Github workflow for running e2e tests
478af2f24 OLM Support for Admission Webhooks
86057a491 Move APIService to installer
ceb8545f3 Merge pull request #1446 from njhale/kb-assets
84a82d3ae chore(docker): add kubebuilder to base image
5fb92c868 Merge pull request #1442 from dinhxuanvu/owners-component
0b3bcb1bc Merge pull request #1434 from exdx/feat/support-configmaps
edc57f3af feat: support configmap creation from the bundle
1cda8b82c Merge pull request #1444 from exdx/fix/fix-catalog-polling-test
3c024be07 fix: use busybox csv for polling e2e test
c7d109aa7 Add BugZilla component to OWNERS file
4f5b08c84 Doc: Remove legacy webhook proposal
1c49808fd Merge pull request #1418 from awgreene/apiservce-reorder
182566ed9 Merge pull request #1410 from benluddy/e2e-go
d35504c2f Create APIService after API server deployment
5c619adc6 test commit please ignore
1e50f968a Merge pull request #1419 from njhale/fix-codegen
6023448e0 chore(codegen): update to drop license year
68b1a703f chore(codegen): use controller-gen for deepcopy
f5ece8e07 chore(codegen): remove license year from boilerplate
91afbda97 Merge pull request #1350 from flickerfly/patch-1
f0fee0b7d Merge pull request #1414 from njhale/fix-nilref
c4824d268 feat(catalogs): add spec validation for sourcetypes
6ee3f23a7 Merge pull request #1387 from dinhxuanvu/pkgm-csv
95a7bfcb2 Merge pull request #1408 from awgreene/reconcile-namespace-og
1b73afe38 fix(sub): prevent nil pointer access
0195afb06 Merge pull request #1411 from benluddy/clusterscoped-gc-tests
9d422bc25 Reconcile Namespace OG Labels in Namespace Syncer
2b2b1858d Update the code and test case
ef8614707 Add tests for GC assumptions.
7d8987a18 Update related images func and test case
338586617 make codegen for packagemanifest changes
0fc809408 Add more CSV information to the PackageManifest
4a2d1a014 Merge pull request #1370 from anik120/bump-k8s-1.17-rm-k/k
030e6841e Merge pull request #1224 from Jamstah/master
d9ac63c9a Merge pull request #1401 from ecordell/fix-bundle-install
64aabcb89 chore(apis): Regenerate API types for openapi3 specification
c418778b5 Merge pull request #1398 from awgreene/operatorgroup-labels
a5142bc73 chore(deploy): update manifests
ac0c454f0 fix(bundles): include csv name in installplan for bundle images
96a15cc02 Add OG label to namespaces in OperatorGroup
5ccb5f9d0 chore(deps): bump to kube 1.17.3
f9473fee0 Merge pull request #1391 from benluddy/helm3-chart
c2e7151c9 Merge pull request #1372 from harishsurf/ginkgo-e2e
00568b748 Convert e2e go tests to ginkgo
d6d8f0531 Merge pull request #1388 from awgreene/test-2-apiservices
63848c351 Merge pull request #1389 from ecordell/remove-catsrc-memlim
ec04c310c Update chart to use the new "crds" directory.
86437faac Merge pull request #1381 from harishsurf/fix-typo
e043b38f0 Merge pull request #1390 from benluddy/og-conditions-flake
6ea521dba Ignore differences in CSV .status.conditions in unit tests.
6237dc399 Add e2e test for multiple APIServices on a pod
88b5b1ba1 fix(catsrc): remove limits on catalogsource pods
1ab6a9452 Fix typo in subscription.crd template file
06d852196 Merge pull request #1339 from awgreene/bug-1805412
b1dce629c Rewrite
6e3932972 Merge pull request #1073 from javanthropus/add-security-context
9d236a8dd Merge pull request #1371 from ecordell/alert-sev
f81ec068c Merge pull request #1334 from umangachapagain/subs_config
8630695db Add updated manifests from make release
c499308f5 Optionally lock down package server runtime environment
33cc7da0d manifests(prometheus): failing operators should be a warning
dcb5971da Merge pull request #1313 from madorn/patch-2
785ddd6d1 Merge pull request #1348 from benluddy/api-clusterrole-ownerrefs
8a0754125 Support multiple At PIServices on a single Deployment
528363f3f Make provided API ClusterRoles be owned by the corresponding API.
0b36b4b17 update examples for Subscription config features
e3ed855eb (test) update e2e test
aa94aa77e (feat) inject 'Tolerations' & 'Resources' from config
beb129520 Merge pull request #1353 from ecordell/jittery
d273283fa feat(jitter): add jitter to controllers to smooth out our spiky resource usage.
3d3422b97 PackageManifest isn't actually a CRD
f18f89376 Remove specific client tool names
73680b27d Merge pull request #1341 from njhale/fix-ip-orefs
8a820c936 Clarify roles and adds info about Package Server
403a33371 Merge pull request #1340 from simrandhaliw/update-subs-sync-total-metric
cf35327ec fix(installplan): crs are ownerreferenced to their resolving csv
4dcad6720 test(installplan): add cr ownerref unit testcase
b462e7ddb Bug 1809294: Update subscription_sync_count to include the package name
12a8b69bd Merge pull request #1337 from njhale/fix-run-local
ccd6755ee Merge pull request #1332 from benluddy/unbreak-minikube-script
f99d7e9fc fix(make): build cpb as prereq of e2e-local
72e50d5f3 Merge pull request #1316 from njhale/installplangen
b96cbc5ea Merge pull request #1301 from ecordell/depspec-hash
93e29bea8 Unbreak the minikube mode of build_local.sh.
92c7d1921 style(logs): mention generations instead of manifests for subs
0f2d1790a fix(subs): retry status update on conflict
9aa59eff6 Merge pull request #1308 from dinhxuanvu/remove-run-level
66fdeb024 Merge pull request #1322 from exdx/fix/duplicate-packages
b4dbade36 Merge pull request #1323 from benluddy/unblock-on-start-error
149a7c0b7 test(installplan): ensure single installplan per resolution
887102abb fix: use label selectors in package server List response for all namespaces if label selectors are provided
fe0fb1cc9 fix(deployment): remove separate operatorgroup annotation updater
a74c49f41 Merge pull request #1324 from benluddy/local-kind-detection
abacf871f Merge pull request #1319 from Bowenislandsong/stalebot
3e79ee5a8 fix(deployment): use deployment spec hash for determining if change  is needed on cluster
0dad6c092 Fix kind detection for local builds.
2787f38ac Don't block on ctx.Done() if startup fails.
90b291a37 Fix TestUpdateCSVInPlace e2e test case
4bccd9087 fix(resolution): add generation to installplan
7d230384e Add stale bot
f77eb7018 Merge pull request #1314 from awgreene/olm-book-doc
b42cc1699 Update README to include OLM-Book
4ae604918 add link to olm-book definition of subscription
edf563cfd Merge pull request #1307 from madorn/patch-1
1da145e91 Remove run-level 1 from olm and openshift-operators namespaces
e25a75c33 Update subscription-config.md
376197a97 Add some examples for Subscription config feature
5c5423670 Merge pull request #1300 from awgreene/bug-1798051-copy
cf72e5b4d Bug 1798051: Reinstate v1alpha2 operatorgroup
da45918d8 Merge pull request #1284 from dinhxuanvu/pkgm-fix
f23312756 Merge pull request #1252 from njhale/fix-bundle-extract
112de3e2e Merge pull request #1278 from kevinrizza/version-0.14.2
40fa07a45 feat(util): add cpb command
a60a41166 Merge pull request #1257 from exdx/fix/polling-e2e-test-registry
f56148540 Merge pull request #1282 from dmesser/readme-update
1803e5a4c fix: update e2e test to use internal docker registry and openshift registry. removes quay credentials.
23631fba1 fix(packagemanifests): Fix index key func to avoid key collision
ad0638098 mention OLMs features in the introduction
4202372e0 fix(bundles): execute opm from tooling container
4fb7859fe Merge pull request #1277 from benluddy/fix-ready-not-closed
fdcc6ecb7 Fix cases where an operator's ready channel may never close.
ab96e3061 Bump version to 0.14.2
4c2d221f3 Merge pull request #1268 from kramvan1/fix-1238-configmap-probes
2a0f757b9 Merge pull request #1276 from exdx/fix/update-robot-creds
861c4c56e fix: update existing robot credentials
172b16f38 Merge pull request #1274 from Bowenislandsong/Makefile
6722fc968 refactor rh-operator test directory
662564c78 Merge pull request #1261 from njhale/update-owners
e285a00a8 Merge pull request #1265 from benluddy/manifests-for-0.14.1
c9a31cea1 Merge pull request #1266 from benluddy/changelog-0.14.1
26f3fd842 Merge pull request #1267 from ecordell/fix-bad-opgroup-annotations
c049549c5 Merge pull request #1171 from exdx/bug-1777144
8752b897e BUG 1238: Fix configmap registry server readiness probe timeouts
6ec6514d6 fix(gc): clean up copied csvs that have incorrect operatorgroups
368caf0cb test(e2e): add test to reproduce bug where copied csvs with annotations
7f9657813 Generate changelog for 0.14.0 and 0.14.1.
2c8af04ec Generate manifests for version 0.14.1.
aedaf153f Merge pull request #1264 from benluddy/version-0.14.1
e3c18253f fix(operatorgroup): don't overwrite operatorgroup annotations on copied
121fb85ed test(ci): add failing test assertion showing that operatorgroup annotations on copied csvs will get overwritten to the wrong thing
11945b37a Bump version to 0.14.1.
43dd62290 Merge pull request #1258 from benluddy/revendor-registry
5d3e7e771 chore(ci): update owners
ae082363c Update operator-registry dependency to v1.5.8.
c6ad718fe Merge pull request #1250 from benluddy/fix-release-gitignore-pattern
04a07526a Merge pull request #1253 from awgreene/dynamic-client
0b24bdb1d Fix overly broad .gitignore pattern that was excluding a vendored package.
184e1e1c4 Add support for Prometheus Custom Resources
20c1033be Merge pull request #1248 from benluddy/version-bump-0.14.0
4123504a4 Bump version to 0.14.0.
6c7320ce2 Merge pull request #1247 from benluddy/vendor-helm
2d252327b Vendor helm, since it is used for templating manifests.
a135d9d9a Merge pull request #1233 from Bowenislandsong/e2e_metric
1a1940514 adding e2e test framework for rh-operator metrics
6858f165b Merge pull request #1231 from benluddy/e2e-test-ipv6
ce7b927af Merge pull request #1228 from benluddy/helm-template-v3
bb30b1ddc Change to using a hash instead of ordering
a81253d9b Addresses the bug where updating the packageserver fails with a unable to adopt APIService status message. This is a result of ownership mismatches between the packageserver (owner) and the APIService (the owned object). This can be resolved by setting the actual k8s owner references or the label-based references that OLM uses. This commit ensures that ownership references for the APIService are cleaned up on OLM restart and that the olm.owner:packageserver label is set on the corresponding APIService object.
aa7a49034 Merge pull request #1235 from robszumski/update-proposal
92dde5519 Merge pull request #1219 from ecordell/test-ci
193ba4980 update internal objects proposal
2d442b3a8 Merge pull request #1229 from benluddy/release-doc-prereqs
44ebf7c7b Merge pull request #1232 from exdx/fix/doc
ca965a2d9 fix: typo in catalog polling doc
af11ce01a Merge pull request #1220 from ecordell/packagserver-labels
ebcc695f8 Fix IPv6 incompatibility in TestGrpcAddressCatalogSource.
13772ff2a feat(packagemanifest): add default os/arch labels if not present
e6d0273bc Merge pull request #1226 from exdx/fix/catalog-polling-spec
2653e086e Remove pyjq and yq from the release documentation prereqs.
ad3d9140d Update release script to require version 3 of helm.
ce31edd6c Merge pull request #1097 from robszumski/proposal-internal-image
285b9ca05 Merge pull request #1225 from benluddy/manifest-templates
f7ba83ccf fix: refactor catalog polling spec to use more general update strategy field
042d7fa19 Reconcile manifests with templates.
3217fd46c Add alm-examples-metadata
cdd04e244 Merge pull request #1215 from njhale/unpack-bundles
302ae173e test(e2e): fix subscription update flake by retrying
d8d902573 docs(design): add bundle image unpack design
bead4ccab refactor(resolve): simplify bundle lookups
7f339d092 fix(catalog): add ownerreferences for bundle image resources
c01fa467c fix(e2e): remove local dev test registry image
f7ab7e3eb fix(e2e): remove local dev test image
1df508a4c test(e2e): add test for bundle image
3396ed2b5 chore(fakes): make mockgen
15a5147f7 chore(codegen): make codegen
2aadb869f feat(bundleimage): resolve bundle images
40cb8ccab feat(catalog): make install possible from bundle image
47697f399 chore(vendor): get latest operator-registry
a99cf0776 Merge pull request #1161 from exdx/feat/catalog-polling
7978bb9cd chore(build): only enable cgo for ci/prod builds
c5f2e9758 Revert "feat(packageserver): support label queries and copy CSV labels onto the packagemanifest"
88d76135d feat(packageserver): support label queries and copy CSV labels onto the packagemanifest
d5917a5ea feat(packageserver): support label queries and copy CSV labels onto the packagemanifest
a241df47b feat: add polling doc
ac4864ca3 fix: update Poll to be pointer
ca65ac3af Merge pull request #1217 from benluddy/vendored-yq
099921692 feat: implementation of catalog polling feature with e2e test
6cdf06d3f Use vendored transitive dependencies for "go run" of vendored yq.
62691f243 Merge pull request #1216 from jianzhangbjz/kuryr
dcd4db1f2 Enable CGO and CGO_DEBUG
a7fb3e9a8 Merge pull request #1212 from ecordell/ci-base
2cb787f4a chore(codegen): update generated code for 2020
43458956b chore(ci): add dockerfile as a base for building in CI
1a21520e6 Merge pull request #1173 from beautytiger/dev-191205-errcheck
d6e406f9b Merge pull request #1154 from Intermax-Cloudsourcing/fix-run-console
61f1b24ed Merge pull request #1105 from ecordell/trust-grpc
2c0e34f4b Merge pull request #1185 from clyang82/br_olm_versions
db14fd512 Merge pull request #1207 from ecordell/remove-limits
45b0907cb test(e2e): testing CRD upgrades shouldn't create a new subscription
3f3bd125a feat(resolver): rely on info from catalog to determine updates
02b289dd4 fix(deploy): remove resource limits
fb4548dda Merge pull request #1202 from njhale/cleanup-codegen
47c7e969b chore(vendor): update
db5bad726 chore(codgen): regenerate code, mocks, and openapi
17b39d0a0 refactor(pkgsvr): remove apps group
04d2c823d chore(codegen): clean up codegen make rules and scripts
0cab798bc chore(ci): remove old gitlab ci config
46aa2a5bf Merge pull request #1152 from njhale/design-goals
0cae336db Merge pull request #1194 from ecordell/csv-fallback
8e4880401 Merge pull request #1157 from awgreene/prune-unknown-fields
f6767bb59 feat(resolver): fallback to csv parsing if grcp api does not contain the information required
41c8c8d2e Merge pull request #1192 from gyliu513/etcd
330999145 Corrected etcd CRD URL.
b69a18fee Merge pull request #1163 from gyliu513/high-light-yaml
05124913e Merge pull request #1176 from jmccormick2001/doc-bundle-breadcrumb
75f4ff122 Merge pull request #1187 from gyliu513/dep
a948f986c Dep is not required.
57e76cac2 Add note for version field
d8c26fd45 docs(design): add general design goals
bdc3e72e2 Update manifest CRDs
b1d4c8712 Implement controller-gen
1d74e7d4e Update CRD go types
ce298fcab Merge pull request #1150 from njhale/spur-pkgsvr
4ba847801 chore(git): remove and ignore packageserver test key pair
bb936402e chore(modules): vendor deps
f69ddb6dd fix(packageserver): cache packagemanifests
8d5a38c18 Merge pull request #1175 from awgreene/test
e9ab0d60b Fix CI unit tests
d6b393db9 add a mention of bundles to the README to help users find bundle information
b697bbb17 fix: add err check before further operation
b9541d4f6 Merge pull request #1125 from dinhxuanvu/sync-improve
5fef82d31 Change index func to return list of ns instead
20a473cac Added `keywords` in operator metadata.
3316e73ef Merge pull request #1151 from jpeeler/cert-rotation
e2136b71f Merge pull request #1123 from Bowenislandsong/bugfix_dup_secrets
baef6f536 Fix updateInternalCatalog namespace bug
f8a759c74 Add e2e test case for syncSourceState
10e929350 Enable multiple namespaces sync if catsrc is updated in global ns
4cf347298 Bug 1769030 Replacing (updating) operator creates duplicate secrets for the operator's ServiceAccount
5435cfaf3 feat: make run_console_local.sh sh compatible
0792b0f52 fix: make run_console_local.sh working on WSLv1
e9e8f4985 bug(metrics): serve metrics using new certs when replaced
d78b41f18 feat(filemonitor): add new filemonitor package
0645ebeb6 chore(modules): add fsnotify
1a95d31ce Merge pull request #1147 from dinhxuanvu/unit-fix
13860d5d9 Merge pull request #1142 from Denton24646/bug-1760608-resource-limits
1138f3510 Fix minor namespace bug with NewFakeOperator
a0301923f Update k8s version for local cluster (1.16.2)
70e8c2159 fix: double limits
b17f500f9 fix: double packge server limits for CI
e1574e34c feat: add resource limits to all OLM pods for OLM releases on OCP above 0.13.0
3d9b0c6ab Merge pull request #1116 from Denton24646/fix/catalogsource-context-leak
49bb20259 Merge pull request #1137 from gallettilance/release-docs
eedfb5100 Merge pull request #1132 from Denton24646/fix/operatorhub-catalog-windows-vm-scheduling-bug
9e0318d85 fix: simplify test by removing additional map
570808327 feat: add test to confirm node selector behavior
40d868a9c fix: add NodeSelector to catalogsource pod spec
e24ca3a33 Merge pull request #1135 from gallettilance/release-changelog
57a200dbb Merge pull request #1134 from gallettilance/make-new-release
c5f7ee9bf [release] updating changelog
3c7f94379 [docs] update changelog command
6bd05fba8 Merge pull request #1114 from jpeeler/fix-status-invalid-csv
665319353 [release] - making new release
ea140d7be Merge pull request #1130 from gallettilance/version-bump
5ce35a378 Merge pull request #1131 from gallettilance/new-release
c2fa1a492 [docs] - update release docs
e531d001c [release] - version bump
a0d1ea445 fix: defer RUnlock in AsClients
18c15a386 fix: use defer cancel to cancel context waiting for state changes
cbcf7796a Merge pull request #1115 from bandrade/subscription-config-doc-adjust
24653792d Fixing doc typo
9527d7d9e fix(olm): defer provided api update in operator groups
f510cc902 Merge pull request #1096 from beautytiger/dev-191029-tfatal
21e57eefe Merge pull request #1111 from dinhxuanvu/fix-flaky-e2e
25ddd845a Fix flaky subscription e2e test case
07af0d106 Fix several flaky e2e test cases
3b41a4dc4 Merge pull request #1104 from anik120/add-promethues-rule
8bec5a0af Alerts for failing OLM operators
e1a383faa Delete file that was renamed
6085eb699 Merge pull request #1100 from awgreene/increase-cardinality-on-csv-metrics
417a973f4 Swap annotation namespace
1d463935e feat(metrics) Report subscription channel
c53417f2f Merge pull request #1101 from ecordell/resolver-required-apis
2dc06d2ac feat(resolver): use provided and required apis from grpc instead of calculating from the csv
c6f1304b8 Merge pull request #1099 from awgreene/limit-cardinality-on-csv-metrics
3674abbbd Use the correct title
7c814f265 Ammend proposal to include data CRDs and new annotation names.
a35c3b29c feat(metrics) Limit Cardinality of CSV metrics
5b4afbb7d Merge pull request #1095 from gyliu513/update-operators
def5f2e48 Merge pull request #1094 from dinhxuanvu/minkube-status-fix
d41cd0bb9 Add unit test for minKubeVersionStatus
009151be1 Merge pull request #1089 from gyliu513/customize
6730f38b6 doc: add internal image proposal
f0a3566fc fix: t.Fatal should be used in main goroutine
ccda1d25a docs: Corrected CSV upgrade version.
46f72fbe6 Merge pull request #1092 from Denton24646/fix/docs-fixup
40cc6459a fix(olm): No longer report status if minKubeVersion not specified
7ef66b823 fix: refresh architecture and philosophy
b6208c864 Updated values.yaml location.
d45959783 Merge pull request #1085 from operator-framework/ecordell-fix-logs
129997451 Merge pull request #1086 from Denton24646/fix/csv-documentation-typo
0fcaa0d0d fix: fix particular typo in clusterserviceversion_types.go
5f42cdfe8 Update resolver.go
6939b516e Fix log message in resolver
97d9c7a75 Merge pull request #1083 from sbose78/patch-1
bcd443dbd URL with modified manifest directory structure
5d3831f7f Merge pull request #1080 from awgreene/initialSource
c1d2699d5 Merge pull request #1078 from awgreene/update-package-table
2810eaa13 Merge pull request #1071 from beautytiger/dev-191011-nilmap
99c780af6 Merge pull request #1054 from tkashem/proposal
ba5a9d197 bug(dependencies) Prioritize APIs from same CatSrc
930279b29 Merge pull request #1079 from alecmerdler/remove-alecmerdler-owners
c0fa43829 Merge pull request #1069 from ecordell/relatedimages-proposal
8a0e2f31d update OWNERS
1e5e2e957 Update PackageManfiest table handler
70e41728a Merge pull request #1059 from dinhxuanvu/installplan-approval
cde129861 Merge pull request #1058 from awgreene/sub-config
0dc42b12d Merge pull request #1067 from operator-framework/apk-up-1
420a2847a bugfix: assignment to nil map will cause panic
560325a59 Fix InstallPlan stale variable issue
fc6f6233d Add e2e test case
0843f7499 proposal(relatedimages): combine the two previous proposals
80aadbd2c proposal(relatedImages): update related images proposal to use kustomize
816662558 proposal(relatedImages): add a proposal for specifying related images in CSVs
02355a625 Add document for SubscriptionConfig
5942fea8d feat(subscription) Config Volume and VolumeMounts
29e1854e4 Rename envVar package to overrides
7d2db3312 Add `apk upgrade` to upstream builder
b77cc4ace Merge pull request #1065 from spadgett/fix-console-link
652bc5c63 Fix links to console repo for moved packages
14d6f0798 Merge pull request #1062 from awgreene/fix-install-script
1ccd84303 bug(install) Fix packageserver name in install.sh
807db4999 Bug 1758008: Manual approval strategy ignored for subsequent releases
b30729903 (proposal): add bundle image deployment text
7a004cf12 Merge pull request #1055 from awgreene/csv-health-metrics
3b86f8648 feat(metrics) record CSV sync events
2ef3ef37c Merge pull request #1056 from awgreene/make-e2e-bug
59c8596b9 Bug: Fix olm chart
05f703022 (proposal) Make bundle accessible to a cluster
f0bfbb67a Merge pull request #1052 from njhale/bump-openshift-client-go-version
7a898691c chore(modules): update vendor dir
cac3406a7 chore(modules): bump openshift/client-go pseudoversion
45bdb14d9 Merge pull request #1051 from awgreene/changelog
f3a42bec6 Merge pull request #1048 from ecordell/k8s-1.16
cef67da2c Merge pull request #994 from njhale/shell-lib
b54586244 Merge pull request #996 from njhale/fix-tags
21e0b2277 Merge pull request #995 from njhale/refactor-opstatus
8daaa439f (release) Update changelog
e3dd1540e Merge pull request #1050 from awgreene/manifest-0.12.0
39d24fd50 (release) Generate manifests for 0.12.0
e58e3d43d Merge pull request #1046 from awgreene/release-0.12.0
1f979f072 chore(deps): bump to kube 1.16
370e31ec1 Merge pull request #1047 from awgreene/docs
74295d326 (docs) Update release.md documentation
a89680d52 (release) cut a release for 0.12.0
c5c9efabb Update PULL_REQUEST_TEMPLATE.md
f995cc631 Update PULL_REQUEST_TEMPLATE.md
2dfa925b2 Update PULL_REQUEST_TEMPLATE.md
79a92fbb1 Merge pull request #988 from dinhxuanvu/update-csv
b5f0f797c Merge pull request #1039 from jpeeler/bug1749036
160f52e26 (doc) How to update operators documentation
03d4e769a test(e2e): add operator group SA permission tests
17c04dc5a fix(olm): requeue as needed upon permission changes
fed600926 fix(olm): handle CSV install failure gracefully
0cbd28c9b Merge pull request #1038 from skitt/go-1.1x
17bb059cc Enable vendoring on Go 1.1x
2595af7f0 Merge pull request #1027 from ecordell/depup
d82e71cd9 feat(olm): don't calculate a patch when updating via a replacement chain
bb6413343 Merge pull request #983 from dinhxuanvu/removeDeprecated
9c295523d Merge pull request #984 from dinhxuanvu/crd-update-docs
07ea73c61 Merge pull request #1033 from njhale/fix-docs
54923da18 chore(docs): consolidate doc directories
dd81460e4 (doc) Add deprecated CRD version procedure and note
3fb49bb14 Merge pull request #1031 from dimitraz/fix-links
a92826603 Fix broken doc links
7fb132565 Add unit and e2e test cases for deprecating a CRD version
987952733 Merge pull request #1029 from njhale/fix-pkg-list
089c7c915 Merge pull request #992 from camilamacedo86/fix-doc
c05682e09 Merge pull request #991 from camilamacedo86/github-templates
a9b2fa632 fix name of dir - replace Documentation for doc
816ff27e2 Merge pull request #993 from camilamacedo86/README
9ef425419 Merge pull request #1019 from skitt/dns-suffix
fc77d31a1 fix(registry): return all valid packages
6c2cb4840 chore(mocks): generate mock list packages client
6a5fd922a Merge pull request #1026 from alecmerdler/bugzilla-1748771
f934999cf Merge pull request #1018 from jpeeler/add-fields-related-objects-2
b176583bf fix(clusteroperator): update status after initial creation
77cce5479 fix(clusteroperator): fix naming of related objects
85bfc4312 add default for packagemanifests/icon subresource
4b9969934 Merge pull request #1023 from tkashem/bz-1744245
f79647bfb Merge pull request #1025 from njhale/clean-env
e64f62286 fix(init): cleanup leftover cross-namespace  ownerreferences
79143ac99 feat(readme) : Ajustments
bfefa59e5 feat(github) : Add github files in order to follow org standard
0141a890d Bugzilla 1744245: Subscription should not point to deleted ip
109153ae7 Drop the hard-coded DNS suffix
0cd00dd5a Merge pull request #1011 from skitt/pgrep-no-q
72b6a8d5e Remove deprecated CRD's stored versions to allow CRD update
fe8dff2a9 Merge pull request #1014 from awgreene/configure-global-catalog-ns
37467b317 feat(clusteroperator): plumb additional clients
34a934f79 [CatalogSource] Set Global Catalog NS with EnvVar
f67454030 Merge pull request #1013 from kevinrizza/bug-1741799
86810199f Remove InstallPlan Source, SourceNamespace from UX
da3c9fcd0 Merge pull request #1012 from jpeeler/add-fields-related-objects
83341f520 fix(olm): report name and group for related objects
be15bd5cb Stop relying on pgrep -q
fd42877ef Merge pull request #989 from ecordell/packageserver-upgradeable
5174ca8c6 Merge pull request #978 from tkashem/bz-1737057
7b850f99c Merge pull request #1008 from ecordell/grpc-update
19dfe701a Merge pull request #1006 from tkashem/bz-1740332
5edeb9c0e feat(sources): syncronize access to lastupdatetime for sources
73fdcf346 chore(deps): update grpc dependency
1c75ca4c8 Bug 1740332: OLM should resume operator install
9cb7d109d Merge pull request #1005 from alecmerdler/bugzilla-1744490
ae365b171 Merge pull request #1002 from alecmerdler/bugzilla-1727800
dc39aeaab add packagemanifests/icon to aggregated OLM RBAC roles
2445a1902 Merge pull request #998 from ecordell/update-perms
335bb6c01 Merge pull request #980 from dinhxuanvu/display-catalog
b4d5adf5d Merge pull request #973 from dinhxuanvu/crd-versions-fix
64ab35654 Merge pull request #970 from jpeeler/cleanup-roles-sa
4a4ae9c85 Merge pull request #939 from tkashem/csv-reporting
543a27d08 Merge pull request #924 from galletti94/master
f489d8cd9 feat(operatorstatus): report packageserver as upgradeable
200084864 test(e2e): add test verifying permissions are updated during an operator upgrade
3ea223264 Bugzilla 1737057: Sub CRD does not validate config
daba5228a Merge pull request #1001 from tkashem/fix-missing-ip
73d5df35f filter icon fields from PackageManifest object (use packagemanifests/icon subresource instead)
73e74d015 Bug 1744245: recreate of sub should not fail install
6a81f7f0a Merge pull request #990 from alecmerdler/OLM-1211
e1ade4bb0 packagemanifests/icon subresource
5b4a0053f fix(spelling): just a comment correction
1a0325a02 fix(olm): clean up resources on CSV deletion
cf4349220 fix(subscriptionconfig): add missing merge struct tags
ce42d8bac refactor(operatorstatus): make monitor constructor variadic
9bd7065bf feat(scripts): add shell lib with some common helper funcs
0b60b8ee7 test(e2e): ensure resources are deleted after CSV delete
d885cf2ad Merge pull request #985 from alecmerdler/OLM-1211-proposal
5209579a0 Merge pull request #974 from tkashem/catsrc-status
987609830 Bug 1737081: catsrc status should show error
beda2d82d Merge pull request #987 from jpeeler/local-ns-rename
3b10b4189 Bug 1732914: Operator upgrades fail when versions field is not set
a6605bd75 fix(deploy): change local deploy to use olm namespace
75d7ad1fe add proposal for 'packagemanifests/logo' subresource
7281b9125 test(grpc): add basic connection event tests for source manager
f9ae16b49 feat(grpc): adds grpc source manager which notifies main controller when grpc events occur.
c485cad60 Merge pull request #960 from dinhxuanvu/relatedobjects
4dba884c8 Bug 1702552: Two "NAME" fields by command "oc get catalogsource"
3c06e88e9 Merge pull request #969 from tkashem/doc
9c683f5ae Merge pull request #968 from tkashem/release-doc
6bd80c98b bug(1717636): Add relatedObjects to cluster operator status
4edaafada Merge pull request #971 from kevinrizza/report-upgradeable-clusteroperator
c8bfa53a4 Merge pull request #965 from jpeeler/existing-installplan
e781b89fb (doc) add doc for scoped operator install
98c23f6ea Report `Upgradeable` in ClusterOperator status
974bf5509 Merge pull request #967 from tkashem/changelog
f77932cef (doc) update make new release doc
67d15b445 (release) update changelog
5b7433362 Merge pull request #966 from tkashem/release-0.11.0
be4c7f2c9 Merge pull request #961 from tkashem/bz-662263
8fa586d30 fix(unit): allow logrus log level to be adjusted
695f6d776 fix(catalog): re-install resources in existing installplan
6e109b4ea Merge pull request #958 from tkashem/follow-up
8f85cafc3 (release) generate manifests for 0.11.0
27b5042b7 (e2e) fix e2e test flakes
202406f45 (feat) requeue the csv when subscription changes
360f75b35 Rename and remove commented code
c5564e7cd Merge pull request #962 from tkashem/release
3e65dc786 (feat) empty proxy env var should result in unset
484b866ca Merge pull request #959 from cblecker/label-panic
db884e743 (release) cut a release for 0.11.0
25e399052 bz-1662263: include git sha in ART builds
ca02a92b2 Fix panic when binding already exists
497b67c66 Merge pull request #955 from jpeeler/set-resource-requests
76a3554ed Merge pull request #957 from ecordell/fix-env
1ab0d8b96 Merge pull request #950 from tkashem/pod-configuration
c613ffc1b Merge pull request #933 from dinhxuanvu/cr-validation
c0e4f825e Add e2e test case for existing CR validation
8a48e657f Validate existing Custom Resources against new schema prior updating
34f07ed3b (test) add e2e test
74e6e3059 (feat) inject 'Env' from config to deployment spec
3c56773db (feat) incorporate proxy configuration support
b52e789a7 add operator configuration to subscription spec
d4d3428b0 Merge pull request #954 from njhale/pin-1.14
a2f47f1d6 fix(unit): refactor to use shared pod resource
77ce42156 fix(manifest): fix env var projection in command
1cad4c865 feat(deploy): add resource requests to all pods
e176196fc Merge pull request #951 from ecordell/metrics
2808ec7e6 chore(modules): re-vendor
a359bf757 chore(generated): run code/mockgen
7aaa69e45 chore(modules): pin k8s 1.14
cd6fb9a51 feat(metrics): record sync count for subscriptions, labeled with name and most recently installed CSV version
b4e3f5de2 Merge pull request #2 from dweepgogia/project-proposal
64b09c24f [doc] Add fake README to the project proposal
d4825c74b Merge pull request #942 from ecordell/csv-packageserver
c1ea748d2 fix(init): move cleanup to olm startup
fecaec053 feat(metrics): record sync count for CSVs, labeled with name and phase
b4f8827e9 feat(init): add init container to olm operator that can clean previous deployments
6065197ee chore(deploy): remove packageserver subscription and catalog from chart
f226d7255 Merge pull request #902 from jpeeler/crd-schema-change
a116896c9 Merge pull request #943 from njhale/catalog-benchmarks
767b0fd70 Merge pull request #945 from jpeeler/minor-fixes
7f8c31725 fix(olm): List does not return NotFound error
477b0affa fix(e2e): fix baremetal e2e
7a38a5d04 Merge pull request #941 from ecordell/config-proposal
71c15a6fb test(catalog): add sync resolving namespace benchmark
752740f21 Merge pull request #931 from operator-framework/depupdate
4c60d4c64 feat(olm): allow CRD updates with multiple owners
861fa27bd feat(csv): detect changes to a deployment and persist them
55478901a proposal(operator-config): initial proposal for persisting configuration of operators
1940f7bd0 Operator validation library project proposal
30d6fa5e6 Merge pull request #929 from njhale/pprof-option
11687df4c Merge pull request #938 from njhale/remove-extra-comparison
cf83a2842 Merge pull request #913 from jpeeler/proposal-webhooks
2b551453a (proposal) improved csv status reporting
58378e8af test(e2e): remove extra resource comparison
7cbf34848 Merge pull request #937 from tkashem/bz-1723818
0c5c34bc9 1723818: package server 4.1 to 4.2 upgrade should not fail
c236361d2 Merge pull request #921 from jpeeler/compile-bare-target
f058be7b3 Merge pull request #925 from tkashem/bz-1723818
9c7f7d278 (bug) CSV name change causes upgrade to fail
79684d6bb Merge pull request #892 from tkashem/user-defined-sa
d9043cfc1 Add webhook proposal
224ada1dd docs(profiling): add basic usage doc
00826e8e1 feat(cmd): add profiling option to olm and catalog commands
3a7164c7a feat(profiling): add pprof handler registration function for mux servers
752da4774 Merge pull request #928 from paulfantom/servicemonitor
6458351fc manifests: move ServiceMonitor manifest to runlevel 90 so it will be applied after ServiceMonitor CRD is created
3ac82ee37 (e2e) add e2e test for user defined service account
47260e13d (feat) validate that secret is valid api token
3fb4bb161 (feat) use scoped client for plan execution
7eb33d819 Merge pull request #923 from njhale/sub-ips
a532d6c85 chore(logging): logging fixes / small enhancements
53c918399 chore(modules): add hashstructure and revendor
7d238a85e test(sub): add subscription installplan condition e2e test
521979f76 feat(sub): add installplan reconciler to syncer
593589aab feat(sub): add installplan status reconciler
65593bd22 feat(state): add subscription installplan states
6305b1324 feat(sub): add subscription installplan status conditions
f16d8f0c9 feat(equalitor): add equalitor interface and hash implementation
465214e5c (feat) create scoped client from bearer token
f436600b1 (codegen) generate operator group type changes
71b4951ac Merge pull request #863 from tkashem/csv-monitoring
72d20ecf5 Merge pull request #920 from jpeeler/does-anybody-ever-read-these
5f5f2eda6 feat(makefile): add target for compiling e2e
14d62744f Merge pull request #878 from dinhxuanvu/update-crd-one
729de7a54 fix(test): fixup bare test imports and vars
54441a84f Merge pull request #917 from dinhxuanvu/update-changelog-0.10.1
1b14b82fc Update CHANGELOG to include changelogs from 0.10.0 and 0.10.1
e4ecf57fb Merge pull request #916 from jpeeler/release-docs-2
73b071c57 (feat) monitor package API server CSV progress
75590ea49 Receive notification of CSV(s) being watched
b4b70b918 (deploy) add cluster operator for package server
d89e8353f Merge pull request #918 from jpeeler/fix-go-build
da97549ac fix(build): set GO111MODULE=on
bec3a473f docs(release): add additional clarifying details
eb110c940 Merge pull request #914 from ecordell/go-1.11
5a9c3ca03 Merge pull request #889 from dinhxuanvu/release-0.10.1
100a23bb8 Switch to go 1.12 in the root Dockerfile
a486f5aba Add a new test case to cover preexisting CRD case
0e806f146 fix(unit): fix unit test flake
90229baa4 Merge pull request #912 from ecordell/remove-helm
c6905c3e1 Add e2e test case for single owner CRD update
9a16d4a92 Add IndexFunc using ProvidedAPIs as key to look up CSVs
86faf88b0 Enable OLM to update CRD when there is only one owner of that CRD
d523fb5c3 make release 0.10.1
33a13e5fe Merge pull request #900 from ecordell/fix-owner
5ee8bce5b Merge pull request #910 from jpeeler/crd-descriptions-3
3fe51df5f Merge pull request #911 from njhale/sub-csh
b62dc0a67 fix(build): don't use helm in src image
bf05d0477 feat(queueinformer): add config options
f09e47ad0 fix(chart): add missing descriptions to operator group
579aa8ddd fix(catalog): do not add owner references to clusterroles or crbs
d8084e48c Merge pull request #881 from njhale/sub-csh
f8a5ca06a Merge pull request #909 from jpeeler/kubeconfig-env
b2c649bae feat(e2e): allow KUBECONFIG to be set from env
8be3ad854 Merge pull request #907 from madorn/patch-5
bb4c35aa7 add -l option to $POD_MANAGER attach
83fd61813 test(subscription): add e2e tests for catalog health
aa6c82b93 test(bare): use new operator constructors
cc58cc72e chore(codegen): generate conversions/deepcopy
8892cd38d feat(subscriptions): add catalog health conditions
162483988 refactor(packageserver): plumb context throughout
3707deed5 refactor(main): use signal context and new operator contructors
ca20e6350 refactor(olm-operator): replace factory method parameters with options
49fc05754 refactor(catalog-operator): use new queueinformers
25e078a77 feat(subscriptions): add subscription catalog health syncer
7f2bcbc5a feat(registryreconciler): add now function
9cdccba5a refactor(operatorstatus): make sync channel receive-only
2e4bc7f77 refactor(queueinformer): use kubestate resource events
55295262c feat(kubestate): add generic typestates and interfaces
10ae9f8f0 refactor(signals): replace stop channel with signal context
2d43a3749 Merge pull request #904 from alecmerdler/OLM-1111
fc4a5ea62 clone labels from CatalogSource to PackageManifest to prevent concurrent map writes
485474201 Merge pull request #880 from tkashem/operator-group-sa
248c669be (proposal) Add user defined service account
e68056973 Merge pull request #890 from alecmerdler/OLM-1080-redux
6269a6792 Merge pull request #885 from madorn/patch-4
619c2035b change packageserver global namespace to openshift-marketplace
4acee7fbf Merge pull request #887 from dinhxuanvu/release-version-0.10.1
2db8ef0d3 Bump release version to 0.10.1
4f147c4bc Merge pull request #871 from alecmerdler/OLM-1080
84ad7ab88 Merge pull request #864 from ecordell/1.14
2df701059 add --rm, remove cleanup func, and attach to block
2b167dd5e chore(deps): bump kube deps to 1.14
c4d210a71 repair run_console_run.sh script
74dfdf377 change global catalog namespace to openshift-marketplace
a4b8ea757 Merge pull request #875 from ecordell/installer
2ee6f96af Merge pull request #876 from marcoderama/doco
c05651951 Merge pull request #877 from njhale/internal-types
02ec025a2 chore(types): codegen internal convs, clients, listers, and informers
74aa5da51 refactor(codegen): add conversion to make rule
513db51ae refactor(types): add internal types for olm resources
97ad48e5c Documentation: Fix a few typos
a16cf0f6e feat(install): Add new install scripts for releases, update release instructions.
1c16bd4b5 Merge pull request #869 from dinhxuanvu/opgroup-status-ns
b9de76ad7 fix(operatorgroup): Remove namespaces requirement for opgroup status
1aa1059df Merge pull request #867 from jpeeler/release-docs
712241bb0 Merge pull request #861 from ecordell/grpc-close
f57626747 Merge pull request #866 from jpeeler/manifests-bump-0.10.0
0cac27e56 docs(release): add basic steps for making release
8bcd68729 update manifests to 0.10.0
775721557 Merge pull request #865 from jpeeler/version-bump-0.10.0
7fdeba2a2 bump version to 0.10.0
393ec5613 Merge pull request #754 from alecmerdler/OLM-954
4d650f944 Merge pull request #860 from tkashem/refactor
5e2b3d8ab fix(catalog): close grpc connections before deleting them
a29307be8 (refactor) Move csv set and replace to a package
ef08dc726 Merge pull request #750 from jpeeler/apiservice-sync
7e04af578 Merge pull request #837 from jpeeler/unit-flake-fix
26af2e8cd Merge pull request #856 from ecordell/adming-ag-test
20c1d0760 add provided APIs to PackageManifest
c0f804775 Merge pull request #795 from alecmerdler/OLM-974
df7c96c56 fix(unit): fix flake in TestUpdate
c16b50b28 fix(unit): operator group test flakes
4562dc0a8 fix(olm): unit test flakes
043d9a059 feat(unit): allow specific unit test execution
7ca42e8c5 added e2e test for garbage collecting ClusterRoles
3c911f062 Merge pull request #859 from dinhxuanvu/util-test
e5b27ae45 Merge pull request #851 from dinhxuanvu/op-ns
ad50da316 Merge pull request #852 from ecordell/fix-release-scripts
290a2b95b fix(unit): Remove leftover println causing excessive log in unit test
45ce08c51 fix(operatorgroup): No targetNamespaces matched namespace selector
235928b97 Merge pull request #839 from dinhxuanvu/catalogSourceNS
734031b1a test(olm): test role aggregation for aggregate apiservices
acda68d68 Merge pull request #858 from camilamacedo86/ISSUE_785
458ebf0b1 fix(run_console_loca): Fix command and improve output message
3d61dac26 chore(deploy): install helm in `src` image so that verify manifests job can run
9cd805b5a chore(deploy): re-sync manifests with the chart
e3e248a60 chore(deploy): add `verify-manifests` command to ensure chart and manifests are synced
a52e043e4 chore(deploy): fix release scripts
2cc4af52a Merge pull request #821 from tlwu2013/patch-2
ae27eea1f fix(catalog): Fix subscriptions without a sourceNamespace hang forever
e900058b7 Merge pull request #855 from ecordell/fix-testupdate-flake
414aa3be2 Merge pull request #806 from marcoderama/doco
9bdf1de7b Merge pull request #751 from lveyde/patch-1
6184c4682 Merge pull request #768 from leszko/support-windows
6804a283a fix(unit): TestUpdate no longer flakes
d0e13ea7b Merge pull request #787 from bergerhoffer/fixing-indentation
01b28833b Merge pull request #848 from jpeeler/crd-descriptions-2
5a9c4e370 Merge pull request #850 from ravisantoshgudimetla/fix-tolerations
3d549003c Fix tolerations
ac3a5d268 fix olm-operators tolerations
4a4d4b4fd Merge pull request #847 from ecordell/fix-stuck-subscriptions
c369b8040 Merge pull request #844 from alecmerdler/bugzilla-1707071
23a2a2f70 fix(deploy): add missing descriptions to manifests
fd2f765e8 Merge pull request #845 from jpeeler/crd-descriptions
c5173bf50 Merge pull request #843 from ravisantoshgudimetla/fix-tolerations
3db37f805 fix(catalog): fix issue where subscriptions sometimes get "stuck"
f5ed53df4 fix(deploy): add missing descriptions
9679a7b1a Fix tolerations
0d7cb55c3 add terminationMessagePolicy: FallbackToLogsOnError to OLM deployments
7682b0c4e Merge pull request #816 from ecordell/udpate-catalog
dfe90fbed fix(e2e): fix installplan test cleanup
0111c45df fix(operatorgroups): fixes rbac checking for multinamespace groups
ea0d3fc86 feat(olm): speed up csv updates
5fc146ac8 test(catalog): add tests for catalog reconciliation
2ede4ad35 feat(catalog): check catalog health and recreate if bad
dffcbd5c2 fix(roles): use correct group for package permissions
f20a80348 Merge pull request #838 from ecordell/fix-dependent-subs
78e6f5110 fix(e2e): test changes
f78dd528e Merge pull request #836 from tkashem/csv-conditions-length
7fba013a2 feat(resolver): treat the registry as the source of truth for replaces fields
ee20bf553 fix(olm): race when a subscription updates many versions
13853d1e5 fix(resolver): resolved dependent subscriptions don't detect updates
9b9996139 Merge pull request #834 from ecordell/semver-range
6ad4be7ee Set limit on length of Status.Conditions of a csv
c8ac766c4 Merge pull request #766 from jianzhangbjz/fix-provider
269395ff6 fix labels.provider issue
a6a3dde51 Merge pull request #835 from njhale/fix-registry-recreation
46de47618 feat(resolver): allow skipping a set of updates if the channel head explicitly states that a range of existing operators can update directly
974f55c36 fix(catalogs): make grpc registry check for < 1 pods
12f359087 chore(deps): switch to blang/semver from coreos/semver
a0dcab078 Merge pull request #827 from dinhxuanvu/missing-events
561653551 Add e2e test case to verify the events flow
ad4e44a3d test(reconciler): refactor reconciler tests with k8s decorator
dcd80b0eb test(clientfakes): add k8s client decorator and shared options
6da60367b Merge pull request #833 from ecordell/fix-e2e
65c2c7ec7 fix(permissions): the aggregated edit role should grant view access to operatorgroups
41d292433 fix(olm): don't requeue operatorgroups for deleted copied csvs
0084a2cb7 test(e2e): wait for deployment to exist in csv replacement test
e51da8160 Merge pull request #830 from soltysh/fix_nil
f357dce93 Always set LastTransitionTime in OperatorStatusCondition
5cc96d51e Merge pull request #828 from ecordell/revert
bc697200d Revert "chore(cvo): remove ClusterOperator from manifests"
3205c4f7f fix(olm): Fix the issue with missing events due to rate limit
bc0524ca2 Merge pull request #824 from ravisantoshgudimetla/add-annotation
7f77eb0c3 Merge pull request #826 from ecordell/upgrade-ts
dce549eb0 chore(cvo): remove ClusterOperator from manifests
283c67b89 Merge pull request #817 from jianzhangbjz/priority
0a3e83439 Add node-selector annotation to namespace
b05b06a17 Merge pull request #823 from ecordell/update-cvo-libs
065e52da6 chore(cvo): update openshift/api so that OperatorFailing is changed to OperatorDegraded
b5bb2cdde One more doco typo fix
0f9416ed7 documentation:  Fix a few typos.
463caa2a0 Merge pull request #820 from njhale/sub-ip-ref
de57dceee Add validation details for `spec.maturity` field
3f5a8fecd refactor(queueinformer): prevent > 1 run calls for duplicate informers
d01b225f1 refactor(subs): add objectreference installplan refs
0092750c5 feat(types): add reference for olm types
50dbe5e51 chore(deploy): update manifests
9d3034efa add priorityClassName attribute
4af9f7b4c Merge pull request #812 from ecordell/admin-perms
3f4906359 Merge pull request #811 from ecordell/progressing-timestamp
90c8a604d Merge pull request #759 from dinhxuanvu/deployment-update
fcdebc4e6 Merge pull request #813 from ecordell/packages-ns
9f3f393a3 Merge pull request #809 from jpeeler/wip-test-mux
ef518dcff feat(packageserver): add additional info to package server output
30defa3e0 Modify and improve unit test on deployment
c7d6cae8d Rework cleanupOrphanedDeployments
74f236c2c fix(deployment): Clean up orphaned deployments
3726aed3a Merge pull request #807 from njhale/fix-registry-recreation
11ee3da7d fix(catsrc): force registry update on dep resource deletion
232bd9ad1 feat(registry): add registrychecker
29c6d4b43 feat(lister): add catalogsources to operatorlister
5f55b4279 chore(mocks): regenerate mocks/fakes
3b2cdd80f chore(vendor): vendor mock/fake dependencies
fc5805d02 chore(mockgen): use modules for mockgen
a4085910a test(catalog): add registry pod delete e2e test
0eb0a4d80 feat(rbac): restrict permissions for namespace admins
a6a368013 chore(cvo): report progressing=true if the version has updated
affc657d3 fix(e2e): metrics are now served 8081
eeff07c7a fix(metrics): remove optional from secret parameters
5490daeac fix(metrics): add logging and separate muxer in catalog
54f6dc0ec Merge pull request #794 from ecordell/starting-csv-multiple-ips
58d3c806f fix(metrics): add logging and separate muxer in OLM
ecae4ef2b fix(e2e): remove ip count check
e7efbc995 fix(olm): generate rbac roles for ownnamespace operators correctly
c83204b18 test(aggregation): Add test for operatorgroup role aggregation
9d04dc404 Merge pull request #810 from njhale/changelog-0.9.0
c3b888e32 docs(changelog): regenerate changelog for 0.9.0
d62135c00 docs(release): add release doc with changelog generation section
68006792b Merge pull request #802 from alecmerdler/OLM-1017
7b6d2fcc0 test(e2e): add sanity check for project admin permissions
11c7da475 test(subscription): add additional testing around installplan generation during manual approval subscriptions
77dd28b3e Merge pull request #805 from njhale/fix-modules
1b34ba16c fix(git): remove nuget ignore rules
327865338 chore(modules): revendor
35a7f1301 cut release 0.9.0
aea532d65 fix(modules): update replaces fields
378fabf39 Merge pull request #801 from alecmerdler/cut-0.9.0
0fc1030a1 test(e2e): add test for orphaned api services
5de67db91 bump version to 0.9.0
8d459b889 end-to-end test for cleaning up apiservices after CSV delete
9290d5345 fix(olm): add deletion monitoring for api services
c84c2540f Merge pull request #741 from njhale/sub-status-proposal
b5c396c60 Merge pull request #775 from ecordell/priorityclass
232422018 docs(subscriptions): add improved sub status proposal
f30961255 Merge pull request #793 from jpeeler/rebase-1.12
ceb060a99 chore(deploy): set priorityclass on olm pods
b6d295303 Merge pull request #792 from ecordell/fix-deploy-annotation
83d1d4195 fix(annotation): don't annotate deployments that aren't owned by a CSV
9981cadc0 Merge pull request #791 from njhale/fix-back-support
a76cdf732 chore(package-server): adjust to new API
c7cc3067c chore(vendor): add jsonpatch
949333e51 chore(codegen): regenerated due to vendor updates
940e2a673 chore(vendor): update vendor directory
b69917ae6 chore(vendor): prep for update to 1.12.7
04ec6ba04 fix(packageserver): add struct tags to PackageManifestList
24e5f435b Merge pull request #788 from njhale/back-support-pkgs
60cfcc8eb chore(codegen): run codegen and mockgen
375682d11 feat(packageserver): support apps.redhat.com and operators.coreos.com
a1e329edf Fixing indentation for spec field
5fcebfbaa Merge pull request #774 from ecordell/api-v1
5521fd34f chore(deploy): regen /manifests
13c9c6ed9 refactor(charts): normalize packageserver templates
df200f5fc Support v1 OperatorGroup and v1alpha2 OperatorGroup
647666533 chore(api): bump operatorgroup and packagemanifest to v1 and group operators.coreos.com
85dd72356 Merge pull request #682 from jpeeler/metrics-add-servicemonitor
a3dd5dab4 chore(deploy): don't include openshift stuff in upstream
64194fdc4 fix(deploy): move service creation to new file
84948471d fix(metrics): add service monitor config
544ec926b feat(templates): make use of TLS options in deployments
d65ca70dd feat(olm,catalog): add TLS support for metrics
cbdd04dd5 chore(deploy): renumber files from 02* onwards
ce6651da0 Merge pull request #778 from ecordell/fix-api-labels
a5953899d Merge pull request #776 from ecordell/progressing-metrics
a960f43d0 Merge pull request #777 from ecordell/faster-local
044e1af26 chore(deps): bump openshift/api to get new ClusterOperator types
4327a42f8 fix(olm): use hashes for provided api labels
4443b14a0 chore(build): build binaries locally and load them into containers
ba1e984c0 chore(catalog): add ClusterOperator status for catalog operator
0826a7f90 Merge pull request #771 from njhale/recut-0.8.1
47103b038 chore(manifests): recut 0.8.1
396935e4d Merge pull request #765 from njhale/add-changelog
10dd7c2ab docs(git): add changelog
b265e8455 Merge pull request #764 from ecordell/ns-list-for-all
e850b337e Add support for Windows WSL in run_console_local.sh
06f50aecc Merge pull request #763 from njhale/csv-crd-requeue
daef19a8a feat(csv): label CSVs with provided/required apis
4b5c59de2 fix(build): add some minor support for building locally with kind
72376e8fc feat(operatorgroup): operators in operatorgroups that select all namespaces are now granted namespace view roles (get/list/watch)
f6baedc32 test(e2e): add failing e2e test for operators in global operatorgroups
c4bb8b126 Merge pull request #762 from ecordell/upstream-catalog
91ac21027 fix(chart): persist operatorstatus reporting changes to chart
deb826a73 feat(upstream): add operatorhubio catalog to upstream release
a4cb71cdf Merge pull request #760 from tlwu2013/patch-1
c9e7be947 Merge pull request #722 from jpeeler/cvo-upgrade
bde122446 fix(installer): include generated manifests
5e0b2ea2d fix(ocp): add csv and deployment for package server
caaa4a3ce Merge pull request #761 from ecordell/multiple-upgrades
43a6a75e0 feat(e2e): generate a larger set of namespaces during testing
49fff8558 fix(e2e): use ifnotpresent for all test images
bc1a2efe8 fix(olm): don't attempt to annotate deployments if the deployment hasn't yet been created
c3a87aff3 fix(catalog): kind was omitted from ownerlabels
150e5e774 fix(operatorgroups): gc copied csvs from a separate queue
87a468e04 fix(e2e): e2e test for pre-existing crd owner tested incorrect behavior
aad72bd04 fix(resolver): take a snapshot of the current generation before updates
7e402189d fix(catalog): fill the csv cache with informers
dfafa089b test(subscription): add an e2e test for validating that subscriptions step through multiple intermediate versions
1c5cd4c8b Merge pull request #752 from njhale/change-upstream-base
e56fe1134 refactor(images): use operator-framework namespace for all olm images
77119f2db feat(make): add quickstart generation to release rule
37b777559 chore(docker): update upstream.Dockerfile base to go 1.12
7a7e799cf refactor(scripts): use existing manifests in package_quickstart.sh
8e749eaa0 style(scripts): rename package-release.sh to package_release.sh
f48dd912f chore(modules): revendor
c543c6de7 Merge pull request #748 from smarterclayton/report_level_status
0a1f38560 clusteroperator: Report when OLM reaches "level" and check syncs
e8bb5e7c0 Merge pull request #758 from njhale/fix-conflict-detection
cf9b23893 Fix typo - k8s version format
0f7f70b60 fix(csv): properly detect owner conflicts for crds and apiservices
a56211824 fix(transitionCSV): reorder apiservice resource check
bea78fcb5 Merge pull request #749 from alecmerdler/bugzilla-1654977
54c581ecd more event emitting for CSV phase transitions
7065a6af9 more event emitting for CSV phase transitions
4b74799ce Fix small typo.
e14a4d9dc Merge pull request #736 from ecordell/opgroup-expand-contract
99e2789b9 fix(contraction): requeue any csv that may need it after operatorgroup expansion/contraction
fa5a473c8 feat(olm): update deployment annotations as soon as the csv annotations are available
d61293557 fix(e2e): fixing e2e test after rebase
4b373f2d4 chore(rebase): fix errors from rebasing
5520800a6 fix(opgroup): incorrectly detecting CSVs as "copyable"
7d192ef48 fix(operatorgroup): set labels on copied resources correctly
f53e33ae3 fix(olm): move csv copying into its own workqueue to free up csv processing
b316d13d0 fix(e2e): fix e2e tests for operatorgroups
aef7bb9f2 refactor(olm): refactor provided api pruning
24e1f5b78 refactor(olm): simplify CSV copying/pruning
d4f6e448c feat(namespaceSet): add Contains method to namespace set
229a7640c feat(olm): don't copy csv to operatorgroups if it's not in certain copyable states
02bb42210 fix(olm): delete copied child csvs with no parent annotations
299d1f62d fix(operatorgroup): annotate all csvs and allow collisions
55f60797a fix(olm): delete stale resources after op group change
0d2443f71 fix(opgroup): revert order of operatorgroup updates
880c3bcb4 fix(requeue): requeue owners that are referenced with labels
5ad676ac8 fix(olm): change operator group / CSV requeuing
82bd6628d chore(opgroup): allow selector to be nullable so that marshaller can output an allnamespace operatorgroup
995a686cb Merge pull request #704 from leseb/git-objects
ee078b270 Merge pull request #713 from operator-framework/update-csv-link
8d599a1bc Merge pull request #745 from jpeeler/deploy-status
7dcfade0a Merge pull request #690 from dinhxuanvu/api-owner
400c2a8e1 feat(test): adds CSV phase reporting for package server
47f938c6c fix(test): fix labelselector pointer
7904558b1 fix(olm): delete api services upon CSV deletion
2525021e7 chore(olm): add debugging logging and handle potential list failure
2676da569 fix(util): fill in GVK info from InferGroupVersionKind
33a71df8e fix(olm): Fix CSVs api-servers battle for ownership of APIServices
684b7e51f Merge pull request #739 from dinhxuanvu/minkube-validation
1ec96efc4 Make release
1bcaded95 Add minKubeVersion validation to templates
f6e7cdc30 Merge pull request #744 from njhale/update-group-manifests
8bda3c94a chore(manifests): regenerate manifests to include new validation
2d87dd9c3 fix(operatorgroups): use pointer for labelselector
1164ff67a Merge pull request #733 from njhale/fix-installmodes
65007bf93 Merge pull request #738 from ecordell/ifnotpresent-packageserver
206a2c418 fix(packageserver): set packageserver to IfNotPresent
541bc8eb5 refactor(operatorgroups): bail out after successful namespace update
a39619335 Merge pull request #716 from alecmerdler/ALM-913
c348d6f2b Merge pull request #671 from aweiteka/rbac
df6116e36 fix(csv): fix unsupported operatorgroup status update
7d017d5a7 test(operatorgroups): add installmode support e2e test
28f94c0cd Merge pull request #721 from njhale/operatorgroup-docs
4b00253c1 fix(installmodes): update support logic to match expected behavior
92bb1510b docs(operatorgroups): add more extensive docs
83a62d13a Merge pull request #731 from ecordell/pkgmanifest-api
1e3248dbc fix(packagesever): add missing name field to api definition
7148266d7 Merge pull request #729 from ecordell/cross-ns-ownerrefs
5843601e4 fix(owners): remove cross-namespace and cluster->namespace ownerrefs
50ebe7b8c chore(deploy): run release scripts to get view permissions on edit/admin
c2e9072ee Merge pull request #720 from dmesser/quickstart
812ce8a35 Merge pull request #723 from ecordell/remove-regex
29dc1c34e fix(csv): remove regex on base64 image data
d94cc58ef add all-in-one yaml and helper script
4b95eeaa4 Merge pull request #717 from ecordell/add-use
d8ae7c5c3 fix(csv): icons in csv schema should be an array
3cca62d35 feat(csv): allow use verb in permissions
bc48633c3 fix API validation for OperatorGroup spec
33b98af21 remove minishift support
8be006590 Merge pull request #710 from jpeeler/clusteroperator-discovery
c04306f22 Merge pull request #709 from njhale/grpc-address
5bf5bbbe0 Merge pull request #708 from njhale/tolerate-masters
b3869c50b fix(registry-pods): add everything toleration to registry pods
acfadef73 feat(catalogsource): allow grpc source types that don't require an image
75ad2fb44 Merge pull request #711 from alecmerdler/ALM-910
8b5c584fc fix(olm): properly detect cluster operator API
c49999a1c docs: update CSV link
039e47176 remove rbac changes to 0.7.1 deploy maniftest
c44d485a8 update aggregate clusterrole to chart template
24bbd94f7 add view rbac to 'admin' and 'edit' default roles
952d5eba8 graceful shutdown for PackageManifest server
a3092c17b Merge pull request #712 from njhale/fix-prefixes
745728d12 fix(manifests): start manifest file names with 0000_50_olm_*
794268b25 Merge pull request #701 from njhale/group-intersection
52831522d Merge pull request #683 from pmorie/doc-install-mode
3f92a704e fix(csv): only allow one CSV per provided API across intersecting operatorgroups
6515a11be Merge pull request #697 from dinhxuanvu/add-installmodes-pkgm
fbcf63306 test(registry): add InstallModes to CSV
cc05e9bff fix(openapi): add InstallMode definition
6e77ba0f6 Merge pull request #699 from dinhxuanvu/minkube-fix
794f2cae0 fix(olm): Remove the "v" prefix in minKubeVersion if presents
6a466f953 revendor and run codegen
7d9b9ee97 fix(packagemanifest): Add InstallModes info from CSV to PackageManifest
c8fe8b023 Merge pull request #703 from jpeeler/e2e-fixes
ca547f2df fix(e2e): fix instability in test runs
7e2ca2e1c fix(e2e): add MinKubeVersion to helper function
4289671f9 Merge pull request #702 from smarterclayton/add_prefix
1563b1912 fix(deploy): Add a component prefix to manifests
9961aa332 Merge pull request #691 from njhale/update-registry-version
7d5cd25dd Merge pull request #693 from ecordell/downstream-registry
ffecc1f1e chore(modules): update operator-registry module to v1.0.6
77c6fb3a9 Merge pull request #695 from ron1/patch-1
aeeba1161 Update README.md
6a65344bb Merge pull request #676 from njhale/fix-startingcsv
1cca69c52 fix(subscriptions): respect startingCSV
85cc30498 fix(deploy): fix image references
b51fc99c3 fix(deploy): set writeStatusName for ocp builds
302070fa3 Merge pull request #688 from ecordell/command-pod
03ac86373 Merge pull request #652 from jpeeler/operator-status-2
f07c0def0 fix(installplans): only create installplans if something new has been resolved.
4d4253a3a chore(olm): run make vendor
f58894422 feat(olm): write operator status by default
c89cef935 fix(reconciler): set command in pod spec of registry images
ff8c20dc8 Merge pull request #689 from njhale/fix-ip-race
a8e57bb9d fix(subscriptions): add check for csv manifest dif before applying new installplans
000a4b3b0 fix(e2e): ensure all subscriptions are deleted in replacing test
d5a3c2502 fix(subscriptions): fix race between subscription sync and cache
9b43046b6 Merge pull request #687 from ecordell/fix-perms
683f9d7eb fix(permissions): Generate unique Names for permissions
6a74e5d54 Merge pull request #685 from alecmerdler/ALM-873
73a8ea8e7 Merge pull request #681 from alecmerdler/ALM-878
03b814372 add ownerReference to backing ConfigMap for given CatalogSource
87acfcab0 Merge pull request #679 from ecordell/fix-multiple-installplans
6e84542ac fix link for Package Server CSV
5c73d1404 fix(catalog): use installplan lister instead of api client
9bb9f5f94 feat(lister): add installplan lister
13db70106 Add godoc for InstallModeTypes
d2a4eb107 fix(e2e): only select installplans owned by subscriptions
b612cf5e5 feat(catalog/olm): add tracking ids to logging
f6145e85e fix(catalog): remove gate on operatorgroups for resolution
72fc2a293 test(subscription): update unit tests to use the namespace resolver for subscription tests
a6e32462a fix(catalog): move write of installplan state from installplan execution into namespace resolution - this prevents races where installplans are created twice.
19bf93ed9 fix(installplan): only resolve if there's a subscription in the ns that isn't up to date
9d5f6d77d fix(installplan): fix bug where too many installplans can be created
753982892 Merge pull request #680 from njhale/fix-registry-pod-overwrite
39afd79a9 fix(cm-reconciler): query for pods to overwrite by CatalogSource label
b6dc9b7f5 Merge pull request #678 from ecordell/change-runlevel
55f43b9a6 chore(deploy): change 30 prefix to 50
8d41d3bc8 Merge pull request #674 from njhale/support-services
6f593941e chore(style): run goimports
fc4f30796 fix(installplans): add ability to apply Services
77c39c393 Merge pull request #670 from ecordell/configmap-changes
7aa6f6d79 fix(test): get kube version from client go for tests
e8177cf17 chore(deps): vendor
a47a41d60 fix(catalogsources): omit unhealthy catalogs from resolution
0d408adc6 fix(installplan): fix race in installplan resolution
f14b1bf2c fix(e2e): make e2e-local-docker work again
ae47a6b8d feat(catalog): add grpc sourcetype to CatalogSources
8bac3e9ef fix(registry): service label selector doesn't include resourceversion
51d644563 fix(catalog): use a different queue for each namespace
99c2341b7 test(catalog): add e2e test to verify configmap changes are detected
45eb3bd23 Merge pull request #663 from dinhxuanvu/min-kube
33bc9b39d fix(olm): Provide correct format of kube version in CSV
81211b825 fix(olm): always return a status on minKubeVersion checks
5bb1fa22b Add minimum kube version to CSV & check it against server version
cca23e2dd WIP: add new minimum version field for kube
30dfa6b9d Merge pull request #672 from njhale/fix-minimums
cb80326e0 test(validation): add test to verify OLM can use bundles with CRDs with min/max fields
768446ae8 Merge pull request #667 from njhale/fix-listing
9244f819b fix(packageserver): don't error out when listing
49cf7b8b0 Merge pull request #669 from njhale/csv-installmode-status
10d383166 fix(operatorgroups): write out CSV status on OperatorGroup issues
d8f98fada Merge pull request #637 from jpeeler/metrics-fix
1e6fa8cb9 chore(deps): update vendor directory
44c8d7a38 fix(metrics): create another endpoint for prometheus
a5c5bfc17 Merge pull request #662 from ecordell/rm-rh-ops
41c69e975 cut 0.8.1
a57b51747 Merge pull request #653 from ecordell/linux-hosts
e795f339d Merge pull request #665 from njhale/fix-target-csv-update
68d4db92e Merge pull request #650 from njhale/packageserver-use-registry
13be5df1c fix(operatorgroups): use copied csv for update status
60e5583e4 test(unit): fix TestAPIMultiOwnerSet_PopAPIKey tests
ed82334af feat(packageserver): consume registry pods
3443609f1 Merge pull request #658 from chancez/update_metering_install_modes
3c5bda7c7 Merge pull request #657 from chancez/local_watch_all_Ns
2f82ff79c Merge pull request #654 from ecordell/no-gitlab
b4c8ded42 Update metering InstallModes to support SingleNamespace
ef0b8062c Watch all namespaces in local setup by removing watchedNamespaces in local-values
4fd0c6691 chore(ci): remove ci checks for PRs
10f16edaf Merge pull request #638 from ecordell/new-resolver
e760e888b fix(deploy): add linux nodeselector
c309e83f5 feat(registry): remove in-mem registry implementation
77ddabd89 feat(resolver): take all subscriptions into account when resolving
53559a257 Merge pull request #651 from kevinrizza/remove-opsrc-installation
1a9533551 Merge pull request #645 from jcantrill/1663113_env_log_vars
8a431d3fd Remove operatorsource installation
e308a8102 Merge pull request #649 from jboyd01/refine-limits
582ef02a6 Merge pull request #647 from EmilyM1/add-metering-to-OLM
47f8c286d adding csv, crds, package for metering operator
831b6dba5 Merge pull request #640 from njhale/csv-installmodes
c52328bc8 fix 1663113. Add component image ENV vars to cluster-logging-operator fix 1662397. Add permissions to create shared-config roles and bindings
15d2bd814 update Service Catalog memory & cpu limits
521b70045 Merge pull request #646 from jcantrill/update_code_gen
939fabd48 update codegen for 2019
fb05ebc86 chore(codegen): run codegen to satisfy validation due to year change
12d0a1a4d feat(installmodes): add installmodes to templates
14f94f939 feat(installmode): add InstallModeSet
4b9ba8f44 refactor(operatorgroup): account for TargetNamespace field in updateNamespaceList(...)
fcebf86bf feat(csv): add installmodes to CSV spec
73201241d Merge pull request #641 from rodrigovalin/mongodb_operator_update_06
8e6b35965 Merge pull request #643 from ecordell/e2e-registry-pod
63277ac15 test(catalog): add an e2e test verifying that the rh-operators catalog starts up correctly
8cc24e049 Updated MongoDB Operator to 0.6
5c38ea112 Merge pull request #636 from ecordell/remove-all
e44a86e5a fix(crds): remove category all from CRDs
7bfbac8df Merge pull request #614 from jpeeler/jeff-533
96eb5d267 Merge pull request #633 from ecordell/requeue-subs
0317cb73b fix(packages): add sourceNamespace to packages apiserver
896dec301 requeue dependent subscriptions when a catalog syncs
964e57e41 fix(sub): set subscription to failed if there's no catalogsource
387e1c64e Merge pull request #634 from njhale/fix-run-local
4433e8982 Merge pull request #622 from kevinrizza/master
f1564e340 fix(charts): add operator_namespace to run-local values
dbf5cc968 Merge pull request #629 from jboyd01/bump-up-mem-for-cm
52da24fd7 Merge pull request #630 from ecordell/fake-registry-client
37fbb88e3 chore(fake): add fake for registry client
b9e0a5af5 Merge pull request #556 from ecordell/registry-pods
e97c4a879 increase memory limits on all service catalog pods
af2055a52 chore(deps): vendor
8f2451f39 feat(olm): add message to requirement statuses
8a9723e87 Install operatorsource crd and default cr
0b97ff52c Merge pull request #616 from jpeeler/jeff-601
60235d973 Merge pull request #618 from ecordell/ALM-785
43b915d0e Merge pull request #621 from ecordell/awgreene-marketplace-csv
6bf8f5c85 fix(deploy): fix marketplace manifests
1c48eedcd Merge branch 'marketplace-csv' of github.com:awgreene/operator-lifecycle-manager into awgreene-marketplace-csv
30c149139 Merge pull request #570 from jcantrill/aggregated_logging_csv_edits
85cff0223 Creating csv, crd, and packages for clusterlogging and elasticsearch operators
4d51a44e4 feat(rbac): generate cluster role for viewing CRD for each provided api
a92f652d5 Add Marketplace csv
5420a1fca test(registry): add checks for registry pods
5ebf78847 feat(catalog): use operatorlister in catalog operator
7820e5f36 feat(registry): when syncing catalogsources, generate pods that serve the operator registry api for configmaps
e04534c48 feat(catalog): add configmap server image config flag
f2bcb3759 feat(api): add registryservice to catalogsource status
ba15afaae add 'get' permission for the CRD itself to the created Role
97160b54e Merge pull request #620 from ecordell/runlevel
bda466e37 fix(deploy): add runlevel to openshift-operators
6c0451731 Merge pull request #617 from ecordell/require-apiservice-name
574d29d3f fix(schema-check): fix schema check error bug and update manifests
83dbd51ff feat(csv): make apiservicedefinition pluralname required
4bcf04b59 chore(olm): make use of operator group constants
241269fb0 fix(olm): don't annotate target namespace on copied CSVs
543711d06 Merge pull request #589 from ecordell/copying-in-csv-loop
7efdfc198 fix(unit): fix tests involving CRD status
f8baea449 feat(olm): generate clusterroles for provided apis in csv loop and aggregate them to operatorgroup clusterroles
51dde613e feat(operatorgroups): don't process CSVs that aren't in an operatorgroup
56df9f650 Merge pull request #609 from njhale/package-server-subscription
616b5904f Merge pull request #587 from galletti94/master
3596b3dd7 Merge pull request #615 from jboyd01/serv-binding-finalizers
7a3cc0337 chore(manifests): regenerate manifests
220912653 Merge pull request #575 from wongma7/use
d421664b8 Merge pull request #574 from jpeeler/architecture-linted
d4417629d Merge pull request #573 from jpeeler/docs-operator-group
da23b2067 add rbac for servicebindings/finalizers
69f314566 fix(unit): use global logrus logging instance
f284ab0f4 Merge pull request #562 from jboyd01/remove-resource-limits
ef067d2b0 Verify CRD's condition to ensure it's registered with k8s API
87284dc52 test(packagemanifests): add wait for package-server to be ready
16fb5c033 feat(subscriptions): requeue dependent Subscriptions on CatalogSource sync
1747b92f2 feat(helm): create helm templates for package-server subscription
a930e1855 Merge pull request #612 from ecordell/image-refs
ab2af2eac chore(release): switch image-reference tag to operator-lifecycle-manager
b509e1e02 Merge pull request #608 from jboyd01/fix-image-repo
bd34aad44 Merge pull request #611 from ecordell/regen-manifests
66bb41a6e regen manifests
290923657 chore(docs): fix markdown lint warnings
8dd4743e2 Merge pull request #591 from jpeeler/global-namespace
9964fb376 Merge pull request #584 from ravisantoshgudimetla/add-descheduler-crds
2d4f256e7 docs(arch): add operator groups
94b211a90 fix(scripts): clean up all resources when done
0fb838472 feat(deploy): add operator group to watch all namespaces
d6727651a chore(scripts): add quoting for safer bash
0af032085 chore(docs): fix up whitespacing
643d19baf Merge pull request #603 from jpeeler/operator-group-robust
4e4e11d7c increase limits for embedded etcd
441d9a76c use quay.io vs registry.reg-aws.openshift.com
deae2f7b1 fix(e2e): make operator group test more robust
451c378f1 Merge pull request #602 from ecordell/slightly-mame-gitlab
da0f248c1 feat(ci): remove e2e tests from gitlab
71ac2f7e6 Descheduler operator CRD, CSV
8dee386d8 Merge pull request #594 from njhale/selfhost-package-server
8fee1575e chore(manifests): make release
922a67d5a feat(package-server): self-host package-server with CSV
c931a433b Merge pull request #599 from njhale/fix-tests
3d941d976 Merge pull request #596 from smanpathak/patch-1
fdb68cfc1 fix(e2e): create CSV first to use in CRD ownerref
5597fd3b9 fix(e2e): use testNamespace for ownedAPIService test
1ef129f4f Merge pull request #590 from alecmerdler/ALM-823
7e861bb79 fix panics in package-server
368514919 Fix a typo in documentation
fcdadcc35 Merge pull request #552 from ecordell/e2e
b8e634bbd fix(e2e): set up variables for non-bare e2e runs
7d309e83e feat(e2e-bare): add utilities for running olm and e2e locally against a remote cluster
6a5ab53a8 feat(make): add e2e command for running from ci-operator
5090f4140 Merge pull request #593 from njhale/use-mock-ext
3afe9b539 test(csv): use mock-ext-server for owned apiservice e2e test
f8455ebac Merge pull request #585 from njhale/fix-mod-checksum
0cf3efeba fix(annotations): merge CSV and pod template annotations instead of replacing
01ede6835 Merge pull request #592 from alecmerdler/fix-client-go
ecaf794d3 fix client-go in gomodules
feb00156e Merge pull request #583 from alecmerdler/issue-577
a1fcb7965 Updating: adding description to package manifest object - solves ALM-819
fa72497d9 Merge pull request #571 from ecordell/serviceaccount-rbac
b15c2a945 feat(operatorgroups): move annotation projection to csv loop
57a542525 test(operatorgroups): more comprehensive tests of operator group copying and rbac generation behavior
b7935e6bb fix(e2e): add operator namespace to target ns list
cada67262 fix(unit): account for correct rbac resource parsing
f0565a877 fix(e2e): account for operator group type change
c01878878 feat(operatorgroup): create role bindings for operator service accounts in target namespaces
c7493bce5 add packagemanifest:aggregated-apiserver-clusterrole
ed9c15e02 Merge pull request #576 from alecmerdler/ALM-809
6176cc402 Add packagemanifest:aggregated-apiserver-clusterrole
799d6b594 propagate labels from 'CatalogSource' to each 'PackageManifest'
f8ade6d5e Make use a valid clusterPermissions rule verb
dec89d2a8 Merge pull request #572 from njhale/fix-slowness
a6e1a3c87 fix(csv-requeue): requeue on namespace all if all namespaces are watched
32f42f6bc Merge pull request #568 from jpeeler/add-operator-group-2
60df92c7d fix(olm): create cleanup function for olm deploy mod
662dbc452 fix(olm): fix RBAC cluster role creation
933452c2e Merge pull request #569 from njhale/caches-for-everyone
a37c37162 feat(olm): use cache listers in olm-operator
bb78f61e9 Merge pull request #567 from ecordell/cut-0.8.0
ecb4902b0 cut 0.8.0
a7deb0601 Merge pull request #566 from ecordell/fix-it
d9177db1d chore(build): remove vendor commands from base dockerfile
b607b33a0 Merge pull request #565 from ecordell/bump-0.8.0
4ac8ae1ea chore(olm): add additional debug in requirements
564bba7e9 fix(olm): add additional validation for operator groups
3bc39b9d2 chore(release): bump version to 0.8.0
fba0f380b Merge pull request #564 from njhale/container-mockgen
91afee829 feat(mocks): generate fakes and mocks in a container
74216ea18 Merge pull request #560 from njhale/redetect-deployments
9c3ced389 fix(rbac): use separate queues for each rbac resource
1e32a28c6 fix(queueInformers): use separate queue for each namespace
73930379e fix(logging): use structure logging in checkAPIServiceResources
e2289683a Merge pull request #563 from ecordell/remove-ns-annotator
616eb9333 chore(olm): remove cleanup func from operator
225511192 remove namespace annotator
fe8f13cda Merge pull request #561 from alecmerdler/fix-gomodules
06e74ef2d fix gomodules (broken by client-go mutating their release tag)
a04f4b84f Merge pull request #554 from ecordell/go-modules
766cc0276 chore(ci): remove verify step from gitlab
d682ea346 feat(container): make container builds faster
856339b9c chore(codegen): run all codegen in a container
c63f1fd90 chore(deps): switch to go modules
cfca0c433 Merge pull request #536 from njhale/redetect-deployments
e1dab8b54 feat(csv): detect deployment and requirement changes in Succeeded and Failed phases
7d4fd988b Merge pull request #545 from jboyd01/initial-rework-on-csv
56c7d7ad6 Merge pull request #547 from rhamilto/amq-icon-update
8fb473f33 Merge pull request #537 from rhuss/patch-1
b5b5625c2 Merge pull request #516 from jpeeler/no-minikube
b06aea6dd Merge pull request #480 from jpeeler/add-operator-group
59edcdf55 fix(olm): make operator group copy CSVs more efficiently
ff44fc7bf fix(olm): remove duplicated code
2a76048cf chore(olm): refactor updateNamespaceList
c91260ddd fix(unit): create OperatorGroups with initial fakes
d6978a43c Merge pull request #548 from dinhxuanvu/multi-crd-test
e8ac902b6 feat(build): allow skipping minikube during local builds
316f7c0d7 Merge pull request #517 from jpeeler/fix-clean
2535b3950 Merge pull request #549 from dinhxuanvu/olm-log-fix
dada508cd Merge pull request #550 from jpeeler/fix-deployment-lister
b05747619 fix(olm): set lister up for deployments
4f7cfcb43 fix(olm): do not check namespace if casting failed
aed3d3764 Merge pull request #541 from alecmerdler/ALM-666
12aa70d8a fix(build): add cleanup for package release files
f34e52b38 add 'spec.nativeAPIs' field to CSV and check that native APIs exist before install
8c6171c56 Merge pull request #539 from alecmerdler/prometheus-service-ownerref
a6b1a2c97 fix(olm): operator group annotations and listers
7b8f5efd0 fix(e2e): slightly improves execution time
8b0dab168 fix(olm): set event handler functions correctly
1943e1880 fix(olm): refactor e2e and check annotations
e3bb3a9ef WIP: cvs in operator namespace are being annotated, csvs in target namespaces should be annotated
c5f7d9b35 fix(olm): adds debug logging for operator groups
e30e107a7 Update AMQ logo to new brand standard
35ecdcc14 Add test case for supporting multi-version CRD
e5f4d6c93 Fix olm pod name so log to be written correctly to olm.log
fa806225b use OpenShift's ServiceCatalog build, fix rbac + more
d3661f9cd feat(olm): detect dangling child csvs in olm operator
7a49edc10 fix(olm): handle copied CSVs when deletion occurs
5c2319536 fix(e2e): update e2e for refactoring
388f228ae fix(unit): fix race condition
9113d09a6 fix(unit): set expected owner refs for deployments
c03447195 refactor(operatorgroup): split apart the larger sync functions
d8dff17ba fix(e2e): ensure created objects are deleted
f71f79868 fix(olm): make RBAC creation resilient
b5c332293 test(e2e): add second e2e for operator groups
6f0cfc49c fix(unit): call Run on operator directly
8f32e3bf3 test(e2e): add e2e test for operator groups
956773962 fix(olm): make status updates on deployments, not CSVs
358ece0ab test(unit): add unit tests for operator groups
1194918a6 fix(olm): change annotations to be allocation safe
9ec09bce4 feat(olm): copy "dummy" CSVs to target namespaces
00914f8c8 feat(olm): handle required RBAC permissions
ff07844dc feat(olm): make namespace updates trigger annotation updates
7665de86f chore(olm): rename annotateNamespace to syncNamespace
e69d38f94 feat(olm): add operator group control loop
28fceea4d feat(olm): add CRD definition for OperatorGroup
83c8ddae0 chore(olm): generated files
d9528d426 feat(olm): add OperatorGroup types
016d80f63 Merge pull request #525 from njhale/refresh-certs
8ee21d58d feat(listers): add and use aggregate informer lister
c6f116c99 add Service as owned resource for Prometheus/Alertmanager CRDs
09daab0a8 feat(csv): add generated APIService resource check
c874b5125 fix(ci): cleanup packagemanifest APIService during deploy stop job
8601151b0 feat(csv): add succeeded to pending transition on cert refresh
29e6ca79d feat(csv): add configurable APIService cert expiration
44ccec038 feat(apiservices): add APIService adoption logic
8764b2ca1 refactor(ownerutil): make HasOwnerConflicts generic
27c684884 chore(test): bump minikube kube version to 1.12.0
c0cb86182 Fix template values for 'olm' parameters
bea6183ba Merge pull request #522 from alecmerdler/ALM-754
bb32660ba fix ClusterServiceVersion CRD to allow any descriptor default value
80442ecd0 added spec/status descriptors for Dynatrace Operator
300e7a008 Merge pull request #530 from alecmerdler/ALM-378
2797fbce0 Merge pull request #531 from eriknelson/add-assign-verb
2d0164a4a emit events when setting CSV phase
1d9d4c45e Merge pull request #534 from njhale/release-0.7.4
72218e7c0 Merge pull request #535 from alecmerdler/add-prometheus-configmap
2f7fb6e26 add ConfigMap as an owned resource for Prometheus CR
aa65ab4b8 Merge pull request #528 from aditya-konarde/patch-1
d89177d0b chore(release): cut release 0.7.4
c5b58ca29 Merge pull request #533 from njhale/bump-version
de07a94d3 chore(release): bump version number to 0.7.4
47f0b771b Add `assign` verb to csv crd
27bb0da72 Merge pull request #526 from njhale/enable-auth
0c04d0e29 Merge branch 'master' into enable-auth
6f5f588d6 Merge pull request #518 from jpeeler/deploy-debug
8f98411e1 Merge branch 'master' into deploy-debug
c15c38eef Merge pull request #523 from ecordell/dont-annotate-immediately
2367013fd Merge branch 'master' into dont-annotate-immediately
4eebac945 Merge branch 'master' into patch-1
bedd37ef0 Merge pull request #527 from njhale/fix-ports
dd7edeedb [Doc] Add note about helm binary requirement
ee5fa093c fix(e2e): switch to port 5443 for owned apiservice test
e2acf29d2 chore(e2e): change package port to 5443
7c5dfac0f Merge branch 'master' into dont-annotate-immediately
7682a397a Merge branch 'master' into enable-auth
69c5223c7 Merge branch 'master' into deploy-debug
a68257eca Merge pull request #524 from ecordell/pkgserver-port
8b077e998 chore(package-server): enable auth by default
2c7b4a945 fix(package-server): make secure port configurable and default to 5443
c0994b7cd fix(olm): don't annotate namespaces on operator creation
fde481faf Merge pull request #521 from alecmerdler/ALM-774
1ddefbafd pass annotations from CSVs to associated PackageManifest
624901992 Merge pull request #520 from alecmerdler/ALM-753
ee0bbd0ea adding more spec/status descriptors for CouchbaseCluster
a469acd4a Merge pull request #519 from font/install
d0749dce0 Merge branch 'master' into deploy-debug
8384a09ee Merge branch 'master' into install
69306979b Merge pull request #515 from jpeeler/crd-client-metrics
2460160ee feat(deploy): add debug variable to all deployments
be8625420 fix(metrics): use CRD client instead of k8s
58ebd4978 Update OKD install instructions
4194983ab Merge pull request #514 from njhale/non-resource-perms
51b6a8a46 fix(requirements): add CRD served version requirement check
66e04f524 fix(requirements): add support for non resource url rules
c660c0784 Merge pull request #513 from alecmerdler/ALM-752
36c5e1d2d rewrite 'metadata.namespace' of global PackageManifests
59c835188 Merge pull request #512 from ecordell/0.7.3
1af271d52 bump olm version to 0.7.3
4e1317470 chore(deploy): remove unneeded dockerfiles
84800de83 Merge pull request #511 from eriknelson/nonresourceurl-verbs
9570511ca Merge branch 'master' into nonresourceurl-verbs
a9ae9794f Merge pull request #506 from njhale/fix-blank-req
34d53acd3 Add missing nonResourceURL verbs to csv validation
ebf12385b fix(csv): make invalid install strategy transition from pending to failed
9ffecba09 fix(requirements): remove extra empty permission requirement statuses
8d5ed0436 Merge pull request #510 from ecordell/singleimage
c9118b394 cut 0.7.2
6c3c95b0e chore(deploy): update release scripts to not use 3 different images
cf5a2dcda Merge pull request #508 from eriknelson/logfix
1eaf17ad5 Merge branch 'master' into logfix
a41cfbd3c Merge pull request #509 from ecordell/olm-deploy-singleimage
ce535c211 Merge branch 'master' into logfix
589e9dcca chore(deploy): put all binaries in the same image
851518689 Small log statement fix
1c13c1cce Merge pull request #505 from alecmerdler/ALM-750
94e378dbb add 'catalogSourceDisplayName' to PackageManifest status
8e7a25f8d Merge pull request #504 from njhale/fix-deploy-staging
f3f096492 fix(ci): use deployment namespace as catalog_namespace
ffe9e0c2c Merge pull request #503 from smarterclayton/labels
1812c4c4a chore(deploy): use runlevel label on namespace
7e6bccf6f Merge pull request #492 from njhale/manage-apiservices
710055877 docs(apiservices): add some detail on APIServices in CSVs
3b729ef60 feat(svcat): add service-catalog manifests
e73e72ece feat(csv): install owned APIServices
0e9ba409c Merge pull request #502 from ecordell/runlevels
00dee8016 chore(deploy): Add runlevels to release
55901eda7 chore(ci): Use a single Dockerfile for ci
b10f31114 Merge pull request #501 from madorn/patch-3
a5cd11e51 Merge branch 'master' into patch-3
c7f7f7af6 Merge pull request #499 from wongma7/use-scc
38b8043b9 Merge branch 'master' into use-scc
0e0705a86 Remove explain 'annotations' and 'replaces'
1b99ccd15 add example and additional info about optional CSV metadata  (replaces, annotations, labels, selectors)
40f1ec2b9 Merge pull request #494 from alecmerdler/ALM-735
36c2fa492 return PackageManifests from 'global' namespace
6c4e92ea3 Merge pull request #500 from mrogers950/fix_imagestream_yaml
ac77a6652 fix 30_14-imagestream.yaml formatting
230f30537 Merge branch 'master' into use-scc
0209fabd5 Merge pull request #498 from alecmerdler/federation-csv-provider
e75ec5aae Make use a valid clusterPermissions rule verb
1776a6d37 add 'spec.provider' to Federation CSV
ef237384c Merge pull request #497 from font/e2elocalshift
b4357182c Merge branch 'master' into e2elocalshift
3eee10107 Merge pull request #491 from font/fedv2-v0.0.2
49f8ed880 Add missing binary to fix run-local-shift
fc80eaea3 Update registry unit test for FederationV2
85b1ba98d Split out FederationV2 CRD file into many files
40cdef4d2 Update FederationV2 CSV to add spec fields
ed1f978b0 rh-operators: add FederationV2 v0.0.2
89d2e37b4 Merge pull request #493 from ecordell/ci-fixes
fc8054537 fix(deploy): add base images for ci-operator
5b55ada20 Merge pull request #496 from abhinavdahiya/remove_label
be70bd26f Dropping label for origin releasepayload
3b3e69cac Merge pull request #476 from alecmerdler/ALM-722
0b1d2408f implement watch for PackageManifest resource
8909a2610 feat(package-server): add minimal watch
3f5133c6c Merge pull request #490 from ecordell/remove-vendor
ea90420af fix(build): don't vendor
341d9c1e0 Merge pull request #489 from jpeeler/build-golang-1.10
c85b44dea change go build to use 1.10
28ce23571 Merge pull request #482 from madorn/patch-2
f54911a34 Merge branch 'master' into patch-2
76a534266 Merge pull request #483 from ecordell/deployment-fixes
a981e480f fix(submodules): remove submodules
cd0c8e0a6 fix(deploy): only use replace on configmaps
ee1d27627 Merge branch 'master' into patch-2
3734b9ae6 Merge pull request #487 from ecordell/add-package-image-stream
490f273d9 Revert "fix(deploy): remove package-server until ci-operator is outputting the package-server tag"
9ff1a27d1 Merge pull request #486 from ecordell/fix-image-stream
a2a0acbcf fix(deploy): remove package-server until ci-operator is outputting the package-server tag
01fea7099 fix(deploy): yaml error in imagereferences
ac1456c93 Merge pull request #484 from ecordell/fix-manifests
2bf227bdb fix(deploy) rename image stream to `image_references`
e78ab125a Add manifests to dockerfile
a9aec1f56 re-cut 0.7.1
7f3c3d1a1 Merge pull request #479 from njhale/rbac-requirements
c9875bba5 docs(rule_checker): update hasOwnerConflicts comment wording
9e3d2a4f3 test(rule_checker): wait for informers to sync before continuing tests
3881e4212 refactor(olm): use SharedIndexInformer listers for RBAC resources
bd79623e1 docs(rule_checker): add reasoning note to hasOwnerConflicts method
2a78522e7 chore(dep): constrain k8s.io/kubernetes to the release-1.11 branch
0f4d07325 chore(comments): correct comment mistakes
6bcb9a1e0 test(deployment): remove/refactor tests expecting RBAC installation
441e2bae8 chore(code_gen): regen mocks and openapi
ee7d3a4b4 refactor(olm): add DependentStatus message field
2b2cde5d7 test(csv_e2e): add e2e tests for permission requirements
4591823f2 feat(olm): add ClusterRole/Binding requirement checking
d94767798 refactor(rule_checker): move rule_checker to install package
edf824218 feat(permissions): add RBAC permissions as CSV requirement
7a3a24056 refine cluster-admin OLM workflow
9f4351730 Merge pull request #478 from baichinger/dynatrace-rectify-form-of-business
584eb0f22 certified-operators: rectify form of business for Dynatrace
f207fc104 Merge pull request #477 from ecordell/clusterroles
7039b333b test(installplan): test clusterrole and clusterrolebinding resolution
78e5bb81b refactor(resolver): move step resolution to resolver package
59f2c880f feat(catalog): resolve ClusterPermissions on CSVs as part of an installplan resolution
e24427b9f feat(deploy): add clusterPermissions to CSV
639b8dbc2 fix(deploy): update upstream release
5d0d0c772 Merge pull request #475 from ecordell/0.7.1
1b2605f76 fix(ci): don't create namespace (it's in the chart now)
cfada3c7b cut 0.7.1
e9d04101e Merge pull request #474 from ecordell/push-tags
c771a29d9 feat(ci): push tags to quay
3a4c9f0c0 Merge pull request #472 from ecordell/0.7.0-packages-api
c82e275b3 re-cut 0.7.0
0183fe87f chore(deploy): add package server to release scripts
dd3c005d0 Merge pull request #470 from praveenkumar/patch-2
c8645173d Issue #469 update the service catalog instruction for minishift.
6c243bb4d Merge pull request #459 from ecordell/apiserver-dependency
d64eceef7 fix(olm): don't both checking for GVK in discovery for CRDs
4b47c0049 feat(e2e): use newNginxInstallStrategy helper to clean up csv e2e tests
49d0d484c test(olm): add e2e tests for depending on apiservices
ac7f222dd test(olm): add unit tests for depending on apiservices
ee39338e4 feat(olm): check for the existence of required APIServices before installing
fa6287214 chore(deps): add kube-aggregator to get APIService types
fb974a42d feat(apiservices): add support in CSV for apiservices
639f296b7 Merge pull request #457 from njhale/rbac-plans
f18a02595 chore(catalog): remove TODO comment
3d3e7692b chore(mocks): regen client mocks
2ab5b404b refactor(resolver): rename resolved RBAC resources
0e83d35ed feat(catalog): add OwnerRef patching for ServiceAccounts, Roles, and RoleBindings
2972534d4 feat(operatorclient): add Role and RoleBinding clients
a33ba616b fix(catalog): update OwnerReferences with stored CSV UIDs
f3fb63f3c refactor(installplan): move scheme build to init
736ed7a8c feat(resolver): generate UIDs for freshly resolved CSVs
ed0d96692 fix(catalog): handle creation of RBAC resources in plan execution
e9c5d18ad test(catalog): add e2e test for InstallPlan RBAC resolution/execution
4a6566748 feat(installplan): resolve RBAC resources during InstallPlan resolution
c44695f7b feat(installplan): enable creating step resources from runtime.Object
37c80b316 Merge pull request #466 from LiliC/lili/fix-install
af3cd6f8e Merge branch 'master' into lili/fix-install
eb5eb7250 Merge pull request #465 from alecmerdler/ALM-721
2aa0546df return all 'PackageManifests' for 'all-namespaces'
8d35ef469 Documentation: Change to full path
3e7535ae2 Merge pull request #452 from jpeeler/add-metrics
d0273a559 feat(olm): add metrics
b8b8c9734 Merge pull request #464 from operator-framework/add-owners
0976485ea Create OWNERS
db1e0e0b7 Merge pull request #458 from rodrigovalin/mongodb_operator_csv_updates
00c8044f9 Merge pull request #461 from madorn/patch-1
e11fa9ce2 Merge pull request #463 from njhale/test-ownerref-gc
d0e94518a Merge pull request #462 from ecordell/cut-0.7.0
821d3968c test(e2e): add OwnerReference GC behavior test
f28afd701 style(e2e): re-order imports
fc98155bf cut 0.7.0 release
04ab7bd26 feat(deploy): update makefile to generate deploy artifacts for okd
07ff80e8a List out options for Descriptors
7a0984c7f Merge pull request #460 from ecordell/0.7.0
9941f036c cut 0.7.0 images
7a8840955 Improvements on the MongoDB Enterprise Operator CSV.
9a7deedb8 Merge pull request #455 from njhale/revendor
720ad7110 fix(vendor): revendor dependencies
0a48190c6 Merge pull request #453 from ecordell/remove-annotations
793079cd2 feat(olm): attempt to cleanup namespace annotations on shutdown
c1942075f Merge pull request #451 from njhale/queue-pipeline
b9b308766 Merge pull request #440 from robszumski/update-csv
e908d7132 fix(scripts): short-circuit up to length 1 running pipelines
526a3e6c1 style(scripts): snake_case is_head function
0ff9d2013 fix(ci): move wait-in-queue job before deploy-preview
a1d6d032d feat(ci): add wait in queue job to test_setup stage
68385ce1a feat(scripts): add pipeline queue wait script
09cba2fb9 fix(e2e): update prometheus channel
93901f33d rh-operators: use preview as channel for Prometheus
96677e996 rh-operators: use preview as channel for AMQ
7ddb9b517 certified-operators: use preview as channel for Dynatrace
490c662e2 certified-operators: use preview as channel for MongoDB
db8f2659d certified-operators: use preview as channel for Couchbase
8c960c927 certified-operators: add double spaces in Mongo markdown
e20203f82 certified-operators: fix Mongo markdown lists
9bec7dc92 certified-operators: add required parameters for MongoDB
3c5c32230 certified-operators: add required parameters for Dynatrace
9d8ac6727 certified-operators: add required parameters for Couchbase
42657c62d Fix certified operators packages csv refs
edf552ab8 include certified-operators catalog in deploy on CI
0f27723b1 Update directory loader test for amq-streams
186236a98 certified-operators: update Dynatrace version
730b26dd0 certified-operators: add Dynatrace CSV + CRD
0459412e2 certified-operators: add Couchbase CSV + CRD
02994afd6 certified-operators: add MongoDB CSV + CRDs
c2d8e68ba rh-operators: add AMQ Streams CSV + CRDs
6bf3cad97 Merge pull request #447 from ecordell/generate-aggregated-roles
7c800d986 feat(catalog): add aggregated roles for each crd we resolve
f0d3b21c0 Merge pull request #433 from njhale/pkg-api
0ed929b8a Merge pull request #450 from ecordell/prom-update
391d51e32 fix(reststorage): start with empty slice when filtering
0936f3159 feat(inmem): collect CSV data in PackageManifestStatus
e95b93ba0 chore(server): remove commented packages
9b07a0c4c test(e2e): use CSVDescription in expected PackageManifestStatus
ed207e334 chore(openapi): regenerate openapi spec
2258a4eb7 feat(packagemanifest): add CSVDescription to PackageManifest
824d02dc8 fix(build): add OLM_VERSION file and .git directory to e2e.Dockerfile
adff217d2 fix(prometheus): add securityContext to alertmanager example
89ae2d1d1 test(packagemanifest): add fetch function for packagemanifests
faca2adad test(e2e): add logging to TestPackageManifestLoading
348edd45c fix(charts): change cert secret mount path
4c91f46ae fix(charts): change default package-server internal port value to 443
a07ff5ca3 fix(charts): update expected package-server chart value name
36f61d982 refactor(charts): use olm-operator-serviceaccount for package-server
db2d4d7ab fix(charts): correct indentation
46dabbd0a fix(charts): add missing coreos pull secret
d9130b966 fix(scripts): uncomment cleanup
ed9c71291 feat(ci): add package-server to ci
b723612b6 feat(scripts): add package-server to build scripts
1d516db51 feat(docker): add package-server to Dockerfiles
6d1df15fd feat(reststorage): return NotFoundError if manifest not found
7f9e37671 fix(provider): don't use pointer in manifest selection loop
e78eeb197 feat(package-server): add debug flag
dac5c051d fix(package-server): surface cobra flags to package level
8252d706d feat(package-server): add run-local package-server helm values
228fa902b test(package-server): add basic e2e test
cab422840 feat(deploy): update package-server templates
9a612461d fix(inmem): change struct tags
b6e03761c refactor(packagemanifest): move all package data to status
895898db4 chore(package-server): remove and ignore local config
e82d823e4 feat(package-server): enable openapi
d8ad5bb2e feat(package-server): adds skeleton of package server
7a2a804da Merge pull request #449 from djwhatle/fix-install-doc
1ab94b034 Merge pull request #446 from operator-framework/csv-guide
c1f4466a3 docs: update broken link
3c05b4dbb Merge pull request #448 from njhale/version-flags
0723f2167 Recommend installing OLM with `kubectl create` instead of `kubectl apply`
89dbea144 fix(build): remove GOOS and GOARCH settings
2aa971062 feat(build): add version injection to go test build
d743c7d51 style(flags): change version output format
eef8635a5 fix(build): point version build ldflag to correct package path
340c852f6 feat(cmd): add version flags
dada4703c chore(osbs): remove unused Dockerfile.single
989a71d52 docs: text -> label
23e0797d9 docs: move desc to bottom
8702b466e docs: add CSV guide
f5fef4abb Merge pull request #445 from njhale/pull-console
42da71917 feat(run_console_local): add docker pull for console image
e967cee84 Merge pull request #441 from alecmerdler/fix-console-script
cf392e3bb fix console script to work with both Linux and MacOS
232748ead Merge pull request #444 from ecordell/perms
b3f7069c7 chore(broker): remove servicebroker from CI
289d1e0ab chore(rbac): add olm-specific ClusterRole
00a4ba7c7 Merge pull request #443 from operator-framework/ecordell-patch-2
cdcfa6f0f Remove outdated install instructions
67f54b3d9 Merge pull request #438 from jpeeler/ALM-630-remove-broker
9d5348444 Merge pull request #442 from ecordell/remove-aos
a29b6f667 chore(deploy): remove ansible scripts for install
2c99b206c Merge pull request #439 from njhale/dockerfile-single
004a7615d feat(osbs): add non-multistage docker build
d0e573efe remove non-go references to broker
9cf92348a prune dependencies via dep ensure
1b038d7fb fix(servicebroker): remove broker from repository
4a342a5a5 Merge pull request #435 from jpeeler/e2e-fix
42bde3739 Merge pull request #429 from ecordell/catalog-rename
bc49404ef fix(scripts): allow use of existing KUBECONFIG env var
84d0ebaf7 Merge pull request #432 from ecordell/mv-api
0ff8f38a1 fix(scripts): make cp cross-platform
30519eb8d chore(api): move non-generated apiclients out of the api dir
ab96af79b chore(catalog): rename ocs -> rh-operators
3d31e3519 Merge pull request #431 from alecmerdler/ALM-620
f20ef2b19 add script and instructions for running OpenShift console
b382d3557 chore(rbac): remove view verbs from edit role
41bfb18fc chore(prometheus): remove namespaceSelector from ServiceMonitor
bfd26cefa Merge pull request #428 from njhale/osbs-ready
3e09a705f fix(Dockerfile): fix catalog copy typo
7d0a42a17 fix(Dockerfile): add catalog bin to final docker image
d44140f67 chore(ci): update gitlab-ci.jsonnet to reflect Dockerfile name change
2525f996b refactor(Dockerfile): make Dockerfile.rhel7 OSBS compliant
934c9c557 chore(dep): vendor dependencies
23f62e7db Merge pull request #425 from sichvoge/update_prometheus_csv
e49a88d86 Merge pull request #427 from njhale/catalog-e2e
da020c364 test(e2e): add catalog loading between operator restart test
479299d58 Merge pull request #426 from alecmerdler/action-descriptors
37a2a154b add actionDescriptors block
141a6d0de Merge pull request #423 from njhale/subscription-current-csv
39d857795 Merge pull request #424 from njhale/fix-catalog-loading
1234b1e7b fix(catalog): add check for loaded catalogs
393082db9 feat(subscription): add dedicated currentCSV field to subscription status
8cbefca49 Merge pull request #422 from njhale/fix-deployment-monitoring
0a9638ecb fix(operatorclient): remove wait for deployment rollout
9252bc43f updated prometheus csv according to the integration into openshift
b20aefa3b Merge pull request #420 from alecmerdler/ALM-681
87ba2785a set 'status' on Subscription when 'spec.source' is invalid
9853c632e Merge pull request #421 from njhale/remove-deployment-cleanup
be2e26571 fix(e2e): remove deployment cleanup
4ec2ddca7 Merge pull request #415 from njhale/namespace-aware-plan-execution
55707f79c refactor(operatorclient): remove error return in deployment poll
9b4c22776 fix(operatorclient): return error from infinite deployment poll
db27ccc03 test(e2e): add wait for deletion during OLM cleanup
2f8fdcdb3 fix(catalog): ensure pre-existing check does not interfere with upgrades
e5ac72fe6 refactor(resolver): incorporate custom error type
0a494d098 feat(catalog): add namespace awareness to plan execution
ec98eeec2 feat(controllers): add custom error type for multiple existing CRD owners
312df3b1d Merge pull request #419 from njhale/catalog-status
e87bdedf3 style(operator_test): reorder import statements
7d90484e2 refactor(catalog): return early from sync catalog
50341cf08 test(e2e): add deferred global cleanup calls to subscription tests
4d64d0ae8 fix(e2e): move log after nil check
d5d2a3737 fix(ocs): reduce prometheus requested resources
f24fac129 fix(olm): restrict deployment watches to the watched namespaces of the operator
44ea5a68d feat(operators): log which queue items are coming from
167d97221 test(e2e): remove cleanupOLM calls
2d070fa91 refactor(catalog): only load in-mem when a change is detected
5dff27973 test(installplan): add helper functions for building test CSVs
c17e14f5a fix(catalog): correct sync logic to accept catalog spec changes
44a517c42 test(catalog): add wait for catalog sync to e2e tests
22dd40de6 refactor(catalog): enable status subresource
b8152490f test(catalog): add catalog source sync unit tests
09dded4b9 refactor(types): remove Hash field from ConfigMapResourceReference
a112bb36d feat(catalog): add catalog status block updates
f727f4d13 Merge pull request #418 from ecordell/prom-fixes
720a55b2b fix(e2e): re-enable prometheus test
9916a718a chore(rbac): update roles to include resources
6cdae285a chore(rbac): list out verbs in edit role
44d13ab8a update 0.6.0 release
160da9e80 fix(ocs): add securityContext to prometheus example
6eeb650a3 Merge pull request #417 from mvazquezc/master
70a244051 Fixes #416
84153f348 chore(deploy): update 0.6.0 for okd
82513b3b2 fix(ocs): update prometheus operator
de1a4f994 Merge pull request #414 from pmorie/docs
29dbfe460 Make key resources linkable in philosophy doc
fc0d50908 Merge pull request #413 from ecordell/0.6.0
5a2ae2f40 Merge pull request #402 from njhale/namespace-aware-resolution
6dd73f6af style(resolver): remove nesting from owner CSV selection logic
567b0dd62 refactor(catalog): remove map-based subscription caching
dbf4e61d6 chore(dep): re-vendor with dep stable
569e82e80 feat(resolver): add namespace and channel awareness
569489cb3 cut 0.6.0
2ad0128b5 Merge pull request #404 from ecordell/catalog-updates
28142eb77 chore(docs): update docs for newer types
96e313f1e chore(ci): update catalognamespace for olm
259e1acbe fix(e2e): don't use vault in e2e tests
1d89136bf chore(ci): disable teamui deploy
de6a9916a chore(catalog): update prometheus deployment for 0.22.2
050575729 fix(catalog_versions_test): test all releases
b0c8fc91b chore(deploy): remove tectonic-alm-operator
7de243e9c chore(deploy): remove old catalog entries
05e52524c Merge pull request #412 from ecordell/remove-vendor
35af681db chore(vendor): remove vendor directory
058f7ad44 Merge pull request #411 from ecordell/csv-fixes-plus-e2e-fixes
42db0fa23 fix(e2e): use fetchinstallplan in subscription tests
6904c8f3b chore(e2e): delete duplicated test from merging
534123bf9 refactor(opclient): remove fake operatorclient
9b226365c fix(olm): re-enable a requeue
b5f047e35 chore(fmt): order imports correctly
dd0fd247f fix(e2e): update fetchSubscription call to new use version
1cc429a27 feat(deploy): add OLM type access to aggregated cluster roles
a7c9d5fce fix(csv): delete csvs immediately
9b3324f7d feat(subscriptions): pick up installplan changes more quickly
f4a25dc0c chore(logs): add debug logs if item can't be found in index
0869ea288 fix(deploy): key the rolebinding to the namespace so that serviceaccount won't lose its access when a new binding is created
85bc154a4 fix(e2e): clear existing CSVs before running subscription tests
5a73be3a0 fix(installplan_e2e): add deferred cleanup calls to installplan e2e tests
fd693873a fix(subscription_e2e): ensure subscriptions are completely cleaned up
e3daf7743 fix(subscription_e2e): add check and wait for subscription status
192f37bda fix(cvs_e2e_test): move old serviceaccount existence check
0d992700e Merge pull request #408 from Jiri-Kremser/broken-link-architecture
55bd22037 wip(olm): fix leaks
e1d989a93 minor: broken link
0a4fa4d76 chore(api): update apps/v1beta2 to apps/v1
7bce13d5b fix(subscriptions): don't update subscription when there are no status changes
d9bc7926d feat(olm): set up watches on deployments so that csv status can be updated more frequently
fb15243a9 chore(tests): remove old mock-based tests in favor of fakes
1b1508c77 chore(tests): rewrite TestIsBeingReplaced with fakes
77490abfb chore(tests): rewrite TestIsReplacing with fakes
db0fa43e9 fix(olm): add fixes for GC optimization
75127e586 wip(olm): add failing upgrade csv test
222e54012 Merge pull request #403 from ecordell/1.11-updates
53fe8844e Merge pull request #405 from alecmerdler/spec-descriptor-selector
d706d792e update 'urn:alm:descriptor:com.tectonic.ui:selector' to use GroupVersionKind
631759eb7 chore(deploy): update deployment resources to use apps/v1
45acaeedc chore(api): bump deployments from apps/v1beta2 to apps/v1
4345b4e28 Merge pull request #398 from ecordell/1.11-libs
2658e97ec chore(ocs): Update to prometheus 0.22.2 but disable e2e test
a051a62b4 feat(makefile): allow running a single e2e test from the make command
5b7dade3f chore(e2e): switch to using the versioned clients in e2e tests
d1ebf93a7 feat(api): migrate apis to common group and regen apis/clients
fc82cae77 fix(csv): update CatalogSource for 1.11
07b1d1b01 fix(catalog): update Subscription control loops for 1.11
188442aa5 fix(csv): update Subscription for 1.11
529602d90 fix(catalogs): remove outdated EtcdCluster validation
cdaf4073c fix(catalog): update InstallPlan control loops for 1.11
fe58b4c0a fix(catalogs): update catalog data to use ClusterServiceVersion
cff2f9a4a fix(ip): update InstallPlan for 1.11
d7dfb072e fix(olm): update ClusterServiceVersion control loops for 1.11
2ca630fde fix(csv): update ClusterServiceVersion for 1.11
0757d12cd fix(build_local): don't start minikube if already running
d69715b41 fix(csv): k8sjson encoders don't properly omitempty on json.RawMessage serialization.
30473c953 fix(crds): update CRDs to validate in 1.11 (versions field now required)
5303271ad chore(codegen): update codegen for 1.11
26f1fc06e chore(deps): update k8s libs to 1.11 versions
facde3cf4 Merge pull request #401 from njhale/verify-multi-source
b29b319eb chore(catalog_versions): remove extra lines in import
adbc87091 test(catalog_versions): add resolveCatalogs test for catlogs in each version
0d3c126da refactor(resolver): make resolved step logging more helpful
3e70e76cb Merge pull request #399 from alecmerdler/ALM-644
a2a6a02ef add 'spec.sourceNamespace' to the Subscription CRD validation block
f72890f47 Merge pull request #397 from robszumski/access-docs
87a7cd43c Merge pull request #388 from ecordell/prometheus-0-22-0
cdc506f5e Merge pull request #396 from njhale/multi-source-e2e
7ac344194 docs: add access control workflow
0b50c2154 test(installplan_e2e): change main package name to avoid conflicts
376439ebb style(catalog): add missing semicolon to log
c23d727f4 fix(catalog): remove required CRD existence check for service additions
6eb7fe69e test(installplan_e2e): add multi source install test
0c9b2e0fa test(util): add internal catalog source creation helper function
4e331b89f fix(ci): deploy files to ci cluster in order
e97fbf94d fix(makefile): fix run-local and run-local-shift
ea0930d5c fix(e2e): update prometheus serviceaccount
49d37c078 fix(make): fix local e2e
3e1b9c1ce fix(e2e): update e2e prometheus test for 0.22.0
a1321109c fix(deploy): put prometheus in ocs catalog
c7bed1cb8 fix(ci): update ci to use replace
9e2c188d4 deploy/chart: bump prometheus to 0.22.1
135e2efa5 feat(catalog_resources): add prometheus 0.22.0
56e15b8b0 Merge pull request #392 from jsm84/master
cd72756cf Merge pull request #395 from ecordell/alecmerdler-openshift-ci
2a201af79 chore(ci): update gitlab-ci.yml from jsonnet
c25ab627d Merge pull request #394 from njhale/installplan-status-fix
bc80df8fd fix(installplan): type InstallPlan.Status.CatalogSources to []string for backwards compatibility
b11c289e5 Merge pull request #393 from alecmerdler/openshift-ci
17592da9c chore(ci): update gitlab-ci.yml from jsonnet
261e45475 need to use 'operator-lifecycle-manager' namespace but ffctl is broked
e415a10cd Merge pull request #386 from njhale/multi-source-resolution
e8c12e624 Merge pull request #390 from jzelinskie/depfix
453e1c592 fix(subscriptions_test): replace single source resolver with multi source
64fa9e875 refactor(resolver): accept prioritized list of source refs as a parameter
6473a9e2b refactor(catalog): change parameters of getPrefferedSourceKey to take a source snapshot
7534147ff fix(e2e-local): remove extra RBAC config on minikube start (default in newer kubeadm versions)
1e5eed308 fix(e2e): apply charts from templates directory
47265e610 refactor(InstallPlan): add source name and namespace to install plan custom resource
67cd39ab4 refactor(catalog): limit sources snapshot to global and install plan namespaces
6058d9e51 feat(catalog): add catalog and catalog namespace to install plan spec
4a58b08a0 feat(catalog): add helper method to get preferred source key from plan owning subscription
290cc908b feat(registry): add subscription key type
96fa0d51b test(resolve): decouple expected results from test input
ec8cad8d7 refactor(resolver): return used catalog sources slice from ResolveInstallPlan
c62647668 chore(registry): dedupe to in comment
ca85176e6 refactor(InstallPlan): use registry.SourceKey to keep track of used CatalogSources
2b2c51758 chore(.gitignore): remove vscode file exceptions
719d848c3 fix(resolver): set resolved csv namespace to plan namespace in MultiSourceResolver
ac2e9fe33 feat(catalog): use MultiSourceResolver in catalog operator
f18d1b3e3 test(resolver): add tests for MultiSourceResolver
2643b9903 refactor(catalog): add helper method for getting a sources snapshot
d0a068551 refactor(resolver): remove extra functions from DependencyResolver interface
0449c930d feat(resolver): add CatalogSourceNamespace field to StepResource struct
d020b84e9 Fix invalid `minishift start` option in install_local_shift.sh
b08a54bbe Merge pull request #381 from ecordell/0.5.0
7c6d25f02 vendor: re-run `dep ensure`
6656c6ae8 Merge pull request #387 from njhale/fix-csv-namespace
17e627ca7 fix SingleSourceResolver to use plan namespace for resolved CSVs
f0814434c cut 0.5.0 release
f2a4d4e14 Merge pull request #385 from njhale/step-catalog-source
0995b5fa0 refactor catalogLabel to catalogLabelKey
ebf8f18f7 fix namespace used for CatalogSource lookup
fd59310cb refactor resolver to be in separate package
8638ba5e1 refactor interface method parameters
c759db72b fix remove .vscode/launch.json from .gitignore explicit include
9df2501ee fix remove .vscode/launch.json
476a9e8bd remove test for MultiDependencyResolver
509bb2b56 fix CatalogSourceStatus.ConfigMapResourceReference json struct tag spelling
03d5bd1a8 add test for step resource catalog source
56f03a242 add DependencyResolver interface and SingleSourceResolver implementation
3e383febf refactor interface method parameters
d643d0724 fix remove .vscode/launch.json from .gitignore explicit include
47dcd7d45 fix remove .vscode/launch.json
f876c89b7 remove test for MultiDependencyResolver
1fff51d79 fix CatalogSourceStatus.ConfigMapResourceReference json struct tag spelling
e1b91e17a add test for step resource catalog source
0f40860a8 add DependencyResolver interface and SingleSourceResolver implementation
009810605 Merge pull request #380 from alecmerdler/ALM-639
45ca4486c add 'spec.catalogNamespace' field to Subscription-v1
3c6e4ba00 Merge pull request #384 from alecmerdler/ci-openshift-fixed
f16a8eef9 fix catalog_namespace for deploying to OpenShift
65e7d3f31 Merge pull request #383 from alecmerdler/ci-openshift
15d8a6c2e Merge pull request #382 from aravindhp/master
8b1cf8b10 deploy to TeamUI's OpenShift cluster
1d29537bb fix(docs): correct spelling of philosopy.md
2ea88d2a9 feat(release): build a release package from a tag
7e69bb980 Merge pull request #377 from operator-framework/ecordell-patch-3
3ab77867f fix(docs): typos in architecture.md
34faa5c50 Merge pull request #375 from ecordell/check-doubleowner
6d407d93a feat(olm-operator): prevent a CSV from installing if there is another CSV in the namespace that owns the same CRD, but isn't being replaced.
856037c28 Merge pull request #374 from fabiand/patch-1
43b4897f7 Fix a small typo
11c8910f4 Merge pull request #361 from alecmerdler/ALM-581
b2ac1856c add checks for runaway control loops in e2e tests
58d0e1862 Merge pull request #372 from ecordell/fix-coveragebuild
953e8cf0d fix(servicebroker): add main_test.go to servicebroker cmd
cd8d9ec75 Merge pull request #371 from ecordell/fix-makefile
714d75167 fix(make): fixes run-local and run-local-shift
ddd865b42 Merge pull request #365 from alecmerdler/ALM-593
0f745670b fixed panic(err) calls
463a113ee Merge pull request #370 from ecordell/remove-tectonic-operators
11ab35f06 check upgrade path per package directory
d2aa0cd1f changed filepath for pragmas
f9d9892c6 remove testing.T from manifest validation files
3ad07e1f3 moved schema validation
1683df4b2 chore(deps): remove tectonic-operators as a dependency
efc318f8c feat(operatorclient): add minimal operatorclient types
07f41092e Merge pull request #367 from operator-framework/make-run-local
c73c02452 fix(make): set version var for run-local
3acb562cb Merge pull request #364 from alecmerdler/ALM-623
a39f5051f make 'InstallPlanPhaseInstalling' come before 'InstallPlanPhaseRequiresApproval'
b7be2306f added docs for RequiresApproval phase
76a7c967d Merge pull request #363 from operator-framework/reame
5f750e8f1 readme: fix broken link to CSV example
053103a8a Merge pull request #362 from ecordell/catalog-fixes
e931a9a92 fix(catalog): catalogsources should only read from their configured namespace, not all namespaces
2acef658a fix(catalog): release memory after loading catalog
f1c2353ae Merge pull request #356 from ecordell/ansible
d30204a80 fix(ansible): make sure git submodules are checked out before ansible build
f4941de5d feat(build): add rhel build
4e807c874 chore(deploy): add openshift_ansible as a submodule in order to symlink lib_openshift and lib_utils
80d0373f3 chore(deploy): add ansible playbook for deploying OLM
5b5b35e9a Merge pull request #359 from ecordell/fix-uid
fafda6cc6 feat(ownerutil): update ownerutil to infer GVK for OLM types
7ad3a4671 fix(subscriptions): directly include apiversion/kind of created resource
d6c089ff9 fix(e2e): make e2e local scripts work again
0c6f9c77e Merge pull request #358 from aravindhp/patch-1
5051d9fb2 Fix the deploy to kubernetes command in install.md
eb01e08e3 Merge pull request #357 from alecmerdler/ALM-601
21c158eb6 do not update Subscription-v1 if nothing has changed
fd5b256c7 Merge pull request #354 from ecordell/metering
168d37f96 chore(deploy): add upstream release and deployment pipeline
4ce8a80ef chore(build): use helm to template the catalog files in
be81b22fd chore(deploy): which catalogs get included in a release is configurable
b329f3fb1 Merge pull request #349 from ericavonb/ALM-568/serviceclass-per-pkg
5ec07140d feat(servicebroker): list one serviceclass per package
fdf597a11 Merge pull request #352 from ecordell/vendor-deps
3d09ef271 fix(ci): codegen needs apimachinary to not be pruned
f9196a883 chore(deps): update servicebroker for newer servicebroker libs
28eed314a chore(deps): commit vendored dependencies so that project can be built by people without access to tectonic-operators
7bab5b6d6 Merge pull request #348 from ecordell/subscription-approvalmode
a954d2d34 fix(e2e): fix local e2e scripts
8a134eaff test(e2e): add e2e test for Subscription/installPlanApproval
4211c6a71 feat(subscription): installPlanApproval field
be842e599 Merge pull request #347 from alecmerdler/ALM-339
dd41d1887 Merge pull request #346 from alecmerdler/ALM-567
a258fd5d8 implement manual approval of install plans
6cb7b8bc8 strip Markdown from descriptions for OSB
f59daf7f4 Merge pull request #345 from ericavonb/ALM-538/listcatalog
7e8316a36 fix(servicebroker): reverse map check bool order
9cc1a2eb5 test(servicebroker): check validatation of broker api version endpoint
e1bcfa068 Merge pull request #344 from ecordell/osb-part2
678f0a560 fix(apiserver): fixes rebase problems also removes the apiserver tests, which are empty
a3ed14d2b fix(apiserver): update imports
102aeabea fix(servicebroker/types): dedup description
ed955eef8 fix(servicebroker/types): set bindable to false on serviceplans
0d2a5198a fix(servicebroker/types): use link url for support url in serviceclasses
73b1cfecc fix(servicebroker): grab namespace from interface object
ed610876c chore(servicebroker): update types from broker libs
471be7531 feat(servicebroker): display icons and pretty names in catalog
50ba07844 fix(servicebroker/apiserver): use un-normalized CSV name
6941a6f1f temp(servicebroker/apiserver): log debug lines
117af7a36 wip(broker/sources): implement LastOperation handler logic
855cc3cfc Merge pull request #342 from ecordell/rebase-osb
b9c413639 fix(ci): fix e2e test runner
97c09a5b6 fix(makefile): add build-coverage command back for e2e testing
9ebe6f770 feat(ci): multi-stage builds and verify codegen and catalog during build
aed1cdc92 chore(ci): simplify container builds
71673e188 fix(makefile): fix release scripts
ec2c6cca9 fix(deploy): chart naming after rebase
91c8cd6f6 fix(makefile): support ocs and ccomponent catalogs
822d4e0da fix(makefile): always build targets so that dockerfile builds work
f7081f717 fix(broker): use updated imports for osb
a3a886ce8 fix(makefile): xargs working cross-platform
28e8af57c chore(deps): update lockfile
213233f22 chore(rename): fix path in catalog version tests
b50d813ec fix(Makefile): update makefile recipes for rearrangement
dfbcb7157 chore(servicebroker/apiserver): update broker interface types
897cc0060 chore(Makefile): add target to run e2e with minishift
8847db68a fix(deploy/chart/templates/01-alm-operator.serviceaccount): specify pullsecret
3a22e3bd4 rearrange(deploy/chart/templates): create secret before clusterservicebroker obj
5360b35e5 fix(.): update scripts with e2e dir move
90e10ab66 fix(Makefile): codegen clients correctly
09e797cfb chore(*): update github repo org
c2f775a94 chore(makefile): clean up build
d5ad6ed55 fix(Makefile): add '-' back to flag (rebase fix)
8ba65f256 feat(deploy): add servicebroker templates
88c782a69 feat(broker): add service broker service for alm
1967560ae fixup(api/client/util): return err instead of panicking
989f5c6a1 Merge pull request #341 from alecmerdler/teamui-host-var
7d925aeff use environment variable for TEAMUI_HOST
1c30ff285 Merge pull request #335 from alecmerdler/ALM-572
e21ee7c07 Merge pull request #337 from alecmerdler/webhook-olm
3145b14b2 Merge pull request #340 from ecordell/recut-0.4.0
9849ac381 Update manifests for 0.4.0 release
e4f41e039 Merge pull request #339 from ecordell/remove-pull-secret
183ee949f fix(catalog): pull secrets are no longer needed for vault and chargeback
1a11f6f6e use InstallCheckFailed instead of DependenciesConflict
a31f51028 s/ALM/OLM for Slack webhook
940e3ff5c Merge pull request #336 from wallyqs/patch-1
63d9031b4 Update README.md
a4e256433 Merge pull request #334 from operator-framework/ecordell-patch-2
9057ecfc1 Merge pull request #333 from operator-framework/ecordell-patch-1
2099041d0 Update README.md
c570251ca Update architecture.md
6d863b2cd Merge pull request #332 from ecordell/renaming
08a80891e chore(rename): ALM -> OLM in design docs
6381cc736 Merge pull request #331 from ecordell/update-install
9fa313c0a Add simple install instructions for using a released OLM
de5bbc846 chore(rename): rename ALM -> OLM in install docs
eeabc9227 Remove unneeded install steps (minikube fix and pull secret)
fb86364a6 Merge pull request #330 from operator-framework/update-quay-repo
7e41d8f4c chore(rename): rename quay.io/coreos/alm -> quay.io/coreos/olm
e1ac9c4a0 Merge pull request #329 from operator-framework/robszumski-patch-1
0070d819b readme: restrict SVG height
c898afe42 Merge pull request #328 from sichvoge/master
0dd62abb1 Merge pull request #327 from operator-framework/pipeline-status
3b19c2612 fix(ci): update paths in dockerfiles
6412c50cc added intro for framework
916ba2a5b chore(codegen): run codegen on renamed codebase
36176c6e1 chore(rename): rename alm -> operator-lifecycle-manager
5b40d9673 chore(ci): update ci to use new operator-lifecycle-manager repo
b9c0e32df Add pipeline status to readme
f09f63bae Merge pull request #326 from coreos/readme-update
66e226bbb Update readme
cf4f50a23 Merge pull request #325 from jzelinskie/coc
60ef57954 *: add code of conduct 
1b3927531 Merge pull request #322 from ecordell/v0.4.0
a900e1e51 re-cut 0.4.0
a7dff677f fix(e2e): same deployment install strategy shouldn't change label selectors, which are immutable
5c17f64cf fix(ci): better names for e2e test objects
260af5d52 fix(e2e): generate different label selectors for test deployments
a503a46b4 fix(e2e): use different csv names for each test case
c6de6e03e fix(ci): don't error if serviceaccount is already patched
2917401f0 fix(subscriptions): startingCSV is not required
5bc4fc0df fix(rename): coreos-inc -> coreos
8b31486e7 fix(ci): vendor in sanity check to remove codegen error
fabdd576e fix(e2e): use name of catalogsource instead of name of configmap
0bf38f34f fix(deploy): update x-operator version to one that supports CRs
0511a2124 fix(deploy): use DeleteAndRecreate strategy for CatalogSource updates
e798660fd fix(deploy): catalogsources should have different names
48e7a8cf1 fix(deploy): put catalogsources in catalog namespace, not hardcoded to tectonic system
71140acf8 remove generation of catalogsources from catalog/main
a4330ce8b write out both ocs and component catalogsources
897f7e02f update catalog version test to handle multiple catalogs
2617cfdbb split catalogs into OCS and cluster components, package 0.4.0
a774a5a3c Merge pull request #323 from ericavonb/org-change
3ffce335c chore(Gopkg.lock): update dependencies
97f460edf chore(*): update github repo org
6e87311ab Merge pull request #321 from ecordell/review-docs
b81c38aa9 Review docs for outdated information
8f74697eb Merge pull request #315 from alecmerdler/hide-slack-url
58aeb1d02 Merge pull request #318 from ecordell/etcd
7ec83bf2c move Slack webhook URL to environment variable
4d240e48d catalog: update etcd-operator to 0.9.2
3bf8c1810 Merge pull request #317 from ecordell/failfast-fix
3c0b23664 fix(ci): switch to short sha for naming
71c800252 fix(ci): update failfast namespace for new ci cluster
2232d43f3 Merge pull request #314 from alecmerdler/ALM-562
c6a2bafd1 do not update Subscription-v1 if unmodified
791f1c214 Merge pull request #309 from alecmerdler/ALM-514
75e7f7b6a Merge pull request #291 from jzelinskie/apache2
332daf717 Merge pull request #312 from coreos/docker-login-ci
5b6e4b4b8 fix(ci): change $SHA8 gitlab var to new $CI_COMMIT_SHA
1c97e2502 fix(ci): update docker host path
3a4c13a88 add bill of materials
b32acbd28 Merge pull request #308 from alecmerdler/ALM-556
65ab3c77d removed UICatalogEntry-v1
f44e42a5c Merge pull request #304 from alecmerdler/ALM-517-again
f5d13283d added docs for Subscription control loop
df1dd4623 fix(e2e/subscription): update import paths
3d114cd40 chore(Makefile): clean up all test files
6e2925aa2 refactor(e2e/subscriptions): add cleanup fns
85c088cab test(e2e): test subscriptions control loops
f21f668b6 Merge pull request #305 from ericavonb/ci-namespace
f6dbb9c59 chore(.gitlab): use commit sha in ns
79746d284 Merge pull request #300 from alecmerdler/ALM-517
b59d49cfa refactor Subscription control loop to only call Update() once
70e009236 Merge pull request #298 from alecmerdler/fix-slack-again
9af4fbe4b fix Slack notification
92cdd850c Merge pull request #297 from alecmerdler/fix-slack-webhook
5509ad892 fix Slack notification webhook in CI
bdb711983 Merge pull request #296 from alecmerdler/slack-webhook
b0aad99b9 send Slack update when deploying to Team UI cluster
429d1e2b2 Merge pull request #295 from alecmerdler/ALM-518
74beda753 GitLab CI deploys to Team UI cluster watching all namespaces
c2772b214 Merge pull request #294 from alecmerdler/ALM-518
50cf85768 modify GitLab CI to deploy master branch to Team UI cluster
1b4cd8bf3 Merge pull request #293 from alecmerdler/ALM-519
c1da279ac fix example YAML
04805c98b Merge pull request #292 from alecmerdler/ALM-517
63c74f24c fix subscriptions being stuck in UpgradePending state
1b3611100 add Apache 2.0 License
2593e41ca Merge pull request #290 from ericavonb/fixups
77b13702d chore(.gitignore): ignore all generated resources
e721e53ad Merge pull request #289 from alecmerdler/ALM-513
a65cc4591 set Subscription 'status.state'
f417c4703 Merge pull request #286 from ecordell/update-deps
2a777a7b2 refactor(tests): split source and calculate coverage over non-generated code.
1c9cfd95e docs(development.md): encourage test running after dependency update
514948720 fix(ci): pull common variable out into vars.libsonnet
37bab8896 test(e2e): add coverage generation to e2e tests
dd28b65fb Merge pull request #287 from alecmerdler/ALM-310
e26e6eb5f update ALM templates with correct JSON schema
4e45eee6b fix(tests): update tests to use the new client fakes
e3bc1546d refactor(clients): switch to using generated apiclients
10bcf45e0 feat(ci): add sanity check step which does basic verification before building the images
2dff2314a fix(ci): update fmt-ci to handle multiple files
ec5fe26d4 feat(ci): run verify-codegen and verify-catalog before building
92f479534 remove gocoverutil, go 1.10 coverage tools can aggregate coverage now
6aae532b6 switch to go 1.10
7480a5a8d fix(e2e): fix invalid CSV in e2e test
e0ac387f0 fix(catalog_resources): update deployment specs for 1.9
593a94bc3 fix(makefile): separate vet and docs testing
65046a066 fix(e2e): use newer apiversions
6da5d5969 Add $(DEP) as prereq to vendor make commands
4222a20ae Switch references from glide to dep
c292db210 Generate clients with code-generator
afe6cb041 Update api usage to 1.9 apis
daac0fbdf Update api usage for 1.9
d92b7fcbc switch to k8s.io/code-generator
24e57a7f3 Switch to dep and update dependencies
01c4de0eb Merge pull request #281 from alecmerdler/ALM-462
250f70471 fix subscription status
628febd16 Merge pull request #285 from ecordell/cut-0.3.1
138d8d36d Merge pull request #283 from alecmerdler/ALM-397
77a65bb9b add annotations for example custom resources to CSV
6f2c9ffd0 Merge pull request #284 from ecordell/update-install
cba3b5abb Cut 0.3.1
afc94a115 Update install instructions and add a `make run-local-shift` command to run locally in minishift.
34dcafeb8 Merge pull request #282 from ecordell/fix-for-1.9
60fc4bd6c Merge pull request #279 from ecordell/cut-0.3.0-2
f7c0f56d9 cut 0.3.0-5
a10cc2f6e update csv requirements
12fcc5b9b cut 0.3.0-4
2dabeb696 cut 0.3.0-3
3831ad9f4 Merge pull request #280 from ecordell/remove-vault-pod-status
8b3069d47 clean up during e2e tests
303dbfc7a fix(crds): nest csv, uice, sub, and installplan validation under "spec"
b45cf3bd0 Remove vault podstatus descriptor
118767c77 fix(crds): nest catalogsource validation under "spec"
842f1bd0e Merge pull request #278 from ecordell/cut-0.3.0-2
8674c88ba Add prometheus 0.14.0 and update 0.3.0 release of alm
b18efb38f Merge pull request #275 from ecordell/ALM-415/label-csvs-with-catalog
b6beb807e feat(operators/catalog): label resolved CSVs and CRDs with the catalog source they come from
ea719b26e fix(operators/catalog): set phase to failed when resolution fails and enable the e2e test for it
333c43f24 Merge pull request #277 from hongchaodeng/up
8aa46d920 Merge pull request #276 from ecordell/orphaned-resources-csv-upgrade
7a730d80a Merge pull request #269 from ecordell/uicatalog-cleanup
9a0f720be hack(ownerutil): hardcode groupkindversion for ownerreferences to CSV
e35094d77 Merge pull request #271 from ecordell/csvs-stay-dead
bb4987dd2 refactor(uicatalogentry): minor renaming / refactoring
82c09aaa0 When a watched object is deleted, purge it from the queue
53cf3c410 e2e test for uicatalogentry updates and pruning
b70b9b9eb Prune old UICatalogEntries from the cluster on catalog sync
243b8ee35 catalog: update etcd-operator to 0.9.0
0dacb994a fix(install/deployment): use ownerreferences when checking for SAs
8d532e499 Merge pull request #273 from ericavonb/ALM-463-installplan-spam
6dcca4ea5 fix(client/installplan): use correct resource name
f6c51b9cb Merge pull request #272 from alecmerdler/ALM-452
047cd3215 catalog operator ensures labels on Subscriptions
cc4fbe914 Merge pull request #270 from ecordell/fix-update-frequency-csvs
1de8a3105 fix(alm/operator): don't update the status timestamp if we aren't transitioning
7885505d9 Merge pull request #268 from hasbro17/haseeb/update-catalog-vault-operator-0.1.9
1d63245c7 catalog: update vault-operator to 0.1.9
135396abf Merge pull request #263 from ecordell/fix-e2e-reporting
fcb548755 Fix chargeback e2e test
af30d23e8 Fix e2e test reporting in gitlab
877e5332b Merge pull request #266 from ecordell/update-0.3.0
588109443 Update images for 0.3.0
b4d6900ac Merge pull request #265 from ecordell/test-catalog-version-compatibility
735aa9a91 fix imports
1b67f2386 Merge pull request #264 from ecordell/test-catalog-version-compatibility
aa7e593f9 fix(catalog): add tests for compatibility between versions of the catalog configmap and fix the errors that the tests revealed
c30733a31 Merge pull request #261 from ecordell/0.3.0
5e53f0ed3 cut 0.3.0
acfa8cec5 Merge pull request #262 from alecmerdler/vault-ocs-label
2091d7314 add alm-catalog label to Vault CSV
dbfa09021 Merge pull request #260 from ecordell/fix-matchlabels
afa80c885 Revert changes to labels/match labels on the deployments
79b8e551c Merge pull request #259 from coreos-inc/HOTFIX/ericavonb/ALM-280/fix-subscriptions
5baff2c9e fix(pkg/client/installplan): only set name if provided
ea9e30d90 Merge pull request #258 from ecordell/fix-overloop-catalogsource
f47d734d6 fix(operators/catalog): don't update catalogsource status when processed
e63a22231 Merge pull request #257 from ecordell/fix-subscription-loop
cb3ca1579 fix(operators/catalog): don't share informers between installplan and subscriptions
6b5f84a7f Merge pull request #249 from chancez/add_chargeback_to_catalog
3539b245f Merge pull request #256 from coreos-inc/ericavonb/ALM-280/fix-subscriptions
7b5e7e9f5 pkg/registry: Update tests for Chargeback
2014e31d0 catalog_resources: Add Chargeback resources to catalog
751d48d9b fix(operators/catalog/subscription): specify csv in installplan (duh)
b956294d3 fix(apis/uicatalogentry,subscription): set list items to correct type
d26070076 Merge pull request #255 from ecordell/fix-uicatalogentries
2f82f3122 fix logs in e2e tests
6fd549df2 Add package loading to catalog directory loader (only used for tests)
6f8b2bfff Add additional logging to catalog loading
353ff363b Fix makefile build directive
6f78d53d4 Remove `replaces` from prometheus operator since we don't have an older version
4d481cb1a Merge pull request #254 from coreos-inc/ericavonb/ALM-280/fix-subscriptions
8e0d02cbf fix(apis/subscription): correct meta in List obj
32f98ac78 Merge pull request #253 from ecordell/fix-subscriptions
249cb27b9 fix(operators/catalog): use the right plural name to list subscriptions
53fc7c1d0 Merge pull request #252 from ecordell/fix-bad-merge
f0414c14a Switch from gomock to counterfeiter and update tests
32ffa33f9 Merge pull request #233 from coreos-inc/ericavonb/ALM-280/subscriptions
f584f78c7 Merge pull request #251 from ecordell/packages-in-uicatalogentries
42ebb6277 feat(operators/catalog): standardize to UTC time
cc8db4627 Add package metadata to UICatalogEntries
c9633339e fixup(apis/subscription): use the sane json tag
03555deb1 Merge pull request #250 from coreos-inc/ecordell-patch-1
9fa0a5851 Update philosopy.md
71688e824 chore(zz_generated.mock*): regenerate code for k8s types
2c11385e4 chore(.gitlab-ci): ignore not found errors on delete
f4e9bb264 feat(operators/catalog/subscription): use startcsv if specified
67df0abf8 fixup(subscriptions): use CurrentCSV in status block
f3de8d35d test(operators/catalog/subscriptions): test lastupdate times
fe88b45cd fix(operator/catalog/operator): ensure safe concurrent map access
62d093947 Merge pull request #248 from hongchaodeng/up
a185673b5 fix(operator/catalog/operator): update queueinformer fun signature
dabf649e6 fixup(operators/catalog/subscription): store apiversion/kind info
5f962f041 test(operators/catalog/subscriptions): ensure installplan existence checked
331522962 fixup(subscriptions): check for installplan existance
402637b34 fixup(operators/catalog/subscriptions): regen mocks and such
f894bb664 chore(operators/catalog): generate mock catalog
a2c3662ef test(operators/catalog/subscriptions): add unit tests
b567a24dc fix(operators/catalog/subscriptions): save subscription
7a42bf1f4 chore(operators/catalog): generate mock clients for subscription tests
936b01de6 chore(**/zz_generated.mock_*): update mocks
6e61c85c9 feat(operators/catalog/subscriptions): add subscription ctrl loop
216f10206 feat(subscription): save install reference
75ad7b356 feat(pkg/client/installplan): add create method
0ddaf47cf feat(pkg/client/subscription): wrap subscription ops in client
58645801e feat(apis/subscription): add subscription crd back in
2f86b6f39 catalog: update etcd-operator to 0.8.3
0256ecc54 Merge pull request #247 from ecordell/resync
2f33d3268 e2e: Load catalog entries from the in-cluster catalog and verify they  install
9f7f18051 Requeue more often when we know we can shortcut a resync
290a00f28 Merge pull request #246 from ecordell/debugging-docs
3695458cf Merge pull request #188 from ecordell/GC-CSVs
68f7ab026 Add a doc on tracing errors through from ALM resources
b099acc14 Merge pull request #245 from hongchaodeng/up
bdfa7f0e1 Minor renaming / refactoring
b0cecb698 Refactor e2e test utils
cbdf8579c Port drive design docs to the repo
55cf862f5 Add docs on GCing and the new packaging format
428cede68 catalog: update etcd-operator 0.8.2 and vault-operator 0.1.8
3d84b8786 Fix e2e tests
f9ec5b11e Only query for csvsInNamespace once per loop
4770ac7ad Add requeuing logic to simplify state handling
7914ea6b3 e2e tests for CSV upgrades
c74887f7b Clean up old CSVs if they're successfully replaced.
c7067efb0 Don't queue up delete events (we take no actions for any of them)
4ace6f49a Merge pull request #243 from ecordell/update-vault-etcd
b9cc6ef7f Update packaging for vault and etcd to use the new package format
5ff9c26d6 catalog_resources: add etcd backup/restore operator and bump up etcd/vault operator version
05fa73b64 Merge pull request #242 from josephschorr/joseph.schorr/ALM-394/package-crd
f0ac71ce3 Implement ListLatestCSVsForCRD, which finds the latest CSV holding a CRD, per channel
23de2bafd Merge pull request #238 from josephschorr/joseph.schorr/ALM-394/channel
8641ec583 Add concept of packages to catalog, for tracking of services at a grouped level
11817365e Merge pull request #240 from alecmerdler/ALM-412
817290acd better description for EtcdCluster in Vault CSV to drive UI
049c95247 Merge pull request #239 from alecmerdler/etcd-resource-requirements
26d56074c add spec descriptor for ResourceRequirements for etcd
ddcf8ac5f Merge pull request #237 from alecmerdler/prometheus-resource-requirements
fa6f10b59 modify spec descriptors for Prometheus OCS
824c629a8 Merge pull request #235 from ecordell/fix-master-e2e
e70ebc763 Use generate unique name for e2e job
d44d23df7 Merge pull request #234 from josephschorr/joseph.schorr/ALM-392/latest-lookup
b08f555c7 Rename and export FindReplacementCSVForName method
406668fab Merge pull request #232 from josephschorr/joseph.schorr/ALM-392/catalog-lookup
a8b7d23c6 Remove references to Service Name in catalog
bec809cc4 Merge pull request #225 from ecordell/cd-to-separate-cluster
94c0b2930 Merge pull request #231 from josephschorr/joseph.schorr/ALM-392/catalog-sort
6e76a45fe Merge pull request #230 from alecmerdler/ALM-395
ab2c65122 Cleanup Catalog interface in prep for fixing how we handle service names
0a66aee97 Don't use helm upgrade
c99e53ddf add labels to OCS catalog ClusterServiceVersion templates
5408b2e77 Move all scripts to /scripts
5d6d6f134 Seperate update-catalog into its own script
4c7502bdc Update e2e tests to run in separate cluster
c5b1d2db9 CD to separate cluster
6c5dd48ec Merge pull request #226 from jzelinskie/tectonic-visibility
9a01b400a add visibility annotation to catalog resources
d5049fa56 move build catalog script to hack/
49f7593b8 fix whitespace stripping from configmap generation
2eb49ee52 Merge pull request #223 from jzelinskie/lithium-x-operator
f630af96d deploy/TAO: use stable release of x-operator
a8c2a814f Merge pull request #224 from alecmerdler/etcd-csv-servicename
e002a5b9e update EtcdCluster s/service/serviceName
6a7996901 Merge pull request #222 from coreos-inc/chore/ericavonb/clean-up-artifacts
2a0bf3cc7 chore(.gitignore): ignore test artifacts
bc9a49f45 chore(Makefile): remove vendor update from e2e-local
572b8fc62 style(buiild_catalog_configmap.sh): trim trailing whitespace
6c4d6077d test(e2e): test catalog entries visibility set correctly
b7af133ff Merge pull request #217 from coreos-inc/ericavonb/ALM-347/label-uice-visibility
62e196288 style(catalog_resources): add newline at end of file
14d01bf07 feat(catalog/uicatalogentries): add label via csv annotation for visiblity
55ee69b91 Merge pull request #213 from dcondomitti/e2e-backend-1
6e4520468 Consolidate vault operator version references
9aa3216b9 Merge pull request #220 from coreos-inc/fix-cp
461b9e3a4 fix(package-release): use gnu compatible cp options
0be59144f Add errors package to vendored dependencies
5e73bef6c Add readme for tests
126917d77 Add note for running single test
b360fe530 Add test ensuring Vault cluster is created with etcd pods
b85e8b968 Cleanup
14e18c4ea Add failed InstallPlan phase and skip test for it
301a44bfd Refactor InstallPlan fetching and allow passing an anonymous checker function
0793b6146 Add test for creating InstallPlans with invalid CSV names
f587bd2db Add test for creating InstallPlans with invalid CSV names without a Failed plan state
ae1f1716d Add test for creating InstallPlans from UICatalogEntry list
ccdf79627 Adds test for expected UICatalogEntries
55bfd5824 Add the ability to run a single test
e68c42720 Merge pull request #219 from ecordell/containerized-e2e
e8fa1278e Tag e2e test container with latest when master builds
97d44bc31 Take $NAMESPACE as an argument for updating the catalog
715202dbd Put jq script for convert to tap format into a separate file
d99da25c6 Containerize e2e testing and output TAP format
87bef05ef Merge pull request #216 from robszumski/fix-list
324022bac catalog: fix inconsistent header size
9de742bc4 catalog: fix markdown formatting/rendering
12abca115 Merge pull request #215 from hhoover/testmanualapproval
478bb1ee4 [e2e] Add a test for InstallPlans with  manual approval
91b819803 Merge pull request #214 from ecordell/0.2.1
df7abf39d Release alm 0.2.1
cec6e9c1f Merge pull request #212 from dcondomitti/test_bash_fix
7991570bc Fix parameter count comparisons
542650a3f Merge pull request #211 from ecordell/bump-vault
3ee73d9a9 Bump vault OCS version
0549b28a1 Merge pull request #210 from ecordell/remove-alpha
8075158e9 remove alpha files
eba63db69 Merge pull request #193 from ecordell/release-packaging
9eaa5404c Merge pull request #209 from jzelinskie/fix-source-list
7e3223c1f operators/catalog: only add catalogsources once
51716139b Add docs for packaging
e8e0b0c30 Fix catalog resource tests and remove samples
e1a5b8ebc Add packaging script to generate x-operator manifests
03a1a9d1c rename chart directory to "chart"
3bd1252af Merge pull request #208 from ecordell/update-0-2-0
6814bc295 Update 0.2.0 manifests
20f6bbc81 Merge pull request #207 from ecordell/update-0-2-0
d20dbd98a Update etcd-operator
5a3c2fcaa Merge pull request #206 from ecordell/update-0-2-0
48485c1c6 Update alm versions in 0.2.0 release
a644a04e0 Merge pull request #205 from jzelinskie/add-type
b45efefee Merge pull request #204 from ecordell/ALM-268/latest-catalog-versions
53d5e230f operators/catalog: add Type field to copied Secret
99ba86547 Update etcd and prometheus to latest operator versions
8daa2d8a3 Merge pull request #203 from alecmerdler/update-vault
9155159a8 update Vault OCS SHA w/ make update-catalog
1f521ad59 Merge pull request #202 from alecmerdler/update-catalog-resources
6c3738a54 run 'make update-catalog' for ALM-316
05d807ab4 Merge pull request #201 from alecmerdler/vault-resources
044a21808 reorder CRD resources to correctly match ownerrefs
e4da75fcf Merge pull request #200 from alecmerdler/ALM-316-codegen
f3f3c8737 run codegen for ALM-316
d12018e8a Merge pull request #198 from alecmerdler/ALM-316
7ea21a602 add resources to Operator CSVs to complete the ownerref chain
ee27f503e add 'resources' block to ClusterServiceVersion types
6dba184a0 Merge pull request #195 from ecordell/remove-catalogsource-cr
311e3a139 Merge pull request #197 from jzelinskie/bump-ops
51042fe05 tectonic-alm-operator: bump operator SHAs
789ffa735 Merge pull request #196 from jzelinskie/cp-secret
c7b61f856 operators/catalog: only copy secret data
39d358c86 Merge pull request #194 from jakedt/ohtwozero
de5d5b387 Update the OCS to pick up the latest changes
6cbf8ab64 Fix the defective CSV schema
4afd9d27e Fix up the alm_resources install directory
55a0feb65 Update manifests for v0.2.0.
f8eca24b4 Remove catalogsource cr from helm chart (catalog creates it on start)
de0e1b25c Copy over the resource for the 0.1.2 release and renumber
7bfdabbf9 Merge pull request #189 from jzelinskie/ip-secret
4c0e33bb8 Don't use full apiversion as resource name in CSV client
e644327b1 Remove incomplete e2e test
1f9115a39 Fix nil pointer error in CatalogSourceClient
44e32a2c4 Add catalog source to helm chart
d1068f851 Merge branch 'ip-secret' of github.com:jzelinskie/alm into jzelinskie-ip-secret
9b629a516 Merge pull request #175 from alecmerdler/vault-operator-update
46fb2d0bb Update OCS configmap
7fd9a5e88 Merge branch 'vault-operator-update' of github.com:alecmerdler/alm into alecmerdler-vault-operator-update
337723789 update Vault ClusterServiceVersion
841314c9c helm: add configmap
d9d9f4553 glide: bump lock file
bb2b24729 install: add CatalogSource CRD
503487dbb Merge pull request #191 from alecmerdler/catalogsource-configmap
66a8e7888 cmd/catalog: bootstrap OCS catalog
bba0cde5e for posterity
a1141f55b Merge pull request #178 from ecordell/ALM-308/csv-replaces
893d5ee01 Refactor install strategy deployment check
2893e4720 Merge pull request #190 from josephschorr/joseph.schorr/ALM-311/resources
d98d9c9c5 Add resources blocks for the CRDs defined in the OCS
ab7464b58 CSV upgrades: look for deployments by name, upgrade any with the same name in the new CSV, delete any that are in the old but not the new, create any that are in the new but not the old.
58678730b operators/catalog: rename aceClient uiceClient
ef8d93ee7 feat(*): specify objectmeta for CSV to replace
7ccbcaa82 test(pkg/client/deployment): add serviceaccount tests
18f91f980 refactor(pkg/client/deployment): use operator-client service account fns directly
ad1987618 operators/catalog: fix grammar in comments
ee7efb253 operators/catalog: support secrets in InstallPlans
187f38542 Merge pull request #187 from jakedt/renameace
8e99876c2 Properly label all resources that will be managed by x-operator
a5c2565eb Prepare test cluster with CatalogSource CRD
fb4c1bc25 Rename AlphaCatalogEntry to UICatalogEntry
05a7c746a Fixes for the Catalog configmap generator
7b3e28dff Merge pull request #185 from jakedt/csclient
c90fcd264 Add the OCS catalog as a ConfigMap
a660e8c0e Fix typo in CSV schema
a505195bd Merge pull request #181 from jzelinskie/catentries
5bda1381d operators/catalog: return error instead of fatal
c8746426e Merge pull request #186 from alecmerdler/prometheus-spec-descriptors
a0cca6078 fix Prometheus specDescriptors
c34cdf663 operators/catalog: init CatalogSource control loop
f11cb1ade Merge pull request #183 from jakedt/csclient
fc5b81ee2 Merge pull request #184 from robszumski/link-to-docs
4fa118562 Add a config map loader for catalog sources
ff5b90a13 catalog: link to OCS user docs
eea8ea28a Merge pull request #182 from robszumski/update-desc
dca4f406d catalog: beta -> alpha
69f9a51a1 catalog: update OCS descriptions
f67cc65cd Merge pull request #179 from alecmerdler/prometheus-spec-descriptors
37ddb3851 add more spec descriptors for Prometheus CRDs
a626be6b1 Merge pull request #177 from josephschorr/prom-service-account
17457cd9e Merge pull request #176 from jakedt/csclient
1cd9b1ee1 Update prometheusoperator.clusterserviceversion.yaml
a0b03ff97 Add prometheus role
51fa6dd49 Add a catalogsource client with create and update function
797f2c294 Tiny fix to use a const to set the CSV CRD name
5cd9318e4 Remove URL from catalogsource CRD until we have a remote catalog type
84bf532c6 Merge pull request #172 from ecordell/e2e-testing-harness
6b0e966fc Set catalog namespace when deploying for preview
da41202d1 Fix runtime panic due to client-go changes in new operator-client version
25d24dad5 Support both kube-1.7 and kube-1.8 in deploy charts
23a1c50fe Update to tectonic-operators
8995af638 Throw error when validating resources if asked to validate a kind we don't handle
8a3303352 Add local e2e testing scripts and an example e2e test
e8c2a217a chart: Remove unused ClusterRole and make catalog namespace configurable
36dfc9f08 Refactor installplan name into constant
2e9649597 Merge pull request #173 from ecordell/fix-catalog-resources
a7cd4c6b4 Update all catalog resources with the new CSV format
97dda8d93 Merge pull request #174 from coreos-inc/ericavonb/ALM-307/deployment-compare
9b80d3fce fix(pkg/install/deployment): compare deps by name/ownerref only
61aff8f26 Merge pull request #171 from coreos-inc/fix-error-returned
4ccac1dd8 Merge pull request #170 from coreos-inc/prom-status-spec
ef71a168c fix(pkg/operators/alm/operator): put correct error in status on install failure
e6399bab2 Add cluster size status descriptor to prometheus
237990a9f Merge pull request #162 from coreos-inc/ericavonb/ALM-268/operator-upgrades
6d4798fcc test(pkg/install/deployment): create suite of table tests
a42dbf0c8 test(pkg/install/deployment): make more explicit tests
b4bde65d3 refactor(pkg/install/deployment): break up install function
df3a5f855 fix(pkg/install): use Create*OrUpdate*Deployment
12475d0dd style(pkg/install/deployment_test): remove unnecessary struct init
5f0a9199e refactor(pkg/install/deployment): use semantic comparision
d05e18b69 fix(pkg/client/deployment): use cascading delete for deployments
92376d704 style(pkg/client/deployment): add newline b/w functions
3915349e7 hack(install/deployment): make current tests for dep updates pass
9a2572b86 fix(install/deployment_test): use correct type in array
fd15f84da feat(install/deployment): create or update or delete deployments
650310df4 feat(install/deployment): check deployments installed by name/spec
217a408cf feat(client/deployment_install): create OR update deployment by name
011792069 feat(install/deployment): create consistent dep names
b2d0f201e Merge pull request #168 from jzelinskie/pull-secret
606dbbc2e catalogsource: add metadata fields
eadf663db catalogsource: add omitempty tags
d2e3fc60b installplan: add catalogSources to status
b6453006c catalog: init ocs catalog source resource
a998f80f6 catalogsource: add k8s interface codegen
ccaf36d2a init catalogsource type
8a8c8903c Merge pull request #167 from alecmerdler/ALM-293
1297eda32 remove placeholder statusDescriptors
18862579e Merge pull request #166 from coreos-inc/update-app-version
6480e9998 Update appversion.yaml
9e2965186 Merge pull request #165 from jzelinskie/0-1-2
4207407cd TAO: README w/ tectonic-operators build instructions
cadcfb152 tectonic-alm-operator: bump operator image SHAs
8db996403 tectonic-alm-operator: copy v0.1.1 to v0.1.2
68a58b747 Merge pull request #164 from ecordell/fix-namespaces
db1469644 Swap namespace/name in annotation so that they match the env vars
5e399a100 Merge pull request #161 from alecmerdler/ALM-290
4fd53e65a add version to deployment ownerReference
165513979 Merge pull request #158 from jzelinskie/alpha
7bd20e2b5 alpha: explicitly pass manifests directory
52f2803a0 x-operator: build image based on alpine x-operator
5b1a33fa6 x-operator: fix CSV CRD schema in v0.1.1 manifests
d5ad65dd2 Merge pull request #159 from josephschorr/fix-tooling-and-docs
c46680642 Fix generate-mock-client to generate from/into the pkg directory
eb7f330c1 Add missing dependency tools to the DEVELOPMENT file
d65acfda5 alpha: bump v0.1.1
b8850478f Merge pull request #156 from dgonyeo/master
9188f4de9 alpha: init
01cb6b3e2 deploy: cut v0.1.1 tectonic-alm-operator
ce8d1fd33 deploy: copy v0.1.0 manifests to v0.1.1
6fb77bedd pkg/catalog/directory_loader.go: skip hidden nodes
1a34120ff Merge pull request #157 from coreos-inc/ericavonb/ALM-256/annotate-namespaces
67e4caeeb style(cmd/alm): format usage string on flag better
c45c3e2b7 Merge pull request #150 from coreos-inc/ericavonb/ALM-256/annotate-namespaces
f4d1a35af Merge pull request #155 from alecmerdler/empty-csv-icon
a103f14ab refactor(alm/operator): clarify watched namespaces
83283061e fix(alm/operator): use non-wrapped client
76099de61 fix(Makefile): make 'all' the default target
1720f1573 refactor(alm): pass in annotations from main
15bdb2549 style(alm/operator): simplify variable name
6afd3cafb style(alm/operator): rename function args
25f4ec424 fix(alm/operator): watch all namespaces if none provided
518f5beb4 fix+refactor(pkg/operators/alm): watch specific namespaces only
d493055a1 feat(pkg/annotator,pkg/operators/alm): add control loop for annotating namespaces
9d3c44cd7 rearrange(pkg/annotater->pkg/annotator): spell annotator correctly
e6ece3fd9 allow icon to be empty in CSV
dc92a7ec1 Merge pull request #154 from coreos-inc/ericavonb/fixup/codegen-csvs
3685e3b3f chore(apis/csv): regenerate api objects
77a4efe7d Merge pull request #153 from ecordell/fix-csv
c4263dc7e Fixes clusterserviceversion schema
cb7a85123 Merge pull request #148 from jzelinskie/docs-reboot
06f528b0d docs/architecture: add control loop details
389f58ec8 Merge pull request #152 from coreos-inc/rm-pull-secret
5e27c8a59 docs/install: remove coreos-pull-secret
fee3b0ddb Merge pull request #151 from josephschorr/console-guide
220c0342e Update install docs for the cut branch of Console
96b736d7d Merge pull request #149 from alecmerdler/spec-descriptors
c8adf0e65 add SpecDescriptors to ClusterServiceVersion
61c761acf Merge pull request #145 from jakedt/xoperator
9ffa4c0d1 Add the required resources to let x-operator install ALM in minikube
3136f0081 Add a specialization of the x-operator for ALM
3b2758751 Merge pull request #147 from jzelinskie/coverage-badge
2c91aadf3 docs/design: add manual install stub
878df9f5d docs/design: add architecture doc and fix readme
0bd266438 docs/design: delete stale design docs
f4a9c0061 docs/design: delete old mocks
66e425a02 README: add quay badge
ea1f12665 Merge pull request #134 from coreos-inc/ericavonb/ALM-212/installplan-status
335619cb1 style(*): alias core/v1 import everywhere as corev1
4fa080932 Merge pull request #146 from ericchiang/readme-link-fix
e038534b9 README: fix install link and JIRA link
9952d4569 refactor(installplan): abstract away conditions array in status
67c247bc0 style(catalog): use consistent import names
810f34129 test(pkg/apis/installplan/v1alpha1/types): test setting conditions in status
477bca533 refactor(pkg/operators/catalog): explicitly switch on err to set conditions
8c0aed101 chore(apis/installplan/v1alpha1/types): use conditions instead of phase in status
b1d637171 Merge pull request #143 from ecordell/test-catalog-resources
4a5e04fc8 Test our catalog resources for consistency
cb1f07b7d Merge pull request #142 from josephschorr/joseph.schorr/ALM-248/vault-csv
c01f977ea Adjust CSV status descriptors for Vault to reflect new status block
6dcae0af5 Merge pull request #141 from ecordell/update-package
55b62a8b7 Update alm/catalog images in install resources
98c7b0a51 Merge pull request #140 from ecordell/unit-tests
ac53025c3 Remove commented code
53e2b814e Fix namespace labelling bug
92879d724 Move code into /pkg and create coverage report
987afaed8 Add more unit tests
462a147e1 Merge pull request #138 from josephschorr/joseph.schorr/ALM-228/short-names
01583dba0 Add various shortNames to the various CRDs
dc681f98f Merge pull request #139 from josephschorr/joseph.schorr/ALM-202/proper-contact-info
ee4d755b9 Change maintainers and add useful links to our CSVs
df5fb769f Merge pull request #137 from josephschorr/joseph.schorr/ALM-248/fix-csvs
eb3669ae5 Update etcd Cluster CSV to have it display real status information
bdc2e42f5 Merge pull request #136 from alecmerdler/wrong-alertmanager-crd
b460d91d2 Add "coverage" (html) and "cover" (cli) commands, update to exclude mocks
90204948e spellcheck
b6c40ce67 Merge pull request #135 from ecordell/fix-catalog
757a28ae6 Fix catalog resources
a82cc1d04 Merge pull request #132 from ecordell/unit-test-install-strategy
58df3f0fb Merge pull request #133 from ecordell/ALM-226/annotate-namespaces
a9441b778 Refactor deployment strategy client + naming fixes
04006ca64 Switch to patch for updating namespace
f55998e70 Annotate namespaces on ALM operator start
76e2d4f14 Deploy install strategy: Add tests for error cases
23831465c Add tests for deployment install strategy with role generation
5f702eb13 Refactor install strategies
b0d6fb376 Merge pull request #128 from jzelinskie/ip-test2
811cff1d5 Merge pull request #131 from ecordell/ALM-211/more-crd-info
2e71fe157 apis/installplan: test JSON manifest on StepRes
00e457085 operators/catalog: test creation of dependent CRDs
af1d33f59 csv/customresourcedefinitions: add version and kind
b7c8fe2ab Merge pull request #127 from coreos-inc/ericavonb/ALM-179/clean-up
44008212e test(client/alphacatalogentry): refactor tests into table fmt
3bebeae20 fix(apis/clusterserviceversion): correct json tag
8dca0c6c4 Merge pull request #130 from ecordell/update-images
ab1baaa76 wip
e1260daa4 Update alm and catalog images to latest
6ad416d9d test(client/alphacatalogclient): more thoroughly test update cases
c8d3f9b2c test(client/alphacatalogentry): test error case
62557efb0 test(client/alphacatalogentry): test upsert behavior
51a7c34bf test(client/alphacatalogentry): add test machinery
370c10ba4 operators/catalog: s/CreatePlan/ResolvePlan
143ba6991 apis/csv: fix nondeterminism in GetAllCRDDescs
85f17ae6b Merge pull request #124 from ecordell/ALM-190/recreate-missing-resources-csv
7af7f6c30 operators/catalog: refactor and table-testify
6e9da6a37 apis/installplan: add StepResource constructors
91debfc17 apis/csv: rename GetAllCrds and table test
b86464ebb catalog: resources should use correct sha256 image names
9c9c7097f alm/operator: Add a test for transitioning to pending if component goes unhealthy
14370a1d6 alm/operator: check if resource has gone missing and replace it if so
03e41a2da Merge pull request #126 from ecordell/pull-secret-clean
98891186b remove pull secret from install
c457adbb6 Merge pull request #125 from coreos-inc/ericavonb/ALM-179/clean-up
5dec900e0 Merge pull request #123 from ecordell/update-catalog
b45019ef7 fix(catalog/alphacatalogentries): set sync status correctly
184d14ff6 test(catalog): test store sync
9f3579e3a Merge pull request #118 from coreos-inc/robszumski-patch-1
f95121062 Merge pull request #121 from ecordell/ALM-193/gc-rbac
0e96b11d9 Update etcd and vault to latest releases
e68b22415 Merge pull request #120 from ecordell/ALM-196/omittempty
4cfe1e0f4 Merge pull request #122 from coreos-inc/ericavonb/ALM-176/idempotent-aces
37af472a0 fix(client/alphacatalogentry): use put not patch
86fa7cc00 doc(catalog): add debug lines
23cff0795 style(client/alphaservicecatalog): remove nested ifs
77780f336 feat(client/alphacatalogentry): patch existing catalogentries
1bd9c3d6d WIP
494096e2d refactor(cmd/catalog/main): clean up file
f36488533 Set ownerreferences on all objects created from install strategy
273c51929 Add omittempty to fields on CSV
fb8ae2e4a Update install.md
2c65697f0 Merge pull request #117 from ecordell/local-install
8e1cb54b7 Install instructions for ALM + Bridge locally with minikube
c60fcfe88 Merge pull request #113 from ecordell/update-catalog-labeling
c1af2910d Add serviceaccount for vault
b2b23fd11 (temporarily) use dev versions of vault and etcd operator
77875e693 Update catalog resource labelling
e5b72c9a9 Merge pull request #115 from jzelinskie/ip-test
4f244c99d Merge pull request #112 from ecordell/add-coverage
7712ad1e3 Merge pull request #111 from ecordell/update-install-manifests
4aa8a32b7 apis/csv: make OwnsCRD a CSV method
e39f22265 operators/catalog: decouple phases from logic
872aab831 queueinformer: move MockListWatcher
1abd54a26 operators/catalog: table-driven csvOwnsCRD test
5297b6760 Add command for generating coverage report
2a1f47933 Update install instructions
b88d29635 Update rendered yamls for installation
35663cbee Merge pull request #109 from ecordell/prometheus-working
9d67f083f Update prometheus defintions
c0f43fcb3 Merge pull request #110 from coreos-inc/ericavonb/quick-doc-fix
2fc8a8741 doc(control-loops): update CRD name to InstallPlan
68a1ff41a Merge pull request #108 from ecordell/alpha-catalog-and-bugfixes
693287b78 Update prometheus
e9b809b3e Better naming and log levels
82302814c Update prometheus CSV to 0.14.0
9ac84d5fa InstallPlanList should be a list of InstallPlans, not InstallPlanSpecs
aa3b5a71f wait for caches to sync before processing queue
68379bf2c Prometheus CSV should use the same serviceaccount in permissions and deployment
81e203cb5 Better log messages on catalog operator
d4cbbdedd Add entry matcher for alphacatalogentry client tests
120908d36 Restore alphacatalogentry test
1e13cf7bf Switch to log.Fatalf
bf13acc1b Update vault CSV to point to latest version, and use coreos-pull-secret
5a314066a Fix operator tests
eb2195549 Ignore if alphacatalogentry exists
5f755525d If AlphaCatalogEntry exists, update with a put
a229712a9 re-enable alphacatalogentry generation
eec650218 Installplan should resolve to objects in the same namespace
304622e68 Serialize resolved resources as json
c24aa8381 Fix operator loop
561a8cb4c Add logging to installplan resolution
56ebf9d21 Add more logging to queueinformer
8820c18c1 Add more logging to catalog operator
a29688d29 Update installplan types
415567ead don't generate alphacatalogentries for now
820dde7a6 Ignore if catalog entries exist
62ab7ff16 Delete/recreate alphacatalog entries
1d8e60836 Update even if there's a transition error
9b511d237 Patch don't put
1d6fc4fd9 Set initial phase to planning on installplan
bef73f951 Fix alphacatalogentry api calls
e621d84d3 Install alphacatalogentries into configured namespace
3aeb6c346 Add logging to alphacatalogclient
c4654c533 Return early if no error creating resources
39534c680 create AlphaCatalogEntry if it doesn't exist
a32cd932b Update catalog resources for self-consistancy
228c57389 Add more descriptive errors
df31254be add catalog files to container
33e26a10a catalog: more logging
8a5047640 Load catalog resources into cluster as AlphaCatalogEntries
061616272 Create alphacatalogentry on deploy
94d474ae2 Merge pull request #103 from coreos-inc/ericavonb/ALM-124/service-catalog/ALM-173/alphacatalogentries
35222264e Fix vet error
460703c1a test(operators/catalog): add ListServices method to test impl of interface
dc117bbc2 test(catalog/alphacatalogentries): fix test mocks
bce5c5c18 fix(catalog/alphacatalogentries): correct pt/receiver types'
dff6d6db9 test(alphacatalogentries): test catalog sync
aed9b2f2f chore(mock_alphacatalogentry_client): generate mock
6a442d511 feat(catalog,client/alphacatalogentry): sync catalog to CRs functionality
5d11423bd feat(catalog/types,mem): add method on interface for listing all services
76f465f2b Merge pull request #102 from jzelinskie/installinstallplan
274fb8d0d operators/catalog: add multi-source TODO
8363ffae3 operators/catalog: transition to install phase
92f6103f3 makefile: generate installplan mocks
9c3317819 Merge pull request #106 from ecordell/load-catalog-from-files
00320dda1 Load in memory catalog from a directory
17b7996d9 makefile: add gen-all command and run
0525e7641 operators/catalog: init installing a plan
ca44d4b71 Merge pull request #95 from coreos-inc/ALM-158-install-plan
243b5d009 Add CSV to install plan resolution
d6752bfe2 Merge pull request #105 from jzelinskie/csv-provider
3877eb87d apis/csv: add missing provider field
de6a2c2fe Merge pull request #100 from ecordell/catalog-resources
aac599c18 Add prometheus and vault catalog resources
3f1bb5d23 Fix tests
fc4a46002 feat(operators/catalog/install_plan.go): adding resources to install plan
a9aa77792 Merge pull request #97 from coreos-inc/ericavonb/ALM-124/service-catalog/ALM-173/tests
f413aa091 test(catalog/mem): sort CSVs returned by version
c96101ed9 chore(catalog/mem): update data types
a831e90b6 test(catalog): simplify tests
9d71d36c9 Add catalog resources directory and test catalog resources
a4313abea doc(catalog/mem): update comments
a67cd731b feat(catalog/manifest): add loading manifests from file
443f46668 test(catalog/mem): test basic catalog fns
7db6f5327 Merge pull request #99 from ecordell/move-outputs-to-csv
22b0c9b4c Merge pull request #94 from ecordell/move-outputs-to-csv
152b0c961 Update regex for resolved etcd cluster
660523b70 Fix tests
0d5602740 Update etcd resource permissions
cf4193b99 Fix sync
2ec7fcdb2 Remove unused config mount
efc5b820f Fix rebase
0538e6375 Dob't create serviceaccount if it already exists
ad8eef8c3 Fix role creation
3ee37df6b Log error when install fails
a472de848 Validate that example CSVs can be parsed into CSV type
71d896a91 Rename capability -> descriptor
24369398d Add implementation of permissions generation for CSVs
10f88384a Add permissions block to install strategy on CSV
87fe45612 Update CSV types and parsing to match new CRD description design
d06dd2d37 Move labels -> template/labels for CRDs
571f1e7be Rename x-alm-capabilities -> x-descriptors
1383af90c Move output definitions to CSV and move output values to status block
a3e4a3cf6 Merge pull request #96 from jzelinskie/installplanctrl
acbb410bf operators/alm: replace config map with flags
28176c40d ci: add missing pre-step for catalog
641a1342a helm/gitlab: add new deployment for catalog
227271de9 operators: init installplan operator
1486c1b27 Merge pull request #93 from jzelinskie/fix-fuckups
7168eb11c installplan: fix inconsistent samples
9ece589c5 Merge pull request #91 from ecordell/fix-etcd-installplan
53e003cf8 Update etcd installplan to match schema
84eb3c116 Merge pull request #77 from coreos-inc/ericavonb/ALM-124/service-catalog/ALM-152-catalog-implementation
bece1a043 chore(catalog/mem): update fns for mem catalog
ba1e3b0fd refactor(catalog/types): shorten interface fn names
bf09c0426 Merge pull request #90 from jzelinskie/installplan
7b44fdb0d installplan: add types for Install Plan Status
84fbe362d temp
1958ee917 refactor(catalog): embed ClusterServiceVersion spec in AlphaCatalogEntrySpec
5b26cdbe2 feat(catalog): map CSVs to the versions they replace
b70208116 Merge master into ericavonb/ALM-124/service-catalog/ALM-152-catalog-implementation
e155e8834 Merge pull request #83 from coreos-inc/req-status
8f682dd4d Merge pull request #85 from coreos-inc/ericavonb/ALM-124/service-catalog/withentrycrds/ALM-152-catalog-source
84d7e3f10 Fix rebase
094624327 doc(vault.alphacatalogentry): fix sample name
33cd3c848 fix(alphacatalogentry): regen code for alphacatalogentry types
e2ff74f4b Merge pull request #89 from jzelinskie/fix-ci
bb886bd69 Fix rebase issues
5fd058ad0 use return instead of break in switch
1f883b2e0 Fix icon parsing
7885cbd6a Add full state transition tests for clusterserviceversion status
b9cdb834c gitlab: run glide install in test stage
a418e5c02 Revert "Merge pull request #86 from jzelinskie/ci-uniq-base"
8c1806f95 Refactor phase transitions for clarity and testability
4557f6dc9 Update codegen
67d3ef518 Fix typos
6af6f45b6 Fix CSV type (deprecated fields)
123b97514 Add missing return from phase transition caused double install
baa023f51 Use switch for phases
b2e45f787 Check if deployment is installed before attempting install
c27f3404c fix(alphacatalogentry.crd.yaml): add names
d02d92a39 Update etcd cluster crd to be versioned
8871532bd Adds a state transition test
1c864082b Add mock alm operator for testing
f444c721e towards a mock alm operator
5988f7a0f Write conditions to status during state transitions
16b745178 Add conditions as a history of state transitions to csv status
8fd783fbb Resolve rebase conflicts
f85814d4a Write requirement status back to status block
df6e46aa4 Cleanup phase transitions
8df808b08 Only check for CRD existance
0ad75fe98 Update gitlab pipeline
fdcc6c531 sketch out phase transitions
bfd87540a Check for phase before attempting to install
46310f300 Add ClusterServiceVersionStatus
dd119dd51 Add schema for ClusterServiceVersion status
e069292f2 Look for requirements in same namespace as ClusterServiceVersion is defined
70a7ce024 Move config handling to its own package
83d7a4afb Merge pull request #84 from coreos-inc/ALM-142-add-owner-ref
8e0115169 doc(catalogsource.yaml): remove example catalogsource resource defs
805c59547 feat(alm,install): adding in owner reference to deployment
bef5f9d19 doc(vault.alphacatalogentry): add vault catalog entry example
9ce7e9b4e doc(alphacatalogentry.yaml): create CRD yaml
f015e7c36 feat(alphacatalogentry): add provider field
968b0a61f refactor(apis/catalogsource): remove for now
335cca566 Merge pull request #86 from jzelinskie/ci-uniq-base
4fb37402d gitlab: base image now unique per git ref
1efbc9087 doc(catalogsource): remove extraneous comment
7b8476845 refactor(apptype->alphacatalogentry): rename crd for catalog
beb9ec957 feat(apis/apptype): add back in apptype crds
0b2e6bdcf chore(catalogsource): only have one url per src
f8a33bafc feat(catalogsource): update spec for console to consume
8b5860f4b feat(apis/catalogsource): add new CRD for catalog
0d6abe848 style(catalog/mem): use variadic fn arg variable names
c636f5116 refactor(catalog): rename in-memory golang maps catalog implementation
83e1fb2ce refactor(catalog): rename fn to remove ambiguity
2a501322c style(catalog/mem): order import blocks
ea31478eb style(catalog/mem): use explicit key/vals for struct
cf8eb296e refactor(catalog/mem): remove sources subpackage, enforce interface
ae55f856b feat(catalog/sources/mem): add simple catalog implementation
718ce0946 style(catalog/mem): use variadic fn arg variable names
10bdbace5 refactor(catalog): rename in-memory golang maps catalog implementation
3725b942f refactor(catalog): rename fn to remove ambiguity
eeb1c0adc style(catalog/mem): order import blocks
00f2c7934 Merge pull request #82 from coreos-inc/validate-objmeta
cc3096894 style(catalog/mem): use explicit key/vals for struct
d09ab7670 refactor(catalog/mem): remove sources subpackage, enforce interface
4dfb5ec5c Merge pull request #81 from jzelinskie/crds-split
29e645330 csv: add json tags to CRDs
d3f658b29 Add tests to validate object metadata
910df1e1b init Required/Owned CRDs for CSVs
bf53109f0 Merge pull request #80 from coreos-inc/add-minikube
2ab5d1478 fix(cmd): fixed config parsing
c4d10078d Merge pull request #79 from alecmerdler/revise-samples
baa874a32 fix samples to reflect new updates
5a2346192 Merge pull request #76 from coreos-inc/ci-fix
dbf5286b3 Merge pull request #70 from jzelinskie/manages-spec
73ad50bff fix validation of approval types
4897b538a remove apptype from codegen
f60510864 add initial ownedCRDs field to CSV
9839e295e feat(catalog/sources/mem): add simple catalog implementation
71d4463b9 Merge pull request #71 from jzelinskie/installplan
189bd5ce6 fix apiVersion for etcd installplan
e2fd33ace move Approval type into installplan
377eefbdd add dashes back to apigroups
8ff1be6ed add install plan validation
6557ac009 subscription: fix apptype references
788441dd7 fix inconsistencies
8c0730238 capitalize approval types
e83e5940a s/update only/update-only/
5484737f4 s/desired// && s/cloud/cluster
d2dab3168 installplan: add approvals
9b2caac86 installplan: add RequiresReview status
a50908fd3 samples/installplan: remove inconsistencies
e50adb0ed installplan: refactor status
80aacac78 installplan/v1alpha1: add spec
c2ef80c91 installplan: add status.status field
3f4e08aa8 samples: add status for installplan
46a3bed8a init installplan
4b5a5a1bc Rename InstallDeclaration -> InstallPlan
554643d36 Merge pull request #72 from coreos-inc/remove-requirement-namespaces
824832144 Merge pull request #75 from coreos-inc/ericavonb/ALM-124/service-catalog/ALM-152-catalog-implementation
29b4c4848 Remove AppType and merge its fields with ClusterServiceVersion
995d56b5b Merge apptype into clusterserviceversion (examples only)
dbc627a4a refactor(catalog/mock->catalog/sources/mem)): organize catalog types
2eaf567b0 Remove namespaces from requirements
a347d1905 Merge pull request #74 from coreos-inc/alm-151-config
9dd95919f feat(deploy): add in config map
ac68250e5 Merge pull request #73 from coreos-inc/fix-merge
5341eaef0 fix merge of namespacing PR
18f385fc2 Merge pull request #67 from coreos-inc/alm-151-namespaces
cac055852 feat(alm): adding in namespace list support
11d5b9810 Merge pull request #54 from coreos-inc/ericavonb/ALM-124-service-catalog
8ec965353 refactor(client/{opver->clusterserviceversion}_client): rename file
8dc5d5c43 refactor(catalog->planner): rename component
97905c574 refactor(appcache): use new crd name ClusterServiceVersion
b27da0693 refactor(subscriptions): change pkg name and remove unused mock
c8adad1b7 feat(appcache/mock): add simple implementation of appcache interface
9e77b6b48 refactor(appcache/types): use simpler name for interface method
9274c1231 wip(subscriptions): remove logic for now
51cf9abff refactor(subscriptions): rename to installplan
79d12996b feat(apis/catalogsource): remove for now
3b1999f4e rearrange(subscriptions): move out of catalog pkg
6dfa868fd feat(catalog/types): simplify interface
a4cc20f11 feat(appcache): add interface for app catalog cache
e5a50ea3a rearrange(apis): rename installdeclaration as installplan
e3ec5a360 feat(catalog): use k8s typed objects
bb5895395 feat(hack|apis): codegen new types
9c9cc9d20 feat(apis/installdeclaration): add installdeclaration crd types
5815ccf1d feat(apis): add catalogsource crd type
9c5666177 feat(apis/subscription): add cdr structs
03abf3f8f fix(catalog): fix type inconsistencies
474bcfbf2 test(catalog): finish memCatalog mock implementation
9db7d6808 fix(catalog): change fn arg to ptr type
f065705ec doc(catalog): comment on functions
7437f5f98 doc(catalog): add comment on temporary type decl
71fc94818 refactor(catalog): move resolve dependencies to catalog interface
3c8d83236 test(catalog/subscribe): add empty test file
6a5c25f03 WIP(v2 catalog): update for new control loops pt 1
85d70e149 WIP(catalog): sketch out loop ops
da52eccac Merge pull request #68 from coreos-inc/fix-tests
3561ec0b4 Fix tests
d64d70023 Merge pull request #66 from coreos-inc/multiresource-example
63659d78c Fix apiversions and naming
409c867e1 Add prometheus example (has multiple resources)
6e9a2ec8f Merge pull request #63 from coreos-inc/install-instructions
0af3d2bdb Add a newline
ab9c40f8d Namespaced examples
997b1663d Merge pull request #65 from alecmerdler/ui-samples
ea6542f3d update samples for UI testing
ac04b4e6c WIP namespace samples
2ff886217 Don't install self-hosted in install instructions
41a8d455e Namespace alm
b2c1a9d99 Fix api versions
87799109e Inline instructions
6b52a432b Merge pull request #61 from coreos-inc/subscription-yamls
9052aa31d Merge pull request #64 from coreos-inc/alm-125-opervar
1d1bb393d feat(alm): added in check for requirements
6e1785cf3 Update etcd examples
b86b5cd90 Fix etcd operatorversion sample so that pod starts
ba273ba2f Add sourceType and secretName to CatalogSource
64be21184 Add example resources for Subscription and CatalogSource
3e7e732ef Merge pull request #53 from jzelinskie/refactor-this-shit
f86da09f4 Fix deployment test
3f00cc0a1 Merge pull request #60 from coreos-inc/ericavonb-docs-typo-fix
4a9bd4960 doc(control-loops): fix typo
34c222b07 Rename operator -> queueinformer Add queueinformer registration function
acdf784e3 Rename ControlLoop -> QueueInformer
b71f70bc6 Formatting fixes
30e0ac48e Merge pull request #59 from coreos-inc/dep-fix
658eb0247 attempt to fix dependencies
76b4d377a Merge pull request #56 from coreos-inc/update-control-loops
8ad00acd9 Update control-loops.md
485878039 Update control-loops.md
f4920a914 Add codegen for runtime.Object deepcopy methods
791506992 Factor out common operator functionality into a parent Operator and ControlLoop object
c8e425873 Merge pull request #57 from jzelinskie/glide-k8s
412c04b0e makefile: add -i flag to `go build`
45f9b2ccf Move opver client to its own package
a57c5abf4 Merge pull request #41 from coreos-inc/tested-crds
7dd10d2ba Refactor install strategies
89f9295cc Add testing framework for testing sample resources
957333543 Move opver api registration to apis package, rename alm.go to operator.go remove unused interfaces move apptype type declarations to their own api package
41034b852 init v1alpha package for OperatorVersion
7617fcb74 Merge pull request #55 from jzelinskie/glide-k8s
af1aa02ff Update control-loops.md
210da533d glide: update operator-client
6cd14fc45 Merge pull request #52 from coreos-inc/ALM-124/operatorversion-install
a96d160c5 rename operator -> installstrategies
096a7bdd7 Check for existing managed deployment before installing new one
8d92fe31d Remove vendor from `make build`
36b0c52e5 Update gitlab
0a8faa10c Add hack for GKE plus some formatting fixes
1e9aa3c14 Fix imports
dcb67b95a Add logs on successful install
5fc66483c WIP: can't use unstructured for subtypes
3ae0678e7 WIP: can't use unstructured for subtypes
3958a9bed Register ListKind properly
2cf765eba Add api registration for operatorversion
e56a54f82 Create a new client for watching OperatorVersions
0f49f4d32 Fix watching operatorversions
f35296e14 Fix operatorversion reference
aada1399d Install OperatorVersion and AppType before ALM
17f32044f Fix serviceaccount
43577c7aa Fix merge conflict in operatorversion
3ebf36b29 Don't create ns if already exists
c5fea556f Add CRDs and serviceaccount to helm chart
aac943550 Control loop runs install strategy Also `cmd` will run operator
08e4bb5b7 Merge pull request #51 from coreos-inc/test_ci
26ecc9fe9 Gitlab-ci with jsonnet lib
11047a242 Update helm-chart
f6c336018 Merge pull request #40 from coreos-inc/ericavonb/ALM-111/alm-code-skeleton-operatorversion
ff8f323b5 Add deepcopy methods to `OperatorVersionResource`
cab1ac225 Fix glide.yaml
7dbe9ced3 Add WIP glide
adbb0f239 Merge pull request #50 from coreos-inc/ALM-76/install
234334ccd Merge pull request #49 from coreos-inc/update-vault-example
7cfec9cea Add install strategies
64b4389a8 Update example.vaultservice.yaml
81202b135 Merge pull request #48 from jzelinskie/update-walkthru
bd70740b3 docs: update walkthrough with validated resources
283adf4e3 Merge pull request #47 from coreos-inc/ALM-73/ALM-117/ALM-116/kubectlable-resources
ead0dbe8e Change replaces to a direct resource reference instead of a version
807567382 Add coreosbot credentials
bf1197a89 Vendor before test
3aa9bc9b0 Fix dependencies
5103da1d9 chore(glide.lock): update dependencies
22c729f35 doc(scheme/loader): comment on function not for prod
eae2d9856 style(installers): format imports by type
5aaf1a566 rearrange(installers): organize pkgs better
3da14fb3a feat(schema/loader): add util to load CRD from file
ddb3eb88c feat(operatorinstaller): add initial deployment strategy
ada4e3f6e rearrange(alm/types): remove unnecessary interfaces files
92f453195 Better formatting for outputs
3178246f3 Merge pull request #46 from coreos-inc/add_in_operator_skeleton
74c75b123 feat(alm): adding in basic operator version watch
3e17b5bf9 Add displayName to outputs
f9c0b8590 Move outputs to an annotation and add displayName and description
1901409e2 Add install instructions and make samples kubectlable again
30f1c784f Merge pull request #43 from coreos-inc/add-labels
7f43d7fc3 Change to `alm-owner-`
86fbc3aaf Add labels to propagate in addition to labels to match
71d629f29 Add labels for AppType
a235fa27b Add labels and selectors
3bd6274be Merge pull request #45 from alecmerdler/fix-yamls
a9cbecba0 Update loops
69055ccf1 Remove ALM-managed upgrade option
85285ecaa Fix typo
08cdef7f2 Split loops by piece of software, and add upgrade and GC loop descriptions
6b6f50568 Add explicit creation note to `AppType` loop
2dac16eae Update control loops to match newest design
0ff3b259b Add reconciliation loop docs
9ed79d492 add  field to examples
238ef405e fix apiVersion in samples
64675e0ce Merge pull request #42 from coreos-inc/fix-examples
becf1df62 Fix invalid CRDs and CRs
ec841a262 Merge pull request #39 from jzelinskie/walkthrough
b2a102c68 Merge pull request #31 from coreos-inc/opver-spec
d19cb0b04 Remove blocksInstall from examples
01b0e7c93 Depend on `CRD` not instances of CRD
97dd80ff2 Fix etcdoperator operatorversion
ee302662f Merge pull request #32 from coreos-inc/resolved-resources
cf40e8dad Add UIDs and update apiVersions
0ee4f1754 docs/design: init walkthrough
04f80e6e2 Merge pull request #35 from coreos-inc/ericavonb/ALM-111/alm-code-skeleton-fix-deps
72b7fbbf2 doc(DEVELOPMENT.md): outline glide and make usages
001951b70 Merge pull request #38 from coreos-inc/ericavonb/ALM-111/alm-code-skeleton-k8s-utils
af41f66be style(alm/types): use golang conventional func naming
67dc684b5 fix(vendor): go back to glide for golang dep mgmt
4a15dcb4a Merge pull request #37 from coreos-inc/fix_image_deployment_is_pointing_too
87196f07a fix(.gitlab-ci.yml): pull correct image
5539cc8fd Merge pull request #36 from coreos-inc/fix_image_deployment_is_pointing_too
51a0c7776 fix(values.yaml): moved from quay to coreos
972f0e35c fix almoperatorversion formatting
227146dfd Fix formatting on etcdoperatorversion
8130c7d56 Merge pull request #34 from coreos-inc/fix_deploy_staging
f803740a6 fix(.gitlab-ci): put in sha at wrong place
12d057ae0 Merge pull request #33 from coreos-inc/fix_deploy_staging
afee3cbb2 fix(.gitlab-ci.yml): remove except branches
7d69cee27 Update vault example to use new requirements format
46df9b6a2 Update etcd operatorversion to match spec
45e781f6a Update operatorversion spec and alm.operatorversion.yaml
33adb51dd Merge pull request #26 from coreos-inc/add_in_deploy_staging
223341c30 chore(.gitlab-ci.yml): add in deploy staging
10a1b5305 Add status and ownership to etcd sample
c74b500a9 Move the examples back under their directories
843f2bac9 Merge pull request #30 from coreos-inc/vault-example
f728ebd66 Put `example.` prefix on example CRDs
bf7b87b1c Add vault sample
4df1ebad5 Move etcd samples into their own directory
992dfea5f Merge pull request #28 from jzelinskie/cmd
73b65bc52 Merge pull request #23 from coreos-inc/metrics-and-links
ff4e242f1 Merge pull request #21 from coreos-inc/cluster-features-proposal
32f5e718b cmd/alm: init
0fb977cdc Merge pull request #14 from coreos-inc/ericavonb/ALM-111/alm-code-skeleton
38d8c12fc Fix merge and add important.link capability
8f591b5e7 Add sample etcd cluster instance
95fb64a81 Add sample outputs
c487cdacd Add sample proposal for metrics and links as outputs
ae433aaed Fix rebase issues
a59f67afc Update requirements version
a290f2013 Model RBAC requirements as requirements
b41aacf38 Add example for including cluster features as requirements
a08a1e292 Merge pull request #25 from jzelinskie/move
e367e4ae6 README: init
f6954b8b6 docs: move design work into Documentation directory
881113123 fix(alm): consolidate apptype cr creation
b72a36edc chore(Gopkg.lock): update dependencies for interface tests
64d73613f test(alm/interfaces): add basic unit tests
aefda21d7 feat(alm/interfaces): define alm functionalities in interface
66f0ef6d3 chore(godep): update dependencies
8d2a8b440 feat(alm/types): add type schemas
f3d0a5081 Merge pull request #22 from coreos-inc/ericavonb/ALM-111/alm-code-skeleton-makefile
1d3b884b5 chore(Makefile): set up Makefile for test, builds
0489a95cb Merge pull request #20 from coreos-inc/clean_up_gitlab_ci_yml
e71f65265 fix(.gitlab-ci.yml): stop ci build on master
0c5733eb3 Merge pull request #19 from jzelinskie/dep
55f4fc668 dep: init
d8c9aa0f0 Merge pull request #16 from coreos-inc/add_in_manual_deploy_of_branch
3ad841650 chorse(.gitlab-ci.yml): add in manual deploy of branch
58381352f Merge pull request #15 from coreos-inc/schema-examples
6feb902d1 Add schema examples
8bca8366b Merge pull request #17 from jakedt/oopsv3
6d3d91c9a Switch to the proper JSON field name for the schema https://github.com/kubernetes/kubernetes/commit/6133d84835c59f157a8fb4596f98d2d3cf828bef#diff-3029a18192feb70af52de676209da9b6R149
8e5c40d5b Merge pull request #10 from jakedt/schemata
7ff047487 Make the icon information embedded and more strict
0c285d285 Add schemas for the initial resource types that ALM will manage.
c63b826cd Merge pull request #12 from coreos-inc/add_in_k8_health_check
120a5aff1 chore(deploy): add in health check for k8s
ed8399076 Merge pull request #9 from coreos-inc/add_in_cd
909b43a14 feat(deploy): added in basic helm chart
177086968 Merge pull request #5 from coreos-inc/add_in_gitlab_ci_yml
cc371399b fix(misnamed from): adding in golang
de37d4e61 Merge pull request #4 from coreos-inc/add_in_gitlab_ci_yml
4da6e660a chore(.gitlab-ci.yml): Adding in basics for ci
00841adca Merge pull request #3 from coreos-inc/add_in_gitignore
ae078dd68 chore(.gitignore): Added in a basic gitignore
08a044242 Merge pull request #1 from coreos-inc/mocks
b3aff3451 Add ALM mocks
6bf9e3252 Check in the original propsal README as a straw man.
f58bb3302 reset staging/operator-lifecycle-manager
7c7ae56ea staging/olm: Re-generate test fake package(s)
3cd949ad9 Merge pull request #36 from ankitathomas/operator-registry-sync
827a137b5 correct top level files and vendoring
669c5c606 Merge pull request #35 from benluddy/fix-cpb-target-os-arch
8aeb37773 Merge pull request #608 from ecordell/rm-appr
660b2c3ac Merge pull request #611 from estroz/feature/opm-registry-add-ca-file
559e2dd91 Merge pull request #614 from timflannagan/add-symlink-release-dockerfile
a9961fb4f Dockerfile: Add a symbolically linked release Dockerfile
483c7bb49 Merge pull request #613 from timflannagan/disable-bundle-unpack-tests
ae526bbde test/e2e: Disable the bundle unpack opm e2e tests
3f6dc6c77 opm registry add: add --ca-file to add a PEM to the cert pool used by the command
1d65a0f48 Merge pull request #596 from timflannagan/add-vendor-check
923eb37dc .github,Makefile: Add linting check against Golang packages
39e25f967 *.go: Commit changes after running 'make lint' locally
ee24b336a Merge pull request #607 from joelanford/go-1.16
357ec4b69 remove appregistry-related tooling
6307e6e44 Merge pull request #598 from timflannagan/fix-test-log
6398cb3a0 bump to Go 1.16
673a1f8c6 Merge pull request #606 from openshift-bot/art-consistency-openshift-4.8-operator-registry
67a052d30 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/e3b61ff1dde2bfc2bc7f2b5efdd155d1d3299cd7/images/operator-registry.yml
5448405d8 Merge pull request #604 from joelanford/go-1-15
f4de6eaed Remove package msodbcsql17 during e2e tests
ff1059e92 Bump all Go binary builds to 1.15
36a5f36f6 Merge pull request #587 from cdjohnson/patch-1
3140e034a Merge branch 'master' into patch-1
ff518a977 test/e2e: Capture stderr output when checking for docker and podman
8dae74b2f Merge pull request #594 from timflannagan/update-readme
631d37538 test/e2e: Fix output log message when Podman is not found
b88086999 Merge pull request #590 from timflannagan/update-vendoring
8c3495efb Merge pull request #591 from timflannagan/deflate-populate-helper-function
735241176 Merge pull request #593 from timflannagan/update-owners
10853edb9 README: Address markdown violations
73bf73d5d OWNERS: Update the owner file
1bc5b8cee cmd,pkg: Deflate unnecessary conditionals
2ab0e1b22 go.*,vendor: Update vendorered dependencies
54ff6e026 Makefile: Add the tidy and verify subcommands to the vendor target
42f681381 Merge pull request #588 from timflannagan/fix-ci
e7485d115 Merge branch 'master' into patch-1
8fb17ef5f test/e2e: Revert disable Podman-related e2e tests
3318a59c7 .github: Fix Podman installation steps
9bae995c8 Merge pull request #418 from njhale/unpack-cmd
2dda35f38 Merge pull request #565 from camilamacedo86/go
65cf65dc9 test(e2e): add bundle unpack test cases
e2651a62d chore(lib): reduce log noise from image registry test facet
c1b89418a refactor(opm): export root cmd
08e7e4b6c style(logs): reduce info log noise
5d8cf07ba feat(opm): add alpha bundle unpack command
044c5b39c Merge pull request #557 from operator-framework/start-server-readme
028edac2d Merge pull request #564 from camilamacedo86/readme
cfe3d519e Deprecate initializer and registry-server
2898223a3 Merge pull request #585 from exdx/fix/apt-get-upgrade
c347a339f fix: add apt-get-upgrade to ci script, skip podman-based tests until fix is identified
c29c64eb9 doc: clarifies opm usage and what tool can help with bundles
cad166898 Merge pull request #570 from rphillips/fixes/closes
88d9086f0 Merge pull request #576 from openshift-bot/art-consistency-openshift-4.8-operator-registry
909c9587f Merge pull request #546 from timflannagan/minor-doc-fixes
20f3cecf1 Merge pull request #580 from bparees/typo
68a1f2286 Fix typo in deprecate+truncate command help
16df98322 Merge pull request #579 from timflannagan/fix-e2e-tests
7c25ac277 .github: Use the pre-installed Podman dependency
43ec5dbe2 docs/design: Remove all references to the bundle alpha opm commands
e22c9b4cb docs/design: Minor documentation fixes
89009c166 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/a74468426e8d0524b2fca64bbbcda77afef25b80/images/operator-registry.yml
a99d4dd69 Merge pull request #558 from ecordell/fix-upstream-example
59d29faef Merge pull request #559 from bentito/opm_doc_add_v1.15.3_idx_add
42bdf021f Merge pull request #571 from njhale/feat/no-sort
6cd5cf762 fix(index): add build id ordering to channel head selection
472eceda0 test(e2e): make index add regression test pluggable
549f2f540 (e2e) regression check with existing catalogs
75743c103 add missing closes
68da77d74 Merge pull request #572 from exdx/fix/test-minikube-driver
f21d1d8c0 fix: use none driver without sudo in upstream minikube e2e tests
7b1ba928b Various from PR comments
60dca8c0e Merge pull request #552 from exdx/feat/e2e-registry
70f687c62 feat: use secure local registry for e2e tests
86eb95ad7 upgrade to use go 1.15
a6bd08670 Merge pull request #556 from ecordell/fix-prune
909c33e06 Fix upstream example dockerfile
a9d60bb7b Add details for starting a local server to README
4ad4383b9 remove stranded bundles when packages are pruned
29f0e43a3 ensure foreign keys are always enabled
94eb6b533 Merge pull request #548 from exdx/fix/kind-ci
34f20180b fix: load required docker images for kind cluster in ci e2e test
3c9314a2f Merge pull request #541 from multi-arch/master
4a98d6e87 Updating Dockerfile baseimages to match ocp-build-data config
eb972be40 Fix windows build with golang 1.15
693a3c359 Merge pull request #537 from awgreene/bump-k8s-1.20
807704d66 Bump k8s to 1.20
bb3f14444 Merge pull request #536 from exdx/feat/github-actions
bbc22b808 feat: move upstream tests from travisCI
6ce54b83f Merge pull request #531 from benluddy/downstream-image-size
732c7eac8 Avoid duplicate registry binaries across downstream image layers.
8c2030987 Merge pull request #530 from benluddy/disable-broken-builds
3817ecce7 Disable broken ppc64le and s390x release builds.
c3613a00b Merge pull request #528 from njhale/fix-default-chan
977e7cbe0 Merge pull request #527 from benluddy/bundle-image-in-related-images
e78e3c468 fix(index): account for default channel in index add order
b08b7dfcf Include the bundle image itself as a related image.
d967a502f Merge pull request #495 from exdx/feat/custom-validation-categories
df5d89927 feat: bump api dep to v0.3.22; add support for operatorhub and bundle object validation
86cdd0293 Merge pull request #523 from njhale/fix-permissive
8177b464a fix(indexing): respect strict mode
ec3ce9568 Merge pull request #509 from ankitathomas/dockerfile-version
5af74c792 Merge pull request #503 from njhale/fix-bulk-add
d44e03791 Merge pull request #480 from dongwenjuan/master
6b0737fdf Merge pull request #432 from Jamstah/AddConsoleYamlSamples
59c5eaadd Merge pull request #516 from openshift-bot/art-consistency-openshift-4.7-operator-registry
82b84c156 fix(indexing): pick channel heads by semver
2abd6fb2a fix(indexing): order bulk add by version field
033f76244 Merge pull request #512 from benluddy/listbundles-multiple-incoming-edges
721acf93b Merge pull request #505 from ankitathomas/skippatch-fix
2bd47a1b6 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/f82a216a6a3707b80a635bace9367f1a8288b7a7/images/operator-registry.yml
83e1d90c3 Merge pull request #515 from awgreene/bump-k8s
400ecd04a Bump k8s dependencies to v0.19.3
cfd127a18 copy .git directory for build tag info
dc554f210 add skippatch unit test
3123bca81 Reconstruct replaces and skips for ListBundles from channel_entry.
012815148 Merge pull request #508 from benluddy/fix-go-114
abe2f1304 Fix Go version used by release job to 1.14.z.
d9e282012 Merge pull request #506 from gallettilance/db-lock-fix
ba0c22659 (fix) close connection to db
57c0a0443 Merge pull request #501 from benluddy/upstream-release-go-114
1bde7883c Build upstream releases with Go 1.14 instead of 1.15.
dc4dfeaf6 Merge pull request #500 from benluddy/release-ppc64le-s390x
0f6d85bd1 Produce opm linux release binaries for ppc64le and s390x.
c562082e6 Merge pull request #496 from benluddy/release-workflow
092245646 Add Github Actions release workflow.
fadb6197c Merge pull request #494 from benluddy/server-test-populate-fixtures-before-start
d6515e28f Merge pull request #493 from benluddy/cruft-file
2a6b56289 Merge pull request #490 from benluddy/coverage-report
d1514e4a7 Merge pull request #483 from benluddy/listbundles-channel-entry-replacement
dfcd0af2c Completely populate test database before executing tests.
66f559cfd Remove unused file.
480a3673f Set replaces in ListBundles query result using channel entries.
8ba0620c9 Merge pull request #491 from benluddy/grpc-server-flakes
2de9582a8 Start listening on test server port before running tests.
92e7566d0 Add coverage report job.
dc637b882 Merge pull request #486 from ankitathomas/skippatch-fix
7835fff66 Merge pull request #485 from njhale/alias-p
d9980c427 check prerelease version for semver-skippatch mode
a4966be2b fix(opm): properly deprecate export flag '-o'
c4e99ebd3 Merge pull request #481 from benluddy/generated-dockerfile-windows-paths
605a4d8a1 Fix path separator in generated bundle Dockerfiles on Windows.
0f63cc756 fix the description of validation "RegistryV1" format
70ff6f43a Merge pull request #475 from benluddy/configmap-image-workdir
86daa8928 Merge pull request #477 from benluddy/flaky-aggregate-error-test
7e7d38f45 Fix test flake based on random aggregate error order.
74cf2adee Add writable workdir to configmap registry image.
b3dc8e709 Merge pull request #474 from benluddy/scratch-nsswitch
b29563395 Make the inability to create /etc/nsswitch.conf non-fatal.
8f8bb658d Merge pull request #464 from gallettilance/fix-race-condition
29794a47d Merge pull request #461 from ecordell/clean-tmp
bff991361 Merge pull request #290 from jianzhangbjz/help
99df95427 Merge pull request #425 from kramvan1/patch-1
b6a3567a3 Merge pull request #454 from dongwenjuan/master
0653a7f3b Merge pull request #469 from estroz/chore/sdk-owners
ceca05190 OWNERS: add operator-sdk reviewers estroz, joelanford, jmrodri
ca959c234 Merge pull request #465 from dinhxuanvu/semver-default
83cef31f1 Enable default channel inference for the first bundle of the package
a3be6469e Merge pull request #466 from operator-framework/ecordell-patch-1
ca1ec0333 Update upstream-builder.Dockerfile
8b94dcd8c set group permissions on /tmp
467ceb9d2 (fix) concurrent writes during image pulls
c03b8bca5 fix(dockerfile): clean out tmp directory after binaries are placed
e0ec3a665 Merge pull request #459 from dinhxuanvu/defaulchan-val
79492e087 Bundle validation will not fail if default channel is not provided
0e583eecd Merge pull request #458 from gallettilance/fix-inference
1f48ea073 (fix) bundle inference should not use skiprange
9f533519b Merge pull request #451 from dinhxuanvu/default-chan
2048435cd Merge pull request #455 from gallettilance/fix-add
92d1a2318 (fix) erroring when replacement not found
d4ab2fad5 Update index add func to handle optional default channel
7824b0b6f fix the comments of LabelDependency in the type definition
5a9d631aa Merge pull request #448 from gallettilance/force-bundle
cd852bfc5 (fix) index add --overwrite-latest
62416afbc The default channel info/annotation is optional & not required
f5ab349f6 Merge pull request #416 from shawn-hurley/add-empty-list
bf8ea5c89 Merge pull request #446 from openshift-bot/updating-dockerfile-baseimages-to-mach-ocp-build-data-config
62ced6cf6 update the help info of the export subcommand
a038b83f9 Merge pull request #429 from harishsurf/parallelize-export
076241e92 Updating Dockerfile baseimages to mach ocp-build-data config
80e61b0a3 Merge pull request #439 from benluddy/upstream-image-multistage
0714d171e Merge pull request #443 from ecordell/readd-cross
809107b8e add cross build back
4a27170c2 Merge pull request #442 from ecordell/tmp-rm-cross
f281238bf disable cross compilation while build issues are resolved
e13b6ac80 Use vanilla Alpine instead of Alpine+go for the registry image base.
1277aee10 Use multi-stage build for registry image.
e0ca6f74a Parallelize opm index export
22aa19a48 Merge pull request #437 from ecordell/fix-workdir
b31b0463d fix(build): copy bins to a tmp directory first
66f2ab5d1 add workdir permissions back
2931c1faf Merge pull request #435 from ecordell/fix-bin
c479f22a2 fix(bin): don't overwrite /bin
12b741255 Merge pull request #430 from ecordell/macwin
6209da7d3 Add ConsoleYamlSamples to the supported resources
51732abac add mac and windows binaries to the amd64 build
36d4ae3da Merge pull request #421 from gallettilance/add-deprecated
82102ef36 [typo] fixing typo in deprecatetruncate command
2e0d0d22f Merge pull request #427 from operator-framework/add-haseeb-to-OWNERS
5661e2a12 Update OWNERS
4f2b54039 Update OWNERS
4e6392f70 Merge pull request #426 from openshift-bot/updating-dockerfile-baseimages-to-mach-ocp-build-data-config
ca574edfb Updating Dockerfile baseimages to mach ocp-build-data config
091b76d56 Add USER for non-root image usage
02dfed2d4 Merge pull request #402 from ankitathomas/skiptls
31be09d14 Merge pull request #422 from bandrade/fix-doc-semver-range-example
caf034e45 fix: add dashes to semver range example
c7e25eed1 Merge pull request #419 from akram/patch-2
5a82f1569 set default for flag --skip-tls=false
37efbea43 Merge pull request #420 from benluddy/undocument-label
67331c5ea Merge pull request #417 from benluddy/listbundles-zero-dependencies-properties
ea30dcd9f Remove label dependency from bundle docs.
4e892fc41 Fix typos
44c6435a0 Return empty properties and dependencies in ListBundles responses.
a928124bb Add test to verify empty bundles in addition does not break
4475a62bd extend skipTLS option to podman
d06c41526 skip TLS option for pulling indexes
ce66a306d Merge pull request #413 from kevinrizza/cleanup-command
4927fe1bb Bug Clean up stranded bundles
23af6a15d Merge pull request #411 from operator-framework/kevinrizza-patch-2
437b9c82c Merge pull request #404 from ecordell/graceful
c3f74412b [docs] Update out of date compile step
eb88036c5 Merge pull request #410 from ecordell/listbundles-broken
b5c513244 fix(query): return bundles in all channels
7b935c8d7 Merge pull request #370 from Jobava/timeout
17e7b5c5b Merge pull request #406 from dinhxuanvu/add-label-type
2233f313c Update label property extraction from CSV
6f22b37f5 feat(registry): Add label dependency constraint and property
1c65e3611 Merge pull request #397 from gallettilance/deprecate-bundles
d99911274 Merge pull request #408 from dinhxuanvu/remove-defaultchan-validation
cf9c51d93 fix(validation): Remove default channel validation from bundle lib
13acba6d9 Adding deprecated property type to bundles
b654090f8 Merge pull request #405 from ecordell/fix-prop-listbundle
fb75b6ca0 fix(query): list bundles would elide all but one property
bf0be224d feat(registry): add graceful shutdown to grpc server
4f4102b47 Merge pull request #399 from ecordell/static
57ef54480 fix(e2e): pass build tags to e2e
94bd0cf6b fix(dockerfile): remove unneeded static dependencies
8f78d681e Merge pull request #394 from multi-arch/master
da8df3a9e Remove nonexistent group from Dockerfile
829bf2e66 Merge pull request #393 from benluddy/version-from-tag
4e87d20cf Embed version at link time based on git tags instead of a file.
50e2ae30b Merge pull request #391 from benluddy/get-package-client
3c65685ff Merge pull request #392 from operator-framework/kevinrizza-patch-1
c2c0574a7 Update OPM_VERSION
9e47bd0b3 Add GetPackage to the client interface.
9fb26eb48 Merge pull request #384 from gallettilance/check-before-insert
460123922 Updating based on feedback
91224f615 Merge pull request #390 from njhale/fix-validate
4021942ee Merge pull request #388 from Jamstah/s390x-env-fix
1e196700c fixing up to return exit codes
c8da54d39 fix(containerd): always [also] pull layers from linux/amd64
3f8656b55 fix(validate): pull bundle images before unpacking
2e3df21a4 Use go env to get architecture for building
d83bc1d42 Remove sanity check from `make all`
70ae404c3 Merge pull request #382 from ecordell/s390x
fe2bcd80f fix(build): don't set -race when testing on s390x
c4ebb4b61 Merge pull request #381 from ecordell/replace-skips-listbundles
a7dfb043c feat(api): add skips/replaces to listbundles api
03a5e3343 Adding sanity check and error message for inserting the same bundle
e9bcdcc11 Updating: adding sanity checks before insert into index
922bcf4a0 Merge pull request #380 from estroz/chore/add-annotations-json-tags
1160ce889 pkg/lib/bundle/generate.go: add JSON tag to AnnotationMetadata
6eb5e9dc0 Merge pull request #379 from Jamstah/patch-1
d9e3aba11 Merge pull request #378 from operator-framework/arch
4489dbbff Merge pull request #300 from ecordell/refactor-indexer
f1bb81504 Merge pull request #361 from Jamstah/cp-dir
c63c9d0ec Merge pull request #363 from ecordell/generic-props
77f795e59 Bump GRPC version
ba0313684 feat(release): add builds for s390x and ppc64le
35a47a4d4 fix(opm): refactor indexer
454b702b9 feat(deps): nest dependency values
9d88ef4a7 Merge pull request #377 from njhale/vendor-grpc
4d850e57e feat(store): store provided apis and package info as generic properties
3fccb235d Merge pull request #375 from operator-framework/1.12.7-version-bump
ee8997d1e Merge pull request #374 from kevinrizza/separate-rm
a913943f8 Merge pull request #346 from exdx/feat/add-gardener-objects
7f9fc5ef2 chore(modules): update vendored deps
574eff086 fix(docker): build grpc probe outside of gopath
b5860c7e8 Update OPM_VERSION
9eb4fe709 Add sanity test for opm registry serve
d2187785c Add timeout to opm serve
d3651599b Separate build/pull tool for index rm
15092bb8d Merge pull request #373 from kevinrizza/go-1.14
5c9e80ef5 (fix) Update to go 1.14
4eea45df5 Merge pull request #372 from operator-framework/1.12.6
547be0859 Merge pull request #371 from ecordell/403fix
4b4094843 Update OPM version to 1.12.6
7ca5b1d28 chore(deps): bump containerd
52c605e30 Merge pull request #270 from dinhxuanvu/bz-component
9e79ddbba Merge pull request #119 from ecordell/fix-test-flake
1b88b94da Merge pull request #360 from Jamstah/pull-template-broken-link
990cd1095 Use /. as the directory root to copy from.
ee21f88d0 Fix broken link to CONTRIBUTING.md
9fbe617e6 Merge pull request #358 from estroz/bugfix/annotation-compare-validation
99717e015 pkg/lib/bundle/generate.go: ValidateAnnotations does not compare number of annotations in existing vs expected so arbitrary annotations can be added to annotations.yaml
3ba5b6ff8 Merge pull request #353 from ecordell/tmpdir
c3bedd910 fix(copy): make tmpdir relative to current directory
453c23114 Merge pull request #351 from njhale/fix-unpack
566a79cd5 fix(images): use docker/podman create and cp for exec unpacking
b3cb795e8 Merge pull request #350 from operator-framework/kevinrizza-update-owners
15d753d8e Merge pull request #349 from estroz/bugfix/bump-api-version
5a79c33ea Update OWNERS
7b1c617c3 The api repo is now pinned to the latest commit which contains bugfix https://github.com/operator-framework/api/pull/39. This update also removes the bou.ke/monkey dependency that has a very restrictive license.
6907c1b19 Merge pull request #210 from multi-arch/master
cf50e86ba Merge pull request #347 from anik120/fix-opm-test
e55ef70ab [e2e] Fix opm test
1c609e7d1 feat: add pdb, vpa, and priorityclass object support to registry
aac52ee04 Merge pull request #296 from camilamacedo86/add-info-bundle-files-gen
23803afdb Merge pull request #319 from beautytiger/fix/nil_check_before_defer
cf3061ca5 Merge pull request #333 from kpiwko/patch-1
42a4d3f9b Merge pull request #335 from bandrade/fix_bundle_doc
4986d43ad add info over where the bundle files are or will be written
3dcc91a1f Merge pull request #341 from exdx/feat/add-release-doc
82953e6e3 feat: add OPM_VERSION notes to release docs
bb9cbaff0 Merge pull request #340 from ecordell/ro
afdf9e442 fix(unpack): support unpacking readonly folders
c3a9acaf0 Merge pull request #337 from benluddy/podman-index-docker-format
cbcb220da Merge pull request #338 from kevinrizza/bug-1835884
6896dbd8d Configure "podman build" to produce images with Docker manifests.
de8db4d45 opm bundle extract shouldn't validate annotations
efe955d6a Merge pull request #332 from ecordell/opm-server
d9bc32851 Merge pull request #334 from dinhxuanvu/fix-unstructured
3790d9de4 fix(server): make a copy of the db before migrating it
a2e8354a5 docs: remove typo from dependencies example
bb3445833 fix(validation): Fix CRD v1beta int-float conversion error
d2a3a95c5 chore: fixed a typo in bundle manifest format
3582f1cd2 Merge pull request #320 from joelanford/dynamic-upstream-olm-builder
a71b8afe4 upstream-opm-builder.Dockerfile: don't install bash; sh is sufficient
c48e67749 Merge pull request #321 from exdx/fix/update-opm-buildflags
110a4dedc Merge pull request #324 from Bowenislandsong/bug/understandsingBundles1827723
2752dba53 Adding error message for more than one CSV in bundle dir
efb4d5323 feat: add build flags to opm to show version information
225ad1155 Merge pull request #306 from djzager/version
80878b5b9 Merge pull request #318 from Bowenislandsong/bug/understandsingBundles1827723
a2f721b94 Make default channel optional
a9b107b2a Make default channel optional
e73a50a28 Merge pull request #316 from ecordell/containerd-authorizer
a82af2d0e Merge pull request #295 from exdx/feat/support-v1-crds-in-index
5d15c662a fix: add err check before defer
f14e6d543 Move bundle validator back to registry under validation package
44ca66553 fix: use runtime.Object instead of interface for CRD return type
b7b281be7 Merge pull request #314 from kevinrizza/index-generate-dameonless
7b08c9e45 fix(auth): use fixed containerd authorizer
57c46da8e Split build and push command runners
46d9cbfba (bug) Always overwrite local db when copying
ec16c49cb upstream-opm-builder.Dockerfile: add bash and ca-certificates to runtime index image
18f74c7c1 Merge pull request #312 from benluddy/deps-not-found-optional
8852286a2 Clarify log message to indicate that dependencies.yaml is optional.
e3a7f4e9e feat: add test for v1 CRDs in registry bundle
16a388a86 feat: Enable v1 CRD validation in bundle library
c6c8d8123 feat: support loading v1 CRDs into index from a bundle
41d933e9f feat(opm): add version command
1616423d2 Merge pull request #289 from dinhxuanvu/fix-dep-types
d13cc864d fix(types): Fix GetDependencies func that returns duplicate items
9b7365d85 Merge pull request #243 from djzager/filtercmd
a6f3b3344 Merge pull request #299 from kevinrizza/bug-1820438
7998e2115 (fix) Use opm builder image for opm indexes
b0b2270c4 Merge pull request #298 from kevinrizza/bug-1820438
378699c46 Bug 1820438: Slim down upstream builder
e3d6a223b feature: opm (index|registry) prune command
f028701f9 Merge pull request #283 from ecordell/index-separate-dirs
d0615a8b2 Merge pull request #277 from dinhxuanvu/opm-dep
65fed64c2 Address the metadata read files loop to work regardless files order
8355a08d3 Add unit test cases
63e952637 Add Validate() for each dependency type
8aa3d3a63 Add dependencies validation
8572f569e Add dependencies.yaml validation to opm
e00cf4182 Merge pull request #285 from kevinrizza/bundle-add-commutativity
61b200175 feat(opm): add unprivileged index extract
181ea3a2c (feat): Bundle commutativity
2662ffbf8 fix(indexcmd): use a separate directory for unpacking a previous index
b7641c508 Merge pull request #284 from benluddy/fix-podman-panic
b701022ba Fix panic in AddToRegistry when using podman.
df99b2ccf Merge pull request #281 from ecordell/fix-docker-add
c17db7979 fix(index-add): docker index add failing
95585c745 Merge pull request #280 from dinhxuanvu/dep-registry-comb
bcef6fddd Add ListBundles to the client interface.
191a85e47 fix(query): ListBundles returns all bundles even without dependencies
7f19d5f13 fix(registry) Update the addDependencies to add requiredAPIs
55fa9c787 Merge pull request #279 from ecordell/demonless-index-cmds
8541af595 fix(add): allow containertool to be specified for registry add
4807c9a1d Merge pull request #244 from djzager/indexadd
ed32d7a12 Merge pull request #254 from dinhxuanvu/dep-yaml
e501f66c8 Address feedbacks (second round)
aa3432879 bug(opm): use db dir when modifying existing index
30bc8aa25 Add BugZilla component to OWNERS file
95fede4af Address feedbacks and fix test cases
09d650c2a Merge pull request #265 from ecordell/fix-channel-heads
eb11ce644 fix(load): shouldn't clear bundle/csv field from non-default heads
06e7733f5 Codegen for registry API changes
0024d5cfb Merge pull request #262 from njhale/docker-login
00af1da53 Add bundle dependencies specification documentation
41f1c55e8 feat(registry): Add operator version dependency metadata
9b65effe4 test(e2e): login w/ docker first to prevent failures
b82634749 Merge pull request #256 from exdx/feat/add-bundle-objects
a4467d99c Merge pull request #251 from djzager/registryrm
1d855e13b Merge pull request #260 from ecordell/fix-imgload
e3a98c3d3 fix(imageloader): image loader should consider existing channels when adding to an index
f01d6ddcd Merge pull request #247 from kevinrizza/semver-mode
8db3160ee (feat) Add semver insert mode
1f9153736 feat: add support for configmap and secret objects when generating a bundle
27d4e6e44 Merge pull request #246 from ecordell/k18
c65e46b34 chore(deps): bump to kube 1.18
371e1406b Merge pull request #253 from operator-framework/add-conntrack
8674af077 chore(travis): add conntrack package
56f5b0e4c bug(opm): packages flag on registry rm required
36b92b67f Merge pull request #248 from njhale/fix-panic
55fe6819d fix(populator): set bundle name
a1573df44 fix(populator): put correct argument in decode call
1e32c8581 Merge pull request #213 from njhale/daemonless
393f32379 refactor(populator): ensure file descriptors are closed
9b456bc5c chore(modules): update vendor directory
f048fc0e6 refactor(image): add image reference interface
5d26cce45 feat(deamonless): add buildah-based deamonless image puller
9e88099f3 docs(opm): add self-contained container-tools section
1af9bf96f feat(opm): add unprivileged registry add
19a8c1890 Merge pull request #242 from dongwenjuan/master
9762ed555 Merge pull request #236 from ecordell/fix-add-err
d838b9a47 Merge pull request #241 from Bowenislandsong/understand-packages
177fef741 [feature] Understanding packages from directory
16f389279 test(migrations): add tests for api provider and requires migrations
5b102d2a6 fix(load): add synthetic nodes in every channel that a replacement is in
a48b4c6fe feat(bundle): extract replaces/skips data on load
8ac8863ca fix the `validate` command in the docs
37eb42d99 Merge pull request #227 from ecordell/nsswitch
5902db2c5 Merge pull request #237 from estroz/bugfix/manifest-copy
9e5cd742f refactor(db): remove denormalization that associated provided and required apis with channel entries, rather than bundles.
04a8234ec Merge pull request #234 from Bowenislandsong/fixtests
768692da1 [travis] pinning minikube version
3e2816947 Merge pull request #239 from operator-framework/revert-229-understand-packages
4f35231af Revert "[feature] Understanding packages from directory"
29df24750 [dockerfile] removing dev directory permission change
3be8cbf3f pkg/lib/bundle: fix copyManifestDir so it actually copies file contents
fff4eefbc Merge pull request #229 from Bowenislandsong/understand-packages
44ee96d39 [feature] Understanding packages from directory
cc093ebfe fix(dns): fix slow dns resolution of localhost for grpc health probe
ad7470387 Merge pull request #224 from kevinrizza/graph-loader
b712cbbc0 Update graphFromEntries to be a private function
3542b5484 use query interface in sql graph loader
843ec70a0 address pr feedback
3dc50c479 Update graph format for runtime concerns
4ed3d3db7 Graph Loader initial implementation
81a48979f Merge pull request #196 from operator-framework/opm-test
5bb2104be Add opm E2E test.
994ab606f Merge pull request #212 from anik120/bump-k8s-version
66f6f5efb chore(deps): Bump to kube 1.17
262153399 Update grpc-health-probe version
44dacd0bf Merge pull request #209 from kevinrizza/opm-bundle-generate-dir-structure
5b73e0c91 Generalize manifest copy
b583b6fcb Merge pull request #193 from ecordell/adrian555-master
b57e48c37 Merge pull request #164 from dinhxuanvu/update-owners
e737486be Merge pull request #206 from kevinrizza/opm-bundle-generate-dir-structure
db0661a28 Match bundle image directory structure
7a06d84c3 update go.mod to remove unneeded license dependency
72c38400c Merge pull request #198 from Bowenislandsong/resolvingCycDependency
ac4ee7eaa Removing olm dependency
dd02edcfb Merge pull request #197 from njhale/fix-dockerfile-gen
f3796dfb0 fix(index): gen index dockerfiles from opm image
d1f8f4958 Merge pull request #194 from Bowenislandsong/stalebot
3af90d238 Merge pull request #195 from njhale/fix-meta-prune
538352136 test(meta-pruning): ensure pathless nodes keep data
2683308c8 Add stale bot
1f1a704a0 Merge pull request #189 from benluddy/sorry-amd64
25a9e5332 Produce binaries without target platform prefixes by default.
87718aab2 Merge pull request #186 from ecordell/rm-rf-helm
d097f9a4d chore(deps): remove helm as a dependency
702ab31fe Merge pull request #183 from ecordell/opreg-entrypoint
38e875be6 fix(docker): add entrypoint
f6df4f430 Merge pull request #173 from njhale/fix-opm-cp
2aa7ca414 Merge pull request #172 from dinhxuanvu/bundle-docs-update
640075070 Merge pull request #167 from benluddy/delete-sqlite-junk
1746ac0aa fix(index): copy correct opm bin builder path
0463ddcad Update operator-bundle to clarify the bundle format directories
6f049490b Merge pull request #148 from ecordell/failfast-builder
4a8424920 feat(appr): exit build early if no manifests were downloaded
f6db5f3ed Delete junk SQLite journal files.
8702bface Merge pull request #166 from dinhxuanvu/validate-bundle-test-2
6f1ce0f43 Add validate bundle test cases
15d92f2d5 Merge pull request #161 from benluddy/remove-sqlite-dep-from-configmap
2669b49c6 Update operator-registry OWNERS file
11c61f83f Merge pull request #163 from gallettilance/export-bug-fix
ca1603789 Fixing wrong database loaded in memory for export cmd
414d8b637 Merge pull request #162 from operator-framework/revert-160-static-ci
5998143c4 Revert "fix(ci): build opm statically in CI"
594ba2e20 Merge pull request #154 from gallettilance/index-to-appreg
5c08cdb24 Remove dependency on sqlite from pkg/configmap.
8d4cc3b79 Adding ability to export package from index
c97191ab1 Merge pull request #160 from ecordell/static-ci
ea6a48f80 fix(ci): build opm statically in CI
c9e2f548e Merge pull request #149 from kevinrizza/opm-docs
185b4a8c7 Merge pull request #153 from simrandhaliw/patch-1
9622e938b Merge pull request #141 from gbenhaim/add_support_for_choosing_a_version
9fe0a1ace Merge pull request #158 from operator-framework/mkrelease
5fa39be6c chore(release): use robot for deploys
d760749f3 Bug 1784028: Updating summary for 'Operator Registry ' containers
759dd0b18 Merge pull request #156 from dinhxuanvu/fix/docker-error-output
fe3c7d07d Fix issue with empty docker error output
bae1e9ad6 Merge pull request #155 from ecordell/bins
fd4ded680 chore(release): add a travis.yml to build and release opm
c7fc4dc57 Merge pull request #146 from exdx/feat/validate-bundle-files
07496ed07 Address feedbacks from comments/reviews
4444617ad Update README.md
80f7dd11d Add support for choosing the package's release
c1f18051e Update docs to reflect index/bundle image changes
bb10148e4 Refactor bundle validation code to seperate format and contend validation
618c93e38 Add validate bundle contents
56d0ebd99 Merge pull request #139 from gbenhaim/make_downloader_testable
27c2ca979 Merge pull request #147 from ecordell/fix-build
43cb58a95 fix(build): grpc-health-probe was not building properly in 1.13
2c6a866f3 Make downloader.go testable
163605a1d Merge pull request #145 from njhale/load-csv-name
5d8d1f968 fix(bundle): set csv name field on configmap loading
117fde9d0 Merge pull request #143 from kevinrizza/bundle-validate
24edbb8e4 Vendor helm library to enable helm chart validation
c746b8219 Fix a few minor issues
2654fe103 Update bundle validation lib for sdk consumption
5de9853d7 add tests
f6b5f0797 Add bundle image validation feature to bundle library and bundle cli
b93aee167 Merge pull request #63 from tmckayus/replacecircuit
d68a99b4b Merge pull request #135 from vincent-pli/tiny-typo
3c68d0ca6 Merge pull request #137 from jpeeler/switch-bundle
713a21faa Merge pull request #144 from jpeeler/add-cp
6c5d3d004 add cp to configmap-registry image
fd50b98ac Merge pull request #142 from operator-framework/opm-to-configmap
19d0971af Add opm to configmap-registry image
d62d52a4c Merge pull request #140 from njhale/index-docs
1f109438f chore(modules): update vendor
6ea1b04cd refactor(opm): add examples to index add subcommand
7223d41d6 fix(configmap): remove packagemanifest parsing
e92c3c15a chore(makefile): add selective unit test execution
0657f62c1 Fix tiny typo
09d7e1c1b Merge pull request #130 from njhale/fix-ignored-cachedir
e8805a66b chore(mocks): use new counterfeiter directives
23777e0a3 fix(appr): use given cache dir for image builds
9ebe14ad0 Merge pull request #129 from anik120/bug-rearrange-dir
4389019fa Bug 1774630: relocate test data
d0cde7e52 Merge pull request #128 from anik120/bug-fix-incorrect-bundledata-panic
92bc45361 Bug 1774630: Fix panic caused by incorrect bundle data
4998a0e7f Merge pull request #125 from anik120/opm-bundle-extract-bug
7b3da5830 Bug 1771850: Error logging for opm alpha bundle extract command
97a63dc5e vendor in github.com/pkg/errors
abc8771ee Merge pull request #127 from dinhxuanvu/bundle-build-fix-2
a60ea60c9 Detect replacement cycles while adding package channels
feefcd953 Clarify the directory requirement in docs and help menu
96a395048 Ensure provided directory has at least one yaml manifest file
0233cfc8f Merge pull request #124 from dinhxuanvu/bundle-build-fix
4133a9d0a Merge pull request #126 from jpeeler/update-ginkgo-test
ae6601658 Add directory check to ensure the directory exists
215d838e2 fix(e2e): update ginkgo configmap test
eb9a1ebe4 Fix bundle build command with Docker and update documentation
d78058642 Merge pull request #122 from gallettilance/bundle-table-insert
d9a6dc84d [bug] - add version and skiprange to operatorbundle table
47f48e5c7 Merge pull request #121 from kevinrizza/fix-docker-image-unpack
80164bf87 Make imagereader work for all layer paths
a37bc867c Merge pull request #118 from ecordell/fix-upstream-configmap
3bedcfebe test(server): wait for connection to go healthy before running tests
6221359f7 fix(configmap): bump base image for configmap registry image
abb24c012 Merge pull request #106 from kevinrizza/index-command
12b62c11f Add `opm index` commands
2fb07b855 Merge pull request #113 from ecordell/rest-of-it
214fca47e fix(mirror): canonicalize names before swapping domain
c0a1e66c7 feat(api): return version and skiprange in bundle
380d944c4 Merge pull request #89 from gallettilance/operator-registry-cli
5e4ed7104 Merge pull request #115 from ecordell/fix-to-option
669be0cd3 [opm] - Add registry add and rm bundle commands
596134f3c fix(builder): Add AppRegistry org to `ToOption`
cbda71412 Merge pull request #114 from jpeeler/fix-launch-bundle-image
4a41a4273 fix(configmap): make launch bundle work
c62af6239 Merge pull request #112 from ecordell/api-bundle-client
f5bd7b31b feat(client): return api bundles in client
cf19596a5 Merge pull request #111 from ecordell/required-apis
1fff59226 feat(sql): extract required apis when loading
143bee961 Merge pull request #110 from jpeeler/add-opm-binary-into-container
4f5fca9f9 feat(imagebuild): add opm binary to registry image build
1c48ed8f4 Merge pull request #109 from dinhxuanvu/bundle-order-fix
4b97e6fe6 Merge pull request #105 from ecordell/opm-catalog
498228060 Merge pull request #92 from tkashem/configmap-bundle
4a7e3c320 Merge pull request #108 from dinhxuanvu/mac-gitignore
f403531ee Merge pull request #107 from dinhxuanvu/fix-bundle-dockerfile
1ecae6b15 Merge pull request #94 from jpeeler/expose-bundle-data
801d2e396 test(mirror): add tests for mirroring
1b6105ec6 feat(opm): add registry mirror command to mirror the contents of a catalog
0d0f4201e fix(bundle): Fix the build paramater order mix-up
bee08a723 fix(bundle): Fix manifest directory issue in generated Dockerfile
12b622668 Update registry gitignore to be consistent with OLM
9de195760 feat(opm): add registry build command to build a catalog from an appregistry namespace
8c7c3f498 test(e2e): add bundle data image extraction test
652e8a396 test(e2e): add initial test bootstrap
92568f12b feat(cli): add bundle extractor binary
98e9b709d feat(configmap): add configmap writer
f5444e285 chore(client): move k8s clientset generation
ed733cf96 chore(configmap): load packagemanifest data from annotations
5c4a88e77 test(unit): add test case from generated configmap
9519e7973 (feat) Load operator registry bundle from ConfigMap
1e3a9a685 Merge pull request #97 from dinhxuanvu/bundle-lib
b1aaf2526 Change const to upper case so it can be used
e42de32db Merge pull request #103 from anik120/image-digests2
c62fdb4bb Image digests for referencing bundles
dbca245b1 Clean up minor issues with command-line code and documentation
d84454578 Merge pull request #101 from ecordell/relatedimages
1600fab9c feat(migrate): migrate from current version up to the latest
f7f554b3e feat(images): add support for storing and querying related images
9f0f125e7 feat(migrations): switch to go-based migrator
93f2f687e Fix bundle library doc to reflect new changes/features
2434e337b Fix bundle library unit tests to cover new code
1c113bcb6 Fix bundle library to add package and channels info to annotations
e061d9a36 Clean up library code, unit tests and documentation details
4dc452ba0 Add CLI tool to build Operator Bundle image
c649037aa Merge pull request #102 from operator-framework/update-owners
7d088609b Update OWNERS
47f4e56cf Merge pull request #77 from njhale/remove-schema
325e8ee89 Merge pull request #96 from gallettilance/opm-cli
bd347d3a6 Adding opm cli
e679e0049 Merge pull request #90 from kevinrizza/db-migration-scaffold
d64ca7d77 Bundle migrations in binary
8f1e20a6d Database migration initialization
4df186f63 Merge pull request #98 from ecordell/foreign-keys
adfbcbe98 Merge pull request #86 from estroz/fix-crd-encoding
50b725a67 fix(sqlite): enable foreign keys for sqlite
dddf15793 Merge pull request #88 from kevinrizza/migrations-proposal
01461dce2 Add migration proposal
15f725527 Merge pull request #87 from ecordell/kube-1.16
bacb60372 chore(deps): refactor load_test so that OLM is no longer imported at all
3f9f3d83c chore(schema): remove schema
5d8bf321e feat(csv): support extracting version from bundle's csv
bc107ecac chore(deps): bump to kube 1.16
85ae208e9 Create PULL_REQUEST_TEMPLATE.md
28f99b0ac pkg/registry/bundle.go: use v1beta1.CustomResourceDefinition, as the apiextensions type is internal
709cb007b Merge pull request #84 from njhale/fix-transactions
6ca85bf52 fix(sqlite): defer rollbacks to prevent db lock
4e83e7e01 Merge pull request #82 from ecordell/grpc-update
3b6857c91 chore(deps): update grpc to latest
f0509fa8f chore(schema): remove unused upgrade path code
4633997c6 Merge pull request #75 from dinhxuanvu/error-fix
f1e0e88c1 Merge pull request #74 from njhale/permissive
851783377 fix(registry) Fix incorrect error return and handle
284be6981 refactor(cmd): change command scope to make testing easier
b9e346e81 feat(configmap-server): tolerate load errors
a89b379b4 feat(registry-server): tolerate load errors
2414acd71 feat(appregistry-server): add strict load option
72e0be383 feat(configmap-server): add permissive load option
4d40a2042 feat(initializer): add permissive load option
ba3de1f89 feat(log): make termination-log setup failure non-fatal
efb96a667 Merge pull request #72 from njhale/fix-best-effort
a0e1c4248 test(load): add test of unpacked appregistry format
6b11844a7 fix(sqlite): correct directory load error collection
2788358a7 Merge pull request #69 from njhale/best-effort
0547f57aa feat(appregistry-server): use empty querier on fatal load error
3ba8eb920 feat(sqlite): make configmap loading best-effort
b7830a9e7 feat(sqlite): make directory loading best-effort
6ca59e3a4 feat(sqlite): make package loading best-effort
e230b9411 Merge pull request #65 from ecordell/catalog-cmd
dbafcc040 Merge pull request #65 from ecordell/catalog-cmd
b0a4454d9 feat(appregistry): avoid panics in flattened processor
82ee13e48 chore(git): keep testdata/download
aeeca6db6 chore(deps): add glide.yaml for importing to oc
c9c256967 feat(appregistry): have appregistry transform configmap bundles into directories
fb38816aa chore(deps): remove dependency on marketplace
f4d156a44 chore(deps): remove dependency on openapi and go-appr
8cb5471f6 Merge pull request #61 from ecordell/fix-registry-dockerfile
13a6a429b fix(dockerfile): missing image alias
3a731e5ce Merge pull request #60 from ecordell/registry-dockerfile
178706333 Merge pull request #59 from ecordell/remove-olm-and-json
283f75108 add dockerfile that just contains the registry server
4326318c1 refactor(load, query): don't rely on json extensions to sqlite, and don't rely on types imported from OLM
da787d605 feat(load): allow multiple csvs in the same directory
2676630d6 Merge pull request #56 from ecordell/dynlib
ff2a93259 fix(build): don't build static in downstream images
f73badbf8 Merge pull request #55 from ecordell/go-1.12
1256393b1 chore(image): change base image to go 1.12
b52e8d312 chore(dockerfile): switch to go 1.11
9297dc4c9 Merge pull request #54 from ecordell/fix-channel-count
a34303066 fix(query): return all channels when querying
d622bca51 Merge pull request #52 from awgreene/fix-duplicate-package-bug
e778e13fe [bug] Remove duplicate packages from list
e005bc432 Merge pull request #48 from dinhxuanvu/validate-examples
c71e1ba4a Merge pull request #51 from marcoderama/smallfixes
207fb0de8 Documentation: Small typo fixes to README.md
6380d8970 Remove pragma lines that reference the files that cant be found
9f43f541d fix(registry): Validate alm-examples in operator registry
d3b9026e9 Merge pull request #49 from ecordell/healthcheck
0f2a31d2a feat(client): add health check to high-level client interface
a7b02d504 Merge pull request #46 from ecordell/default-channel
e57914eb3 feat(load): validate that packages have a default channel when loading
dcbbdf28e Merge pull request #45 from ecordell/permissive-files
e7d87768d feat(loader): don't require file suffixes
2552478be Merge pull request #43 from tkashem/bundle
9685d18c6 Add unit test(s)
33a7fd259 Support nested operator bundle format
3420338ca Merge pull request #41 from ecordell/z-stream
66f5d27ad feat(load): use a new "skips" field to specify additional operators that
dedae1c2f Merge pull request #40 from tkashem/no-opsrc-dependency
2320552a5 Remove OperatorSource dependency
0739cde3f Merge pull request #39 from ecordell/update-cm-reg
df9fbe258 update upstream configmap-registry image to use the builder image
28784f8cf Merge pull request #34 from dmesser/readme-docs
882430eb1 Merge pull request #38 from dmesser/build-fixes
8457a4339 add instructions how to use grpc catalog
8e058560d fix reference to Dockerfile
eeb5b814b Merge pull request #35 from mhrivnak/typos
67c9f7285 Merge pull request #36 from ecordell/upstream-builder
a0ac5c83d feat(builder): add builder dockerfile (contains tools for building a registry image)
f2088a8b3 fixes typos in README.md
f2b220be7 Merge pull request #32 from ecordell/detect-bad-replaces
e91301562 fix(load): return an error if a CSV specifies a replacement that doesn't exist
55f857fe2 Merge pull request #29 from operator-framework/upstream-readme
a41f89491 Update README.md
342439fe1 Rename upstream.Dockerfile to upstream-example.Dockerfile
e8fc5840e Update docker commands in example to use upstream
b37da018a Merge pull request #28 from kevinrizza/auth-in-appregistry
6905544c3 Add authentication to apprclient
2a5bf4eda Merge pull request #27 from tkashem/remote-registry
7dc5913be Incorporate new binary into docker images
d3a852d1f Add appregistry-server binary
91668083b Add apprclient package that talks to app registry
ba5b82ace Refactor configMap loader to work with appregistry
1ee61e256 Merge pull request #26 from jpeeler/remove-dep
851dba318 fix(build): remove dep usage
67841cfe8 chore(build): make vendor
40396880c fix(build): update grpc-health-probe for module support
6c51b6c05 Merge pull request #25 from jpeeler/static-build
cefbc8e00 fix(build): make static build work
88d15100f Merge pull request #24 from ecordell/root-downstream
2bdc5a8e3 fix(dockerfile): user needs enough access to read from the filesystem
353808d71 Merge pull request #23 from njhale/revendor-olm
8b4b1703f chore(modules): update version of OLM module and revendor
f30dd21db Merge pull request #21 from operator-framework/configmap-server-path
f272de540 fix(dockerfile): move configmap-server into path
59cf23fa1 Merge pull request #20 from njhale/get-bundle
3c6870896 feat(bundles): add GetBundle request
85923f676 Merge pull request #19 from njhale/fix-minimum
880995e47 fix(bundle): fix CRD conversion with minimum validation field
973e2f25f Merge pull request #18 from ecordell/update-olm-types
e7d02c2b3 fix(dep): bump olm types so that registry can serve new CSVs
2875581ae Merge pull request #17 from ecordell/expose-clients
e82f243eb feat(client): expose underlying clients
a121b5d37 fix(configmap-server): switch dockerfile to go 1.10
45f0a61bf Merge pull request #16 from ecordell/fix-configmap-bundle-parsing
3175ccbb1 fix(configmap-server): gvk parsed for owned CRDs incorrectly, so bundles were omitting CRDs
3dd0bd6a8 Merge pull request #14 from njhale/group-and-plural
c43c54102 refactor(schema): split groupOrName into group and plural fields
43b9be2b7 Merge pull request #13 from njhale/container-codegen
d898e2cd8 chore(codegen): run codegen
14b04ed4d chore(tools): add golang/protobuf as a tool dep
ca3334dea feat(codegen): add container-codegen make rule
4c5211261 Merge pull request #12 from njhale/add-owners
1a19641b8 chore(ci): add OWNERS file
6f84a5529 Merge pull request #11 from njhale/okd-dockerfile
5753cb475 refactor(Makefile): rename test rule to unit
9af6a9ffe chore(Dockerfile): remove directory check
f4b787383 fix(build): enable cgo
e33c1c0a7 chore(go.sum): regenerate go.sum
584c8197c feat(make): prevent test caching
fc5eefe70 fix(test): add missing fields to expected bundle
c226b2f21 fix(client): correct package used for healthcheck client
42d57e1fd feat(image): add CI compatible Dockerfile
156c40986 Merge pull request #10 from ecordell/move-health
b05b41925 fix(health): move health to its own package with the right package name
acb1e805a Merge pull request #9 from njhale/grpc-health-probe
561ba55fd feat(health): add gRPC health probe tool to docker images
f01b157c3 Merge pull request #8 from njhale/termination-log
755bba780 refactor(logs): factor out default writer hook setup
217e9fde5 feat(configmap-server): write panic and fatal log levels to a termination log - adds `termination-log` flag to `configmap-server` binary to specify termination log path - writes panic and fatal log levels to a termination log
0e5829177 feat(registry-server): write panic and fatal log levels to a termination log
b02598f48 feat(logs): add WriterHook type for splitting log levels between writers
bd9135471 fix(go-mod): fix checksum issue with client-go go module
4a95f4762 Merge pull request #7 from ecordell/fix-crd-parsing
344e126b5 fix(bundle): fix CRD <plural>.<group> parsing
eed1e3c20 Merge pull request #6 from ecordell/readme
a22de90bd chore(docs): update readme with configmap-sever and pkg/client
7a2481a19 feat(health): add healthcheck endpoint
07842f742 feat(schema): add validators to directory loader
4e431bcd2 feat(client): add grpc client interface
f2e497cc8 feat(bundle): add package/channel name to bundle
106a8d98d chore(deps): switch to go modules
0e5cda08f Merge pull request #5 from ecordell/reflection
c66a4d03a feat(grpc): enable reflection on grpc endpoints
02055cf87 Merge pull request #4 from ecordell/grpc
3f59e9f6d feat(configmap-server): add dockerfile which builds and runs configmap-server
1a0cf5eb7 feat(configmap-server): add configmap-server binary
59c175ed3 chore(deps): update dependencies for version-config
e003bf393 feat(registry-server): add server binary that speaks grpc
f3c8394a7 chore(deps): add proto dependencies
948c18dfc feat(grpc): adds basic gRPC interface to querier
527540792 Merge pull request #3 from ecordell/configmap
2fe122016 feat(load/query): support provided APIs that are apiservices
083292293 chore(deps): depend on latest OLM
fe5fc0213 feat(configmap): add configmap loader
256f3223e Merge pull request #2 from ecordell/basic-registry
fbe246ab0 Merge pull request #1 from ecordell/basic-registry
15b0a40f3 chore(deps): remove unneeded dependencies
5aa6d970e chore(pkg): make more like a kube-style go package
a52c3e1a6 feat(query): open db as immutable for querying
87a57dc25 feat(query): add query interface and refactor tables
8aafbd49f feat(load): add package and channel loading
0bacbf2b0 refactor(store): add storage abstraction
199af66f3 feat(loader): create basic loader that puts csvs and bundles into a sqllite db
b4f844f65 Remove overrides for GOOS and GOARCH in cpb Makefile recipe.
076370a4a reset staging/operator-registry
b2c0188f2 Merge pull request #33 from timflannagan/fix-version
eb653bcaa Makefile: Use the full git commit hash when building binaries
fc8fceebf Merge pull request #32 from timflannagan/cleanup
5674d1a72 base.Dockerfile: Bump the Go base image to use a 1.16 tag
a1dd03100 Remove root OLM_VERSION file
9dd58651d Merge pull request #31 from openshift-bot/art-consistency-openshift-4.8-operator-lifecycle-manager
5cf062295 Merge pull request #30 from openshift-bot/art-consistency-openshift-4.8-operator-registry
fe8af7ba1 Merge pull request #29 from timflannagan/build-opm-binary
ae248a830 Dockerfile,Makefile: Add opm binary and cross compilation target(s)
d1cbee907 Updating operator-lifecycle-manager builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/b7ea3c7f495e67d5b790e3698b5c319b67e98b35/images/operator-lifecycle-manager.yml
0a0c4e3f2 Updating operator-registry builder & base images to be consistent with ART Reconciling with https://github.com/openshift/ocp-build-data/tree/b7ea3c7f495e67d5b790e3698b5c319b67e98b35/images/operator-registry.yml
6cc52b3f7 Merge pull request #27 from ankitathomas/manifest-crd-gen
637012048 remove top level deploy, crds directories
efd971ec8 add crd and manifest generation
30836f7ae Merge pull request #26 from timflannagan/updates
416ae4117 Makefile,Dockerfile: Add additional registry and OLM build targets
138cb4289 scripts: Address markdown violations in the README.md
a137de7eb cmds.go,vendor: Introduce the non-opm registry binary packages
1c46643a1 scripts: Check if the vendor directory needs to be populated first before running e2e packages
9869d83fb scripts: Avoid hardcoding the test e2e function called
4979ef16a Makefile: Update the e2e-related targets
f3f041098 staging: Update OLM modules after recent changes
3e7d2256f Merge pull request #25 from ankitathomas/release-4.8
e15c0d7c5 go mod tidy and vendor
c45c5ddd4 Sync upstream operator-lifecycle-manager release-4.8
d4db74a7a Sync upstream operator-registry v1.13.6
6c922ea8c Sync upstream api v0.7.0
7687486a0 README.md
0bbcb6c43 Use staged tests
7b32e4e3d Update scripts to track specific commit
f9bb28356 Merge pull request #21 from timflannagan/fix-unit-script
c5b021539 scripts: Update the unit.sh helper script and populate the nested staging directory
b3559db98 Merge pull request #20 from timflannagan/minor-updates
6b9b9d6b8 Makefile: Introduce additional test targets
0b2acc7a7 scripts: Introduce an e2e helper script
a2b4d716f Dockerfile: Copy the entire repository while building binaries
e057b1cba vendor: Re-sync vendor after adding debug statement to staging package
f712e45d9 Merge pull request #19 from timflannagan/update-root-registry-tag
ca2f7cdae Merge pull request #18 from timflannagan/single-go-mod
2a481b8da Update the base image for the operator-registry image
62a5ee560 WIP: Update root Dockerfile(s)/Makefile to build downstream images
ad38f168b .gitignore: Ignore nested staging vendor directories
90d992bde go.sum,vendor: Update vendor directory after adding package-server
09e96f17d Add the package-server to the list of local command packages
02af3f211 Makefile: Add build and basic test targets
1e76453fa Introduce cmds package that tracks the staging operator-framework directories
84711e296 go.sum,vendor: Update root vendorered dependencies
feff05e7c Remove any mirrored cmd,pkg staging packages
31e2e318c staging: Remove nested vendor directories
10fdf0150 Merge pull request #12 from timflannagan/update-root-makefile
aa3ed9f55 Makefile: Reduce the number of targets
be45d688a scripts: Add unit test helper scripts
8e343401b Dockerfile: Avoid hardcoding the kubebuilder version in multiple places
671db25a8 Merge pull request #10 from timflannagan/minor-updates
cef149683 Dockerfile: Avoid using the registry.svc.ci container registry
918821840 Copy OLM_VERSION from staging/operator-lifecycle-manager to root
55b5b469c Merge pull request #6 from timflannagan/bump-image-tags
543265256 Merge pull request #9 from timflannagan/sync-vendor-prow
13041aa9f staging/olm: Remove invalid trailing slash in the go-bindata dependency
6ba5fb361 staging: Ensure staging modules are synced
ee542782b Merge pull request #7 from timflannagan/add-minimal-gitignore
e18eb1b0f Add root .gitignore
1c679d74f *.Dockerfile: Manually bump the image tags to 4.8
4694b1d65 Merge pull request #5 from timflannagan/ankitathomas/master
3f9b44835 staging: Remove the OWNERS files from the OLM-related staging repositories
a65e8778e Initial commit
584696e84 Merge pull request #1 from timflannagan/patch-2
8ce5a0f97 Create OWNERS
1f6ab6366 Initial commit
